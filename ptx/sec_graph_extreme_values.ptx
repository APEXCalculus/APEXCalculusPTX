<?xml version="1.0" encoding="UTF-8"?>
<section xml:id="sec_extreme_values" label="sec_extreme_values">
  <title>Extreme Values</title>
  <p>
    Given any quantity described by a function,
    we are often interested in the largest and/or smallest values that quantity attains.
    For instance, if a function describes the speed of an object,
    it seems reasonable to want to know the fastest/slowest the object traveled.
    If a function describes the value of a stock,
    we might want to know the highest/lowest values the stock attained over the past year.
    We call such values <em>extreme values.</em>
  </p>

  <definition xml:id="def_extreme_values">
    <title>Extreme Values</title>
    <statement>
      <p>
        Let <m>f</m> be defined on an interval <m>I</m> containing <m>c</m>.

              <idx><h>extreme values</h></idx>
              <idx><h>absolute minimum</h></idx>
              <idx><h>minimum</h><h>absolute</h></idx>
              <idx><h>absolute maximum</h></idx>
              <idx><h>maximum</h><h>absolute</h></idx>

        <ol>
          <li>
            <p>
              <m>f(c)</m> is the <em>minimum</em> (also,
              <em>absolute minimum</em>) of <m>f</m> on <m>I</m> if
              <m>f(c) \leq f(x)</m> for all <m>x</m> in <m>I</m>.
            </p>
          </li>

          <li>
            <p>
              <m>f(c)</m> is the <em>maximum</em> (also,
              <em>absolute maximum</em>) of <m>f</m> on <m>I</m> if
              <m>f(c) \geq f(x)</m> for all <m>x</m> in <m>I</m>.
            </p>
          </li>
        </ol>
      </p>

      <p>
        The maximum and minimum values are the
        <term>extreme values</term>,
        or <term>extrema</term>, of <m>f</m> on <m>I</m>.
            <idx><h>extrema</h><h>absolute</h></idx>
      </p>
    </statement>
  </definition>

  <aside xml:id="aside-graph-extreme-terminology" vshift="0">
    <p>
      <em>Note:</em> The extreme values of a function are
      <q><m>y</m></q> values,
      values the function attains, not the input values.
      However we often say there is an extreme value
      <em>at</em> certain input values.
      For example, <q><m>\sin(x)</m> has a maximum
      <em>at</em> <m>\pi/2</m>,
      and the maximum of <m>\sin(x)</m>
      <em>is</em> <m>1</m>.</q>
    </p>
  </aside>

  <figure xml:id="vid_graphs_extreme_val_abs_extrema" component="video" vshift="5">
    <caption>Video presentation of <xref ref="def_extreme_values"/></caption>
    <video youtube="srE7xUmQtCQ" label="vid_graphs_extreme_val_abs_extrema"/>
  </figure>

 <p>
    Consider <xref ref="fig_extreme"/>.
    The function displayed in <xref ref="fig_extreme1"/> has a maximum,
    but no minimum,
    as the interval over which the function is defined is open.
    In <xref ref="fig_extreme2"/>, the function has a minimum,
    but no maximum;
    there is a discontinuity in the <q>natural</q>
    place for the maximum to occur.
    Finally, the function shown in <xref ref="fig_extreme3"/>has both a maximum and a minimum;
    note that the function is continuous and the interval on which it is defined is closed.
  </p>

  <!-- ToDo: I'm not sure if the intervals need to be shown on the x axis. I left them there for now.  -->

  <figure xml:id="fig_extreme">
  <caption>Graphs of functions with and without extreme values</caption>
  <sidebyside widths="31% 31% 31%" margins="0%">
    <figure xml:id="fig_extreme1">
      <caption/>
        <!-- START figures/fig_extreme1.tex -->
      <image>
        <shortdescription>A parabolic graph, opening downward, from -2 to 2, not including the endpoints</shortdescription>
        <description>
          <p>
            The image shows the graph of a function with the appearance of a parabola that opens downward,
            with its vertex at <m>(0,5)</m>.
            The domain for the function is <m>(-2,2)</m>, so the graph approaches, but does not reach,
            the points <m>(-2,1)</m> and <m>(2,1)</m>. These points are shown with hollow dots,
            to illustrate the fact that they are not part of the graph.
          </p>

          <p>
            The maximum value <m>f(0)=5</m> is reached, but there is no minimum value,
            since the graph approaches, but does not reach, its end points.
          </p>
        </description>
        <latex-image label="img_extreme1">

        \begin{tikzpicture}
        \begin{axis}[ ymin=-.9,ymax=5.5,xmin=-2.2,xmax=2.4,]
        \addplot+[open,domain=-2:2] {-x^2+5};
        \addplot[openinterval] coordinates {(-2,0) (2,0)};
        \end{axis}
        \end{tikzpicture}

        </latex-image>
      </image>
        <!-- figures/fig_extreme1.tex END -->
    </figure>

    <figure xml:id="fig_extreme2">
      <caption/>

      <image>
        <shortdescription>A parabolic graph, opening downward, from -2 to 2. The vertex at (0,5) is missing.</shortdescription>
        <description>
          <p>
            The image shows the graph of a function with the appearance of a parabola that opens downward,
            with its vertex at <m>(0,5)</m>.
            The domain for the function is <m>[-2,2]</m>, this time,
            the points <m>(-2,1)</m> and <m>(2,1)</m> at the ends of the graph are included.
          </p>

          <p>
            However, there is a hollow dot at <m>(0,5)</m>, indicating a hole at the vertex.
            A solid dot at <m>(0,3)</m> suggests that this is the graph of a function with <m>f(0)=3</m>.
          </p>

          <p>
            This graph illustrates a function with a minimum value <m>f(-2)=f(2)=1</m>,
            but there is no maximum value, since the parabola approaches, but does not reach, its vertex.
          </p>
        </description>
        <latex-image label="img_extreme2">

        \begin{tikzpicture}
        \begin{axis}[ ymin=-.9,ymax=5.5,xmin=-2.2,xmax=2.4,]
        \addplot+[domain=-2:2,closed] {-x^2+5};
        \addplot[soliddot] coordinates {(0,3)};
        \addplot[closedinterval] coordinates {(-2,0) (2,0)};
        \addplot[hollowdot] coordinates {(0,5)};
        \end{axis}
        \end{tikzpicture}

        </latex-image>
      </image>

    </figure>

    <figure xml:id="fig_extreme3">
      <caption/>
        <!-- START figures/fig_extreme3.tex -->
      <image>
        <shortdescription>The graph of a parabola opening downward from a vertex at (0,5), for x from -2 to 2</shortdescription>
        <description>
          <p>
            This graph shows a parabola on the interval <m>[-2,2]</m>,
            opening downward from its vertex at <m>(0,5)</m>.
          </p>

          <p>
            There are no holes in the graph, and the endpoints are included.
          </p>

          <p>
            The graph illustrates a maximum value <m>f(0)=5</m> and a minimum value of <m>1</m>,
            which is attained at both <m>x=2</m> and <m>x=-2</m>.
          </p>
        </description>
        <latex-image label="img_extreme3">

        \begin{tikzpicture}
        \begin{axis}[ ymin=-.9,ymax=5.5,xmin=-2.2,xmax=2.4,]
        \addplot+[domain=-2:2,closed] {-x^2+5};
        \addplot[closedinterval] coordinates {(-2,0) (2,0)};
        \end{axis}
        \end{tikzpicture}

        </latex-image>
      </image>
        <!-- figures/fig_extreme3.tex END -->
    </figure>
  </sidebyside>
  </figure>

  <p>
    It is possible for discontinuous functions defined on an open interval to have both a maximum and minimum value,
    but we have just seen examples where they did not.
    On the other hand,
    continuous functions on a closed interval <em>always</em>
    have a maximum and minimum value.
  </p>

  <theorem xml:id="thm_extreme_val">
    <title>The Extreme Value Theorem</title>
    <statement>
      <p>
        Let <m>f</m> be a continuous function defined on a closed interval <m>I=[a,b]</m>.
        Then <m>f</m> has both a maximum and minimum value on <m>I</m>.

              <idx><h>Extreme Value Theorem</h></idx>

      </p>
    </statement>
  </theorem>

  <figure xml:id="vid_graphs_extreme_val_EVT" component="video" vshift="2">
    <caption>Video presentation of <xref ref="thm_extreme_val"/></caption>
    <video youtube="GIcjxu8dTnY" label="vid_graphs_extreme_val_EVT"/>
  </figure>

  <p>
    This theorem states that <m>f</m> has extreme values,
    but it does not offer any advice about how/where to find these values.
    The process can seem to be fairly easy,
    as the next example illustrates.
    After the example,
    we will draw on lessons learned to form a more general and powerful method for finding extreme values.
  </p>

  <example xml:id="ex_extval1">
    <title>Approximating extreme values</title>
    <statement>
      <p>
        Consider <m>f(x) = 2x^3-9x^2</m> on <m>I=[-1,5]</m>,
        as graphed in <xref ref="fig_extval1"/>.
        Approximate the extreme values of <m>f</m>.
      </p>

      <figure xml:id="fig_extval1" vshift="0">
        <caption>A graph of <m>f(x) = 2x^3-9x^2</m> as in <xref ref="ex_extval1"/></caption>

          <!-- START figures/fig_extval1.tex -->
        <image width="47%">
          <shortdescription>The graph of a cubic function on the interval [-1,5], with maximum and minimum values</shortdescription>
          <description>
            <p>
              The image shows the graph of <m>f(x)=2x^3-9x^2</m> on the interval <m>[-1,5]</m>.
              Beginning at the point <m>(-1,-11)</m>, the graph rises to a peak at <m>(0,0)</m>,
              before falling to its minimum value at <m>(3,-27)</m>.
              The graph then climbs to the endpoint <m>(5,25)</m>, where it reaches its maximum value.
            </p>
          </description>
          <latex-image label="img_extval1">

          \begin{tikzpicture}
          \begin{axis}[xmin=-2,xmax=5.7,
          ymin=-33,ymax=31,]
          \addplot+[domain=-1:5, samples=40] {2*x^3-9*x^2};
          \addplot[soliddot] coordinates{(-1,-11)} node[below] {$(-1,-11)$};
          \addplot[soliddot] coordinates{(0,0)} node[above right] {$(0,0)$};
          \addplot[soliddot] coordinates{(3,-27)} node[below] {$(3,-27)$};
          \addplot[soliddot] coordinates{(5,25)} node[above] {$(5,25)$};
          \end{axis}
          \end{tikzpicture}

          </latex-image>
        </image>
          <!-- figures/fig_extval1.tex END -->
      </figure>

    </statement>
    <solution>
      <p>
        The graph is drawn in such a way to draw attention to certain points.
        It certainly seems that the smallest <m>y</m>-value is <m>-27</m>,
        found when <m>x=3</m>.
        It also seems that the largest <m>y</m>-value is <m>25</m>,
        found at the endpoint of <m>I</m>, <m>x=5</m>.
        We use the word <em>seems</em>,
        for by the graph alone we cannot be sure the smallest value is not less than <m>-27</m>.
        Since the problem asks for an approximation,
        we approximate the extreme values to be <m>25</m> and <m>-27</m>.
      </p>
    </solution>
  </example>

  <p>
    Notice how the minimum value came at
    <q>the bottom of a hill,</q>
    and the maximum value came at an endpoint.
    Also note that while <m>0</m> is not an extreme value,
    it would be if we narrowed our interval to <m>[-1,4]</m>.
    The idea that the point <m>(0,0)</m> is the location of an extreme value for some interval is important,
    leading us to a definition of a
    <em>relative maximum</em>.
    In short, a <q>relative max</q>
    is a <m>y</m>-value that's the largest <m>y</m>-value <q>nearby.</q>
  </p>

  <figure xml:id="vid_graphs_extreme_val_rel_extrema" component="video" vshift="-1">
    <caption>Video presentation of <xref ref="def_rel_ext"/></caption>
    <video youtube="nBZTnxn0vqQ" label="vid_graphs_extreme_val_rel_extrema"/>
  </figure>

  <definition xml:id="def_rel_ext">
    <title>Relative Minimum and Relative Maximum</title>
    <statement>
      <p>
        Let <m>f</m> be defined on an interval <m>I</m> containing <m>c</m>.

        <ol>
          <li>
            <p>
              If there is a <m>\delta \gt 0</m> such that
              <m>f(c) \leq f(x)</m> for all <m>x</m> in <m>I</m> where <m>\abs{x-c}\lt \delta</m>,
              then <m>f(c)</m> is a <term>relative minimum</term> of <m>f</m>.
              We also say that <m>f</m> has a relative minimum at <m>(c,f(c))</m>.
                <idx><h>minimum</h><h>relative/local</h></idx>
                <idx><h>extrema</h><h>relative</h></idx>
            </p>
          </li>

          <li>
            <p>
              If there is a <m>\delta \gt 0</m> such that
              <m>f(c) \geq f(x)</m> for all <m>x</m> in <m>I</m> where <m>\abs{x-c}\lt \delta</m>,
              then <m>f(c)</m> is a <term>relative maximum</term> of <m>f</m>.
              We also say that <m>f</m> has a relative maximum at <m>(c,f(c))</m>.
                <idx><h>maximum</h><h>relative/local</h></idx>
                <idx><h>extrema</h><h>relative</h></idx>
            </p>
          </li>
        </ol>
      </p>

      <p>
        The relative maximum and minimum values comprise the
        <term>relative extrema</term> of <m>f</m>.
      </p>
    </statement>
  </definition>

  <aside xml:id="aside-graph-extreme-vocabulary2" vshift="1">
    <title>Alternative Vocabulary</title>
    <p>
      The terms <em>local minimum</em>
      and <em>local maximum</em>
      are often used as synonyms for <em>relative minimum</em>
      and <em>relative maximum</em>.
    </p>

    <p>
      As it makes intuitive sense that an absolute maximum is also a relative maximum,
      <xref ref="def_rel_ext"/>
      allows a relative maximum to occur at an interval's endpoint.
    </p>
  </aside>

  <p>
    We briefly practice using these definitions.
  </p>

  <example xml:id="ex_extval2">
    <title>Approximating relative extrema</title>
    <statement>
      <p>
        Consider <m>f(x) = (3x^4-4x^3-12x^2+5)/5</m>,
        as shown in <xref ref="fig_extval2"/>.
        Approximate the relative extrema of <m>f</m>.
        At each of these points, evaluate <m>\fp</m>.
      </p>

      <figure xml:id="fig_extval2" vshift="-1.5">
        <caption>A graph of <m>f(x) = (3x^4-4x^3-12x^2+5)/5</m> as in <xref ref="ex_extval2"/></caption>
          <!-- START figures/fig_extval2.tex -->
        <image width="47%">
          <shortdescription>The graph of a degree 4 function with several critical points.</shortdescription>
          <description>
            <p>
              The graph of <m>f(x)=\frac15(3x^4-4x^3-12x^2+5)</m> is shown, for <m>x</m> between <m>-2</m> and <m>3</m>.
              Arrows at either end of the graph indicate that <m>f(x)</m> will approach <m>\infty</m> in either direction beyond the interval shown.
              The graph shows three relative extrema: there are minima when <m>x=-1</m> and <m>x=2</m>, and a maximum at <m>x=0</m>.
            </p>
          </description>
          <latex-image label="img_extval2">

          \begin{tikzpicture}
          \begin{axis}[xmin=-2.2,xmax=3.2,
          ymin=-6.5,ymax=6.9,]
          \addplot+[infinite,domain=-1.8:3, samples=50] {(3*x^4-4*x^3-12*x^2+5)/5};
          \end{axis}
          \end{tikzpicture}

          </latex-image>
        </image>
          <!-- figures/fig_extval2.tex END -->
      </figure>
    </statement>
    <solution>
      <p>
        We still do not have the tools to exactly find the relative extrema,
        but the graph does allow us to make reasonable approximations.
        It seems <m>f</m> has relative minima at <m>x=-1</m> and <m>x=2</m>,
        with values of <m>f(-1)=0</m> and <m>f(2) = -5.4</m>.
        It also seems that <m>f</m> has a relative maximum at the point <m>(0,1)</m>.
      </p>

      <p>
        We approximate the relative minima to be <m>0</m> and <m>-5.4</m>;
        we approximate the relative maximum to be <m>1</m>.
      </p>

      <p>
        It is straightforward to evaluate
        <m>\fp(x) =\frac{1}{5}\left(12x^3-12x^2-24x\right)</m> at <m>x=0, 1</m> and <m>2</m>.
        In each case, <m>\fp(x) = 0</m>.
      </p>
    </solution>
  </example>

  <example xml:id="ex_extval3">
    <title>Approximating relative extrema</title>
    <statement>
      <p>
        Approximate the relative extrema of <m>f(x) = (x-1)^{2/3}+2</m>,
        shown in <xref ref="fig_extval3"/>.
        At each of these points, evaluate <m>\fp</m>.
      </p>

      <figure xml:id="fig_extval3" vshift="-1.5">
        <caption>A graph of <m>f(x) = (x-1)^{2/3}+2</m> as in <xref ref="ex_extval3"/></caption>
          <!-- START figures/fig_extval3.tex -->
        <image width="47%">
          <shortdescription>A graph in the shape of a curved V, with a sharp point at (1,2).</shortdescription>
          <description>
            <p>
              The graph of <m>f(x)=(x-1)^{2/3}+2</m> resembles the outstretched wings of a bird.
              It is in the shape of a wide, curved V, with a vertex at <m>(1,2)</m>.
            </p>

            <p>
              This graph illustrates the case of a local minimum that occurs at a point of non-differentiability.
            </p>
          </description>
          <latex-image label="img_extval3">

          \begin{tikzpicture}
          \begin{axis}[xmin=-.6,xmax=2.6,
          ymin=-.5,ymax=3.5]
          \addplot+[rightarrow,domain=2:3.2] ({(x-2)^1.5+1},{x});
          \addplot[firstcurvestyle,rightarrow,domain=2:3.2] ({-(x-2)^1.5+1},{x});
          \end{axis}
          \end{tikzpicture}

          </latex-image>
        </image>
          <!-- figures/fig_extval3.tex END -->
      </figure>
    </statement>
    <solution>
      <p>
        The figure implies that <m>f</m> does not have any relative maxima,
        but has a relative minimum at <m>(1,2)</m>.
        In fact, the graph suggests that not only is this point a relative minimum,
        <m>y=f(1)=2</m> is <em>the</em> minimum value of the function.
      </p>

      <p>
        We compute <m>\fp(x) = \frac23(x-1)^{-1/3}</m>.
        When <m>x=1</m>, <m>\fp</m> is undefined.
      </p>
    </solution>
  </example>

  <p>
    What can we learn from the previous two examples?
    We were able to visually approximate relative extrema,
    and at each such point,
    the derivative was either <m>0</m> or it was not defined.
    This observation holds for all functions,
    leading to a definition and a theorem.
  </p>

  <definition xml:id="def_criticalnum">
    <title>Critical Numbers and Critical Points</title>
    <statement>
      <p>
        Let <m>f</m> be defined at <m>c</m>.
        The value <m>c</m> is a <term>critical number</term>
        (or <term>critical value</term>)
        of <m>f</m> if <m>\fp(c)=0</m> or <m>\fp(c)</m> is not defined.

              <idx><h>critical number</h></idx>
              <idx><h>critical point</h></idx>

      </p>

      <p>
        If <m>c</m> is a critical number of <m>f</m>,
        then the point <m>(c,f(c))</m> is a
        <term>critical point</term> of <m>f</m>.
      </p>
    </statement>
  </definition>

  <aside xml:id="aside-graph-extreme-vocabulary3" vshift="1.25">
    <p>
      In this text we use <q>critical number</q> and <q>critical value</q>
      interchangeably. Other textbooks reserve the term <em>critical value</em>
      for the function value <m>f(c)</m>, when <m>c</m> is a critical number.
    </p>
  </aside>

  <theorem xml:id="thm_criticalpts">
    <title>Relative Extrema and Critical Points</title>
    <statement>
      <p>
        Let a function <m>f</m> be defined on an open interval <m>I</m> containing <m>c</m>,
        and let <m>f</m> have a relative extremum at the point <m>(c,f(c))</m>.
        Then <m>c</m> is a critical number of <m>f</m>.
      </p>
    </statement>
  </theorem>

  <figure xml:id="vid_graphs_extreme_val_crit_pnts" component="video" vshift="-0.75">
    <caption>Video presentation of <xref ref="def_criticalnum"/> and <xref ref="thm_criticalpts"/></caption>
    <video youtube="WsBGpi006X0" label="vid_graphs_extreme_val_crit_pnts"/>
  </figure>

  <p>
    Be careful to understand that this theorem states
    <q>Relative extrema on open intervals occur at critical points.</q>
    It does not say <q>All critical numbers produce relative extrema.</q> For instance,
    consider <m>f(x) = x^3</m>.
    Since <m>\fp(x) = 3x^2</m>,
    it is straightforward to determine that <m>x=0</m> is a critical number of <m>f</m>.
    However, <m>f</m> has no relative extrema,
    as illustrated in <xref ref="fig_extreme4"/>.
  </p>

  <pagebreak-latex/>
  
  <figure xml:id="fig_extreme4" vshift="-2">
    <caption>A graph of <m>f(x)=x^3</m> which has a critical value of <m>x=0</m>, but no relative extrema</caption>
      <!-- START figures/fig_extreme4.tex -->
    <image width="47%">
      <shortdescription>A graph of the cubic function, which has a horizontal tangent at the origin, but no maximum or minimum</shortdescription>
      <description>
        <p>
          The graph of <m>f(x)=x^3</m> rises steadily as <m>x</m> increases.
          It briefly levels off at <m>(0,0)</m>, where there is a horizontal tangent.
          The horizontal tangent corresponds to a critical point, but it is not a relative maximum nor a relative minimum.
        </p>
      </description>
      <latex-image label="img_extreme4">

      \begin{tikzpicture}
      \begin{axis}[xmin=-1.1,xmax=1.1,
			ymin=-1.1,ymax=1.1]
      \addplot+[infinite,domain=-1:1] {x^3};
      \end{axis}
      \end{tikzpicture}

      </latex-image>
    </image>
      <!-- figures/fig_extreme4.tex END -->
  </figure>

  <p>
    <xref ref="thm_extreme_val"/>
    states that a continuous function on a closed interval will have both an absolute maximum and an absolute minimum.
    Common sense tells us <q>extrema occur either at the endpoints or somewhere in between.</q>
    It is easy to check for extrema at endpoints,
    but there are infinitely many points to check that are <q>in between.</q>
    <xref ref="thm_criticalpts"/> tells us we need only check at the critical points that are in between the endpoints.
    We combine these concepts to offer a strategy for finding extrema.
  </p>

  <insight xml:id="idea_extrema">
    <title>Finding Extrema on a Closed Interval</title>
    <p>
      Let <m>f</m> be a continuous function defined on a closed interval <m>[a,b]</m>.
      To find the maximum and minimum values of <m>f</m> on <m>[a,b]</m>:
          <idx><h>extrema</h><h>finding</h></idx>

      <ol>
        <li>
          <p>
            Evaluate <m>f</m> at the endpoints <m>a</m> and <m>b</m> of the interval.
          </p>
        </li>

        <li>
          <p>
            Find the critical numbers of <m>f</m> in <m>[a,b]</m>.
          </p>
        </li>

        <li>
          <p>
            Evaluate <m>f</m> at each critical number.
          </p>
        </li>

        <li>
          <p>
            The absolute maximum of <m>f</m> is the largest of these values,
            and the absolute minimum of <m>f</m> is the least of these values.
          </p>
        </li>
      </ol>
    </p>
  </insight>

  <p>
    We practice these ideas in the next examples.
  </p>

  <example xml:id="ex_extval4">
    <title>Finding extreme values</title>
    <statement>
      <p>
        Find the extreme values of <m>f(x) = 2x^3+3x^2-12x</m> on <m>[0,3]</m>,
        graphed in <xref ref="fig_extval4"/>.
      </p>

      <figure xml:id="fig_extval4" vshift="0.5">
        <caption>A graph of <m>f(x) = 2x^3+3x^2-12x</m> on <m>[0,3]</m> as in <xref ref="ex_extval4"/></caption>
          <!-- START figures/fig_extval4.tex -->
        <image width="47%">
          <shortdescription>A graph of a cubic function on the interval [0,3].</shortdescription>
          <description>
            <p>
              The image shows the graph of <m>f(x)=2x^3+3x^2-12x</m> on the interval <m>[0,3]</m>.
              There appears to be a relative minimum near <m>x=1</m>, and no other critical points.
              The absolute maximum value of the function appears to occur at the right endpoint of the interval.
            </p>
          </description>
          <latex-image label="img_extval4">

          \begin{tikzpicture}
          \begin{axis}[xmin=-.4,xmax=3.3,
          ymin=-7.5,ymax=45.5]
          \addplot+[closed,domain=0:3] {2*x^3+3*x^2-12*x};
          \end{axis}
          \end{tikzpicture}

          </latex-image>
        </image>
          <!-- figures/fig_extval4.tex END -->
      </figure>
    </statement>
    <solution>
      <p>
        We follow the steps outlined in <xref ref="idea_extrema"/>.
        We first evaluate <m>f</m> at the endpoints:
        <md>
          <mrow>f(0)\amp=0\amp f(3)\amp=45</mrow>
        </md>.
      </p>

      <p>
        Next, we find the critical values of <m>f</m> on <m>[0,3]</m>.
        <m>\fp(x) = 6x^2+6x-12 = 6(x+2)(x-1)</m>;
        therefore the critical values of <m>f</m> are <m>x=-2</m> and <m>x=1</m>.
        Since <m>x=-2</m> does not lie in the interval <m>[0,3]</m>,
        we ignore it.
        Evaluating <m>f</m> at the only critical number in our interval gives:
        <m>f(1) = -7</m>.
      </p>

      <p>
        <xref ref="table_ext4"/>
        gives <m>f</m> evaluated at the <q>important</q>
        <m>x</m> values in <m>[0,3]</m>.
        We can easily see the maximum and minimum values of <m>f</m>:
        the maximum value is <m>45</m> and the minimum value is <m>-7</m>.
      </p>

      <figure xml:id="table_ext4" vshift="-5.5">
        <caption>Finding the extreme values of <m>f(x)= 2x^3+3x^2-12x</m> in <xref ref="ex_extval4"/></caption>
        <tabular>
          <row bottom="medium">
            <cell><m>x</m></cell>
            <cell><m>f(x)</m></cell>
          </row>
          <row>
            <cell><m>0</m></cell>
            <cell><m>0</m></cell>
          </row>
          <row>
            <cell><m>1</m></cell>
            <cell><m>-7</m></cell>
          </row>
          <row>
            <cell><m>3</m></cell>
            <cell><m>45</m></cell>
          </row>
        </tabular>
      </figure>

    </solution>
    <solution component="video" vshift="0">
      <title>Video solution</title>
      <video width="98%" youtube="LyhHlreZvhc" label="vid_graphs_extreme_val_ex_1" component="video"/>
    </solution>
  </example>

  <p>
    Note that all this was done without the aid of a graph;
    this work followed an analytic algorithm and did not depend on any visualization.
    <xref ref="fig_extval4"/>
    shows <m>f</m> and we can confirm our answer,
    but it is important to understand that these answers can be found without graphical assistance.
  </p>

  <p>
    We practice again.
  </p>

  <example xml:id="ex_extval5">
    <title>Finding extreme values</title>
    <statement>
      <p>
        Find the maximum and minimum values of <m>f</m> on <m>[-4,2]</m>, where
        <me>
          f(x) = \begin{cases}(x-1)^2 \amp  x\leq 0 \\ x+1 \amp  x \gt 0\end{cases}
        </me>.

      </p>
    </statement>
    <solution>
      <p>
        Here <m>f</m> is piecewise-defined,
        but we can still apply <xref ref="idea_extrema"/>
        as it is continuous on <m>[-4,2]</m>
        (one should check to verify that <m>\lim\limits_{x\to 0}f(x) =f(0)</m>).
      </p>

      <p>
        Evaluating <m>f</m> at the endpoints gives:
        <md>
          <mrow>f(-4)\amp=25\amp f(2)\amp=3</mrow>
        </md>.
      </p>

      <p>
        We now find the critical numbers of <m>f</m>.
        We have to define <m>\fp</m> in a piecewise manner; it is
        <me>
          \fp(x) =\begin{cases}2(x-1) \amp  x \lt  0 \\ 1 \amp  x \gt 0\end{cases}
        </me>.
      </p>

      <p>
        Note that while <m>f</m> is defined for all of <m>[-4,2]</m>,
        <m>\fp</m> is not,
        as the derivative of <m>f</m> does not exist when <m>x=0</m>.
        (From the left, the derivative approaches <m>-2</m>;
        from the right the derivative is <m>1</m>.)
        Thus one critical number of <m>f</m> is <m>x=0</m>.
      </p>

      <p>
        We now set <m>\fp(x) = 0</m>.
        When <m>x \gt 0</m>, <m>\fp(x)</m> is never 0.
        When <m>x\lt 0</m>,
        <m>\fp(x)</m> is also never 0, so we find no critical values from setting <m>\fp(x)=0</m>.
      </p>

      <p>
        So we have three important <m>x</m>-values to consider:
        <m>x= -4, 2</m> and <m>0</m>.
        Evaluating <m>f</m> at each gives, respectively, <m>25</m>,
        <m>3</m> and <m>1</m>, shown in <xref ref="table_ext5"/>.

        Thus the absolute minimum of <m>f</m> is 1,
        the absolute maximum of <m>f</m> is <m>25</m>.
        Our answer is confirmed by the graph of <m>f</m> in <xref ref="fig_extval5"/>.
      </p>

      <sidebyside widths="47% 47%" valign="bottom" margins="0%">

        <figure xml:id="table_ext5">
          <caption>Finding the extreme values of a piecewise-defined function in <xref ref="ex_extval5"/></caption>
          <tabular>
            <row bottom="medium">
              <cell><m>x</m></cell>
              <cell><m>f(x)</m></cell>
            </row>
            <row>
              <cell><m>-4</m></cell>
              <cell><m>25</m></cell>
            </row>
            <row>
              <cell><m>0</m></cell>
              <cell><m>1</m></cell>
            </row>
            <row>
              <cell><m>2</m></cell>
              <cell><m>3</m></cell>
            </row>
          </tabular>
        </figure>

        <figure xml:id="fig_extval5">
          <caption>A graph of <m>f(x)</m> on <m>[-4,2]</m> as in <xref ref="ex_extval5"/></caption>
            <!-- START figures/fig_extval5.tex -->
          <image>
            <shortdescription>The graph of a piecewise-defined function on the interval [-4,2]</shortdescription>
            <description>
              <p>
                The image shows the graph of a piecewise-defined function on the interval <m>[-4,2]</m>.
                For <m>-4\leq x\leq 0</m>, the graph appears to be part of a parabola,
                descending from <m>(-4,25)</m> to <m>(0,1)</m>.
                For <m>0\leq x\leq 2</m>, the graph is a straight line with positive slope, from <m>(0,1)</m> to <m>(2,3)</m>.
              </p>

              <p>
                The point <m>(0,1)</m> is a relative minimum, and a point of non-differentiability.
              </p>
            </description>
            <latex-image label="img_extval5">

            \begin{tikzpicture}
            \begin{axis}[xmin=-4.5,xmax=2.5,
            ymin=-.9,ymax=25.5]
            \addplot+[domain=-4:0] {(x-1)^2};
            \addplot[firstcurvestyle,domain=0:2] {x+1};
            \addplot[soliddot] coordinates {(-4,25) (2,3)};
            \end{axis}
            \end{tikzpicture}

            </latex-image>
          </image>
            <!-- figures/fig_extval5.tex END -->
        </figure>
      </sidebyside>
    </solution>
    <solution component="video" vshift="3">
      <title>Video solution</title>
      <video width="98%" youtube="zn--ShSSMqk" label="vid_graphs_extreme_val_ex_2" component="video"/>
    </solution>
  </example>

  <example xml:id="ex_extval6">
    <title>Finding extreme values</title>
    <statement>
      <p>
        Find the extrema of <m>f(x) = \cos\mathopen{}\left(x^2\right)\mathclose{}</m> on <m>[-2,2]</m>.
      </p>
    </statement>
    <solution>
      <p>
        We again use <xref ref="idea_extrema"/>.
        Evaluating <m>f</m> at the endpoints of the interval gives:
        <m>f(-2) = f(2) = \cos(4) \approx -0.6536</m>.
        We now find the critical values of <m>f</m>.
      </p>

      <p>
        Applying the <xref ref="thm_chain_rule" text="title"/>,
        we find <m>\fp(x) = -2x\sin\mathopen{}\left(x^2\right)\mathclose{}</m>.
        Set <m>\fp(x) = 0</m> and solve for <m>x</m> to find the critical values of <m>f</m>.
      </p>

      <p>
        We have <m>\fp(x) = 0</m> when <m>x = 0</m> and when <m>\sin\mathopen{}\left(x^2\right)\mathclose{}</m>.
        In general, <m>\sin(t) = 0</m> when
        <m>t = \ldots -2\pi, -\pi, 0, \pi, \ldots</m> Thus <m>\sin\mathopen{}\left(x^2\right)\mathclose{} = 0</m> when
        <m>x^2 = 0, \pi, 2\pi, \ldots</m> (<m>x^2</m> is always nonnegative so we ignore <m>-\pi</m>,
        etc.) So <m>\sin\mathopen{}\left(x^2\right)\mathclose{}=0</m> when <m>x= 0, \pm \sqrt{\pi}, \pm\sqrt{2\pi}, \ldots</m>.
        The only values to fall in the given interval of <m>[-2,2]</m> are <m>0</m> and <m>\pm\sqrt{\pi}</m>,
        where <m>\sqrt{\pi} \approx 1.77</m>.
      </p>

      <p>
        We again construct a table of important values in <xref ref="table_ext6"/>.
        In this example we have five values to consider:
        <m>x= 0, \pm 2, \pm\sqrt{\pi}</m>.
        From the table it is clear that the maximum value of <m>f</m> on <m>[-2,2]</m> is <m>1</m>;
        the minimum value is <m>-1</m>.
        The graph in <xref ref="fig_extval6"/> confirms our results.
      </p>

      <sidebyside widths="47% 47%" valign="bottom" margins="0%">

        <figure xml:id="table_ext6">
          <caption>Finding the extrema of <m>f(x)= \cos\mathopen{}\left(x^2\right)\mathclose{}</m> in <xref ref="ex_extval6"/></caption>
          <tabular>
            <row bottom="medium">
              <cell><m>x</m></cell>
              <cell><m>f(x)</m></cell>
            </row>
            <row>
              <cell><m>-2</m></cell>
              <cell><m>-0.65</m></cell>
            </row>
            <row>
              <cell><m>-\sqrt{\pi}</m></cell>
              <cell><m>-1</m></cell>
            </row>
            <row>
              <cell><m>0</m></cell>
              <cell><m>1</m></cell>
            </row>
            <row>
              <cell><m>\sqrt{\pi}</m></cell>
              <cell><m>-1</m></cell>
            </row>
            <row>
              <cell><m>2</m></cell>
              <cell><m>-0.65</m></cell>
            </row>
          </tabular>
        </figure>

        <figure xml:id="fig_extval6">
          <caption>A graph of <m>f(x)=\cos\mathopen{}\left(x^2\right)\mathclose{}</m> on <m>[-2,2]</m> as in <xref ref="ex_extval6"/></caption>
            <!-- START figures/fig_extval6.tex -->
          <image>
            <shortdescription>A graph that resembles a flattened cosine wave for small values of x</shortdescription>
            <description>
              <p>
                The graph of <m>f(x)=\cos(x^2)</m> resembles a cosine wave, except that it is much flatter when <m>x</m> is near <m>0</m>.
                From an apparent relative maximum at <m>(0,1)</m>, the graph descends in both directions toward relative minimum values close to the endpoints,
                at <m>x=2</m> and <m>x=-2</m>.
              </p>
            </description>
            <latex-image label="img_extval6">

            \begin{tikzpicture}
            \begin{axis}[xmin=-2.2,xmax=2.2,
            ymin=-1.1,ymax=1.1]
            \addplot+[closed,samples=40,smooth, domain=-2:2] {cos(deg(x^2))};
            \end{axis}
            \end{tikzpicture}

            </latex-image>
          </image>
            <!-- figures/fig_extval6.tex END -->
        </figure>
      </sidebyside>
    </solution>
    <solution component="video" vshift="3">
      <title>Video solution</title>
      <video width="98%" youtube="sT_3kVSsbz4" label="vid_graphs_extreme_val_ex_3" component="video"/>
    </solution>
  </example>

  <p>
    We consider one more example.
  </p>

  <example xml:id="ex_extval7">
    <title>Finding extreme values</title>
    <statement>
      <p>
        Find the extreme values of <m>f(x) = \sqrt{1-x^2}</m>.
      </p>
    </statement>
    <solution>
      <p>
        A closed interval is not given,
        so we find the extreme values of <m>f</m> on its domain.
        <m>f</m> is defined whenever <m>1-x^2\geq 0</m>;
        thus the domain of <m>f</m> is <m>[-1,1]</m>.
        Evaluating <m>f</m> at either endpoint returns 0.
      </p>

      <sidebyside widths="47% 47%" valign="bottom" margins="0%">
        <figure xml:id="fig_extval7">
          <caption>A graph of <m>f(x)=\sqrt{1-x^2}</m> on <m>[-1,1]</m> as in <xref ref="ex_extval7"/></caption>
            <!-- START figures/fig_extval7.tex -->
          <image>
            <shortdescription>A semi-circle equivalent to the top half of the unit circle</shortdescription>
            <description>
              <p>
                The graph <m>y=\sqrt{1-x^2}</m> is the half of the unit circle <m>x^2+y^2=1</m>, where <m>y\geq 0</m>.
                It has absolute minimum values at its endpoints, which are <m>(-1,0)</m> and <m>(1,0)</m>.
                It reaches its (absolute and relative) maximum at the top of the circle, which is the point <m>(0,1)</m>.
              </p>
            </description>
            <latex-image label="img_extval7">

            \begin{tikzpicture}
            \begin{axis}[xmin=-1.2,xmax=1.2,
            ymin=-1.2,ymax=1.2,
            axis equal]
            \addplot+[closed,domain=0:180] ({cos(x)},{sin(x)});
            \end{axis}
            \end{tikzpicture}

            </latex-image>
          </image>
            <!-- figures/fig_extval7.tex END -->
        </figure>

        <figure xml:id="table_ext7">
          <caption>Finding the extrema of the half-circle in <xref ref="ex_extval7"/></caption>
          <tabular>
            <row bottom="medium">
              <cell><m>x</m></cell>
              <cell><m>f(x)</m></cell>
            </row>
            <row>
              <cell><m>-1</m></cell>
              <cell><m>0</m></cell>
            </row>
            <row>
              <cell><m>0</m></cell>
              <cell><m>1</m></cell>
            </row>
            <row>
              <cell><m>1</m></cell>
              <cell><m>0</m></cell>
            </row>
          </tabular>
        </figure>

      </sidebyside>

      <p>
        Using the <xref ref="thm_chain_rule" text="title"/>, we find <m>\fp(x) = -x\big/\sqrt{1-x^2}</m>.
        The critical points of <m>f</m> are found when
        <m>\fp(x) = 0</m> or when <m>\fp</m> is undefined.
        It is straightforward to find that <m>\fp(x) = 0</m> when <m>x=0</m>,

        and <m>\fp</m> is undefined when <m>x=\pm 1</m>,
        the endpoints of the interval
        (which <em>are</em> in the domain of <m>f</m>.)
        The table of important values is given in <xref ref="table_ext7"/>.
        The maximum value is <m>1</m>,
        and the minimum value is <m>0</m>.
      </p>
    </solution>
  </example>

  <aside xml:id="aside-graph-extreme-circle" vshift="3">
    <title>Circle Revisited</title>
    <p>
      We implicitly found the derivative of <m>x^2+y^2=1</m>,
      the unit circle,
      in <xref ref="sec_imp_deriv"/>
      <xref ref="ex_implicit7"/> as <m>\lz{y}{x} = -x/y</m>.
      In <xref ref="ex_extval7"/>,
      half of the unit circle is given as <m>y=f(x) = \sqrt{1-x^2}</m>.
    </p>

    <p>
      We found <m>\fp(x) = -x\big/\sqrt{1-x^2}</m>.
      Recognize that the denominator of this fraction is <m>y</m>;
      that is, we again found <m>\fp(x) = \lz{y}{x} = -x/y</m>.
    </p>
  </aside>

  <p>
    We have seen that continuous functions on closed intervals always have a maximum and minimum value,
    and we have also developed a technique to find these values.
    In <xref ref="sec_mvt"/>,
    we further our study of the information we can glean from <q>nice</q>
    functions with the Mean Value Theorem.
    On a closed interval, we can find the
    <em>average rate of change</em> of a function
    (as we did at the beginning of <xref ref="chapter_derivatives"/>).
    We will see that differentiable functions always have a point at which their <em>instantaneous</em>
    rate of change is same as the <em>average</em> rate of change.
    This is surprisingly useful, as we'll see.
  </p>

  <exercises>
    <subexercises xml:id="TaC-graph-extreme-values">
      <title>Terms and Concepts</title>
      <exercise label="TaC-graph-extreme-values-1">
        <webwork xml:id="webwork-TaC-graph-extreme-values-1">
          <statement>
            <p>
              Describe what an <q>extreme value</q>
              of a function is in your own words.
            </p>
            <p>
              <var form="essay"/>
            </p>
          </statement>
          <solution>
            <p>
              Answers will vary.
            </p>
          </solution>
        </webwork>
      </exercise>

      <exercise label="TaC-graph-extreme-values-2">
        <statement>
          <p>
            Sketch the graph of a function <m>f</m> on <m>(-1,1)</m> that has both a maximum and minimum value.
          </p>
        </statement>
        <answer>
          <p>
            Answers will vary.
          </p>
        </answer>
      </exercise>

      <exercise label="TaC-graph-extreme-values-3">
        <webwork xml:id="webwork-TaC-graph-extreme-values-3">
          <statement>
            <p>
              Describe the difference between absolute and relative maxima in your own words.
            </p>
            <p>
              <var form="essay"/>
            </p>
          </statement>
          <solution>
            <p>
              Answers will vary.
            </p>
          </solution>
        </webwork>
      </exercise>

      <exercise label="TaC-graph-extreme-values-4">
        <statement>
          <p>
            Sketch the graph of a function <m>f</m> where <m>f</m> has a relative maximum at <m>x=1</m> and <m>\fp(1)</m> is undefined.
          </p>
        </statement>
        <answer>
          <p>
            Answers will vary.
          </p>
        </answer>
      </exercise>

      <exercise label="TaC-graph-extreme-values-5">
        <webwork xml:id="webwork-TaC-graph-extreme-values-5">
          <pg-code>
            $true=PopUp(['?','True','False'],1);
            $false=PopUp(['?','True','False'],2);
          </pg-code>
          <statement>
            <p>
              <var name="$false" form="popup"/>
              If <m>c</m> is a critical value of a function <m>f</m>,
              then <m>f</m> has either a relative maximum or relative minimum at <m>x=c</m>.
            </p>
          </statement>
        </webwork>
      </exercise>

      <exercise label="TaC-graph-extreme-values-6">
        <webwork xml:id="webwork-TaC-graph-extreme-values-6">
          <pg-code>
            $zero = Real(0);
            Context()-&gt;strings-&gt;add('undefined'=&gt;{});
            Context()-&gt;strings-&gt;add('not defined'=&gt;{alias=&gt;'undefined'});
            $undefined = String("undefined");
          </pg-code>
          <statement>
            <p>
              Fill in the blanks:
              The critical points of a function <m>f</m> are found where <m>\fp(x)</m> is equal to <var name="$zero" width="10"/>
              or where <m>\fp(x)</m> is <var name="$undefined" width="10"/>.
            </p>
          </statement>
        </webwork>
      </exercise>
    </subexercises>

    <subexercises>
      <title>Problems</title>
      <exercisegroup cols="2" xml:id="exset-graph-extreme-values-identify-points">
        <introduction>
          <p>
            Identify each of the marked points as being an absolute maximum or minimum,
            a relative maximum or minimum, or none of the above.
          </p>
        </introduction>

        <exercise label="ex-graph-extreme-values-identify-points-1">
          <webwork xml:id="webwork-ex-graph-extreme-values-identify-points-1">
            <pg-code>
              for my $A ('A'..'G') {Context()-&gt;strings-&gt;add($A=&gt;{})};
              $absmax = List("B");
              $absmin = List("None");
              $relmax = List("B", "G");
              $relmin = List("C","F");
            </pg-code>
            <statement>
              <image>
                <shortdescription>A graph with several possible relative maximum and minimum values, some of which are omitted</shortdescription>
                <description>
                  <p>
                    The image shows a graph with labeled points <m>A,B,C,D,E,F,G</m>, going from left to right.
                    Each point is to be considered as potentially a relative or absolute maximum or minimum.
                  </p>

                  <p>
                    The point <m>A</m> is an endpoint of the graph, but it is a hollow dot, indicating that it is not part of the graph.
                    Points on the graph near <m>A</m> are lower than anywhere else on the graph.
                  </p>

                  <p>
                    The graph goes up until it reachs the point <m>B</m>, a solid dot, before going back down to the point <m>C</m>.
                    The <m>y</m> value at <m>B</m> is higher than at any other point on the graph.
                    At <m>C</m> the graph turns sharply: there is a cusp. To the right of <m>C</m> the graph goes up again,
                    until the point <m>D</m>. The point <m>D</m> is a hollow dot, indicating that it is not part of the graph.
                  </p>

                  <p>
                    From <m>D</m> the graph goes down until it reaches <m>E</m>, which is a solid dot.
                    To the right of <m>E</m>, the graph continues to go down,
                    until it reaches <m>F</m>.
                    The point <m>F</m> is also a solid dot. To the right of <m>F</m> the graph goes back up, until ending at the point <m>G</m>.
                  </p>
                </description>
                <latex-image label="img_03_01_ex_06">
                  \begin{tikzpicture}
                  \begin{axis}[
                        ymin=-2.5,ymax=3.5,%
                        xmin=-.5,xmax=6.5,%
                  ]

                  \draw [firstcolor] (axis cs:.1,-2) parabola [bend at end] (axis cs:1,3) parabola (axis cs:2,1) parabola [bend at end] (axis cs:3,2) parabola (axis cs:4,1) parabola [bend at end] (axis cs:5,-1) parabola (axis cs:6,2.5);

                  \draw [firstcolor,fill=white] (axis cs: .1,-2) node [black,right] {\(A\)} circle (2.4pt)
                                          (axis cs:3,2) node [above,black] {\(D\)} circle (2.4pt);

                  \draw [firstcolor,fill=firstcolor] 	(axis cs: 1,3) node [above,black] {\(B\)} circle (2.4pt)
                                (axis cs:2,1) node [below,black] {\(C\)} circle (2.4pt)
                                (axis cs:4,1) node [right,black] {\(E\)} circle (2.4pt)
                                (axis cs:5,-1) node [below,black] {\(F\)} circle (2.4pt)
                                (axis cs:6,2.5) node [left,black] {\(G\)} circle (2.4pt);

                  \end{axis}
                  \end{tikzpicture}
                </latex-image>
              </image>
              <instruction>
                Enter the <em>absolute maxima</em> points here, using commas to separate them if there is more than one. If there are none, enter <c>NONE</c>.
              </instruction>
              <p>
                <var name="$absmax" width="10"/>
              </p>
              <instruction>
                Enter the <em>absolute minima</em> points here, using commas to separate them if there is more than one. If there are none, enter <c>NONE</c>.
              </instruction>
              <p>
                <var name="$absmin" width="10"/>
              </p>
              <instruction>
                Enter the <em>relative maxima</em> points here, using commas to separate them if there is more than one. If there are none, enter <c>NONE</c>.
              </instruction>
              <p>
                <var name="$relmax" width="10"/>
              </p>
              <instruction>
                Enter the <em>relative minima</em> points here, using commas to separate them if there is more than one. If there are none, enter <c>NONE</c>.
              </instruction>
              <p>
                <var name="$relmin" width="10"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-graph-extreme-values-identify-points-2">
          <webwork xml:id="webwork-ex-graph-extreme-values-identify-points-2">
            <pg-code>
              for my $A ('A'..'E') {Context()-&gt;strings-&gt;add($A=&gt;{})};
              $absmax = List("C");
              $absmin = List("A");
              $relmax = List("C");
              $relmin = List("A","E");
            </pg-code>
            <statement>
              <image>
                <shortdescription>A graph on the interval [1,5], with 5 marked points.</shortdescription>
                <description>
                  <p>
                    The image shows a graph on the intervl <m>[1,5]</m>, with marked points <m>A,B,C,D,E</m>.
                    All five points are part of the graph.
                    The point <m>A</m> is the left endpoint of the graph, and its <m>y</m> value is below any other point on the graph.
                    The graph goes up toward the point <m>B</m>.
                    At <m>B</m> there appears to be a point of non-differentiability,
                    but to the right of <m>B</m> the graph continues to go up toward the point <m>C</m>.
                  </p>

                  <p>
                    At <m>C</m> there is another cusp. To the right of <m>C</m>, the graph begins to go down, toward the point <m>D</m>.
                    There is a cusp at <m>D</m> as well, but to the right of <m>D</m>, the graph again goes down, until it reaches the endpoint at <m>E</m>.
                  </p>
                </description>
                <latex-image label="img_03_01_ex_07">
                  \begin{tikzpicture}
                  \begin{axis}[
                        ymin=-2.5,ymax=2.5,%
                        xmin=-.5,xmax=5.5,%
                  ]

                  \draw [firstcolor] (axis cs:1,-2)	parabola 	(axis cs:2,1)
                                                                  -- 	(axis cs:3,2)
                                                            parabola [bend at end] (axis cs:4,1)
                                                            -- (axis cs:5,-1);

                  \draw [firstcolor,fill=firstcolor] 	(axis cs: 1,-2) node [above,black] {\(A\)} circle (2.4pt)
                                (axis cs:2,1) node [left,black] {\(B\)} circle (2.4pt)
                                (axis cs:3,2) node [above,black] {\(C\)} circle (2.4pt)
                                (axis cs:4,1) node [right,black] {\(D\)} circle (2.4pt)
                                (axis cs:5,-1) node [below,black] {\(E\)} circle (2.4pt);

                  \end{axis}
                  \end{tikzpicture}
                </latex-image>
              </image>
              <instruction>
                Enter the absolute maxima points here, using commas to separate them if there is more than one. If there are none, enter <c>NONE</c>.
              </instruction>
              <p>
                <var name="$absmax" width="10"/>
              </p>
              <instruction>
                Enter the absolute minima points here, using commas to separate them if there is more than one. If there are none, enter <c>NONE</c>.
              </instruction>
              <p>
                <var name="$absmin" width="10"/>
              </p>
              <instruction>
                Enter the relative maxima points here, using commas to separate them if there is more than one. If there are none, enter <c>NONE</c>.
              </instruction>
              <p>
                <var name="$relmax" width="10"/>
              </p>
              <instruction>
                Enter the relative minima points here, using commas to separate them if there is more than one. If there are none, enter <c>NONE</c>.
              </instruction>
              <p>
                <var name="$relmin" width="10"/>
              </p>
            </statement>
          </webwork>
        </exercise>
      </exercisegroup>

      <exercisegroup cols="2" xml:id="exset-graph-extreme-values-evaluate-fprime">
        <introduction>
          <p>
            Evaluate <m>\fp(x)</m> at the points indicated in the graph.
          </p>
        </introduction>

        <exercise label="ex-graph-extreme-values-evaluate-fprime-1">
          <webwork xml:id="webwork-ex-graph-extreme-values-evaluate-fprime-1">
            <pg-code>
              $f=Formula("2/(x^2+1)");
              $zero=Real(0);
              $dne = String("DNE");
            </pg-code>
            <statement>
              <p>
                <m>f(x) = <var name="$f"/></m>
              </p>
              <image>
                <shortdescription>A bell-shaped curve with a relative maximum at the marked point (0,2).</shortdescription>
                <description>
                  <p>
                    The graph of <m>f(x)=\frac{2}{x^2+1}</m> is bell-shaped, with the peak of the bell at the point <m>(0,2)</m>.
                    The point <m>(0,2)</m> appears to be a relative maximum, and it is also the indicated point,
                    meaning that the goal of the question is to compute <m>f'(0)</m>.
                  </p>
                </description>
                <latex-image label="img_03_01_ex_08">
                  \begin{tikzpicture}
                  \begin{axis}[
                        ymin=-.5,ymax=2.5,%
                        xmin=-5.5,xmax=5.5,%
                  ]

                  \addplot [firstcurvestyle,samples=101] {2/((x^2+1))};

                  \draw [firstcolor,fill=firstcolor] 	(axis cs: 0,2) node [above right,black] {\((0,2)\)} circle (2.4pt);

                  \end{axis}
                  \end{tikzpicture}
                </latex-image>
              </image>
              <instruction>
                Enter <m>f^{\prime}(0)</m>. If the derivative does not exist at the indicated point, enter <c>DNE</c> for <q>does not exist</q>.
              </instruction>
              <p>
                <var name="$zero" width="10"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-graph-extreme-values-evaluate-fprime-2">
          <webwork xml:id="webwork-ex-graph-extreme-values-evaluate-fprime-2">
            <pg-code>
              $f=Formula("x^2*sqrt(6-x^2)");
              $zero=Real(0);
              $dne = String("DNE");
            </pg-code>
            <statement>
              <p>
                <m>f(x) = <var name="$f"/></m>
              </p>
              <image>
                <shortdescription>A graph consisting of a pair of arches, resembling a curved letter M. The points (0,0) and (2,4*sqrt(2)) are marked.</shortdescription>
                <description>
                  <p>
                    The graph of <m>f(x)=x^2\sqrt{6-x^2}</m> resembles a curved letter M,
                    with a pair of arches, one on either side of the <m>y</m> axis.
                  </p>

                  <p>
                    The marked points are <m>(0,0)</m>, which appears to be at a relative minimum between the two arches,
                    and <m>(2,4\sqrt{2})</m>, which appears to be at a relative maximum at the top of the right arch.
                  </p>
                </description>
                <latex-image label="img_03_01_ex_09">
                  \begin{tikzpicture}
                  \begin{axis}[
                        ymin=-.9,ymax=6.5,%
                        xmin=-3.5,xmax=3.5,%
                  ]

                  \addplot [firstcurvestyle,domain=-2.449489:2.449489,samples=104] {x^2*sqrt(6-x^2)};

                  \draw [firstcolor,fill=firstcolor] 	(axis cs: 0,0) node [below right,black] {\((0,0)\)} circle (2.4pt);
                  \draw [firstcolor,fill=firstcolor] 	(axis cs: 2,5.66) node [left,black] {\((2,4\sqrt{2})\)} circle (2.4pt);
                  \addplot[soliddot] coordinates {(2.449489,0) (-2.449489,0)};

                  \end{axis}
                  \end{tikzpicture}
                </latex-image>
              </image>
              <instruction>
                Enter <m>f^{\prime}(0)</m>. If the derivative does not exist at the indicated point, enter <c>DNE</c> for <q>does not exist</q>.
              </instruction>
              <p>
                <var name="$zero" width="10"/>
              </p>
              <instruction>
                Enter <m>f^{\prime}(2)</m>. If the derivative does not exist at the indicated point, enter <c>DNE</c> for <q>does not exist</q>.
              </instruction>
              <p>
                <var name="$zero" width="10"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-graph-extreme-values-evaluate-fprime-3">
          <webwork xml:id="webwork-ex-graph-extreme-values-evaluate-fprime-3">
            <pg-code>
              $f=Formula("sin(x)");
              $zero=Real(0);
              $dne = String("DNE");
            </pg-code>
            <statement>
              <p>
                <m>f(x) = <var name="$f"/></m>
              </p>
              <image>
                <shortdescription>Graph of a sine wave from 0 to 2 pi. The marked points are (pi/2, 1) and (3 pi/2,-1)</shortdescription>
                <description>
                  <p>
                    The graph of <m>f(x)=\sin(x)</m> from <m>0</m> to <m>\pi</m>.
                    There are two points marked on the graph: <m>(\pi/2,1)</m>, at which <m>f(x)</m> appears to have a relative maximum,
                    and <m>(3\pi/2,-1)</m>, at which <m>f(x)</m> appears to have a relative minimum.
                  </p>
                </description>
                <latex-image label="img_03_01_ex_10">
                  \begin{tikzpicture}
                  \begin{axis}[
                    ymin=-1.5,ymax=1.5,%
                    xmin=-.5,xmax=6.5,%
                  ]

                  \addplot [firstcurvestyle,domain=0:6.28] {sin(deg(x))};

                  \draw [firstcolor,fill=firstcolor] 	(axis cs: 1.57,1) node [above,black] {\((\pi/2,1)\)} circle (2.4pt);
                  \draw [firstcolor,fill=firstcolor] 	(axis cs: 4.71,-1) node [below,black] {\((3\pi/2,-1)\)} circle (2.4pt);
                  \addplot[soliddot] coordinates {(0,0) (6.28,0)};

                  \end{axis}
                  \end{tikzpicture}
                </latex-image>
              </image>
              <instruction>
                Enter <m>f^{\prime}(\pi/2)</m>. If the derivative does not exist at the indicated point, enter <c>DNE</c> for <q>does not exist</q>.
              </instruction>
              <p>
                <var name="$zero" width="10"/>
              </p>
              <instruction>
                Enter <m>f^{\prime}(3\pi/2)</m>. If the derivative does not exist at the indicated point, enter <c>DNE</c> for <q>does not exist</q>.
              </instruction>
              <p>
                <var name="$zero" width="10"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-graph-extreme-values-evaluate-fprime-4">
          <webwork xml:id="webwork-ex-graph-extreme-values-evaluate-fprime-4">
            <pg-code>
              $f=Formula("x^2*sqrt(4-x)");
              $zero=Real(0);
              $dne = String("DNE");
            </pg-code>
            <statement>
              <p>
                <m>f(x) = <var name="$f"/></m>
              </p>
              <image>
                <shortdescription>A curved graph with a relative minimum at (0,0), and a relative maximum when x=16/5</shortdescription>
                <description>
                  <p>
                    The graph of <m>f(x)=x^2\sqrt{4-x}</m> is plotted for <m>x</m> between <m>-2</m> and <m>4</m>.
                    There are three marked points: a relative minimum at <m>(0,0)</m>,
                    a relative maximum at <m>\left(\frac{16}{5},\frac{512}{25\sqrt{5}}\right)</m>,
                    and the point <m>(4,0)</m>, which is an endpoint, since the domain of <m>f(x)</m> is <m>(-\infty, 4]</m>.
                  </p>
                </description>
                <latex-image label="img_03_01_ex_11">
                  \begin{tikzpicture}
                  \begin{axis}[
                    ymin=-1.8,ymax=11,%
                    xmin=-2.5,xmax=4.5,%
                  ]

                  \addplot [firstcurvestyle,infiniteleft,domain=-2:4,samples=101] {x^2*sqrt(4-x)};

                  \draw [firstcolor,fill=firstcolor] 	(axis cs: 0,0) node [below right,black] {\((0,0)\)} circle (2.4pt);
                  \draw [firstcolor,fill=firstcolor] 	(axis cs: 3.2,9.16) node [above,black] {\(\left(\frac{16}{5},\frac{512}{25\sqrt{5}}\right)\)} circle (2.4pt);
                  \draw [firstcolor,fill=firstcolor] 	(axis cs: 4,0) node [above left,black] {\((4,0)\)} circle (2.4pt);

                  \end{axis}
                  \end{tikzpicture}
                </latex-image>
              </image>
              <instruction>
                Enter <m>f^{\prime}(0)</m>. If the derivative does not exist at the indicated point, enter <c>DNE</c> for <q>does not exist</q>.
              </instruction>
              <p>
                <var name="$zero" width="10"/>
              </p>
              <instruction>
                Enter <m>f^{\prime}(16/5)</m>. If the derivative does not exist at the indicated point, enter <c>DNE</c> for <q>does not exist</q>.
              </instruction>
              <p>
                <var name="$zero" width="10"/>
              </p>
              <instruction>
                Enter <m>f^{\prime}(4)</m>. If the derivative does not exist at the indicated point, enter <c>DNE</c> for <q>does not exist</q>.
              </instruction>
              <p>
                <var name="$dne" width="10"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-graph-extreme-values-evaluate-fprime-5">
          <webwork xml:id="webwork-ex-graph-extreme-values-evaluate-fprime-5">
            <pg-code>
              Context()-&gt;flags-&gt;set(reduceConstants=&gt;0);
              $f=Formula("1+(x-2)^(2/3)/x");
              $zero=Real(0);
              $dne = String("DNE");
            </pg-code>
            <statement>
              <p>
                <m>f(x) = <var name="$f"/></m>
              </p>
              <image>
                <shortdescription>A curve that descends steeply to a cusp at (2,1), and that is relatively flat for x greater than 1.</shortdescription>
                <description>
                  <p>
                    The graph of <m>f(x)=1+\frac{(x-2)^{2/3}}{x}</m> has a vertical asymptote at <m>x=0</m>.
                    It descends toward a cusp at <m>(2,1)</m>, which is a relative minimum, and one of the marked points.
                    For <m>x\gt 1</m> the graph rises slowly toward the point <m>\left(6,1+\frac{\sqrt[3]{2}}{3}\right)</m>, which is also marked.
                    The graph is quite flat near this point, and it is hard to tell whether or not it could be a relative maximum.
                  </p>
                </description>
                <latex-image label="img_03_01_ex_12">
                  \begin{tikzpicture}
                  \begin{axis}[
                    ymin=-.5,ymax=6.5,%
                    xmin=-1,xmax=11,%
                  ]

                  \addplot [firstcurvestyle,infinite,domain=.2:11,samples=101] {(((x-2)^2)^(1/3))/x+1};

                  \draw [firstcolor,fill=firstcolor] 	(axis cs: 2,1) node [below,black] {\((2,1)\)} circle (2.4pt);
                  \draw [firstcolor,fill=firstcolor] 	(axis cs: 6,1.42) node [above,black] {\(\left(6,1+\frac{\sqrt[3]{2}}{3}\right)\)} circle (2.4pt);

                  \end{axis}
                  \end{tikzpicture}

                </latex-image>
              </image>
              <instruction>
                Enter <m>f^{\prime}(2)</m>. If the derivative does not exist at the indicated point, enter <c>DNE</c> for <q>does not exist</q>.
              </instruction>
              <p>
                <var name="$dne" width="10"/>
              </p>
              <instruction>
                Enter <m>f^{\prime}(6)</m>. If the derivative does not exist at the indicated point, enter <c>DNE</c> for <q>does not exist</q>.
              </instruction>
              <p>
                <var name="$zero" width="10"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-graph-extreme-values-evaluate-fprime-6">
          <webwork xml:id="webwork-ex-graph-extreme-values-evaluate-fprime-6">
            <pg-code>
              Context()-&gt;flags-&gt;set(reduceConstants=&gt;0);
              parser::Root-&gt;Enable;
              $f=Formula("root(3,x^4-2x^2+1)");
              $zero=Real(0);
              $dne = String("DNE");
            </pg-code>
            <statement>
              <p>
                <m>f(x) = <var name="$f"/></m>
              </p>
              <image>
                <shortdescription>A graph in the shape of a curved letter W. There are two cusps, both relative minima, at marked points (-1,0) and (1,0).</shortdescription>
                <description>
                  <p>
                    The graph of <m>f(x)=\sqrt[3]{x^4-2x^2+1}</m> has two cusps, at the points <m>(-1,0)</m> and <m>(1,0)</m>,
                    which are the indicated points for this problem.
                  </p>
                </description>
                <latex-image label="img_03_01_ex_13">
                  \begin{tikzpicture}
                  \begin{axis}[
                  xtick={-2,-1,1,2},
                  ymin=-.5,ymax=3.5,%
                  xmin=-2.5,xmax=2.5,%
                  ]

                  \addplot [firstcurvestyle,infiniteleft,domain=-2:-1,samples=25] {(x^4-2*x^2+1)^(1/3)};
                  \addplot [firstcurvestyle,domain=-1:1,samples=50] {(x^4-2*x^2+1)^(1/3)};
                  \addplot [firstcurvestyle,infiniteright,domain=1:2,samples=25] {(x^4-2*x^2+1)^(1/3)};

                  \draw [firstcolor,fill=firstcolor] 	(axis cs: 1,0) node [above right,black] {\((1,0)\)} circle (2.4pt);
                  \draw [firstcolor,fill=firstcolor] 	(axis cs: -1,0) node [above left,black] {\((-1,0)\)} circle (2.4pt);

                  \end{axis}
                  \end{tikzpicture}

                </latex-image>
              </image>
              <instruction>
                Enter <m>f^{\prime}(-1)</m>. If the derivative does not exist at the indicated point, enter <c>DNE</c> for <q>does not exist</q>.
              </instruction>
              <p>
                <var name="$dne" width="10"/>
              </p>
              <instruction>
                Enter <m>f^{\prime}(1)</m>. If the derivative does not exist at the indicated point, enter <c>DNE</c> for <q>does not exist</q>.
              </instruction>
              <p>
                <var name="$dne" width="10"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-graph-extreme-values-evaluate-fprime-7">
          <webwork xml:id="webwork-ex-graph-extreme-values-evaluate-fprime-7">
            <pg-code>
              $zero=Real(0);
              $dne = String("DNE");
            </pg-code>
            <statement>
              <p>
                <m>f(x) = \begin{cases}x^2,\amp x\leq0\\x^5,\amp x\gt0\end{cases}</m>
              </p>
              <image>
                <shortdescription>The graph of a piecewise-defined function with a relative minimum at (0,0).</shortdescription>
                <description>
                  <p>
                    The piecewise-defined function for this problem is equal to <m>x^2</m> when <m>x</m> is negative,
                    and <m>x^5</m> when <m>x</m> is positive.
                  </p>

                  <p>
                    The indicated point is <m>(0,0)</m>, where there is a relative minimum.
                    Since the slope of the tangent line approaches <m>0</m> as <m>x\to 0</m> for both <m>x^2</m> and <m>x^5</m>,
                    it appears as though the graph will have a horizontal tangent line at the origin.
                  </p>
                </description>
                <latex-image label="img_03_01_ex_14">
                  \begin{tikzpicture}
                  \begin{axis}[
                    ymin=-.5,ymax=1.1,%
                    xmin=-1.1,xmax=1.1,%
                  ]

                  \addplot [firstcurvestyle,infiniteleft,domain=-1:0] {x^2};
                  \addplot [firstcurvestyle,infiniteright,domain=0:1] {x^5};

                  \draw [firstcolor,fill=firstcolor] 	(axis cs: 0,0) node [below right,black] {\((0,0)\)} circle (2.4pt);

                  \end{axis}
                  \end{tikzpicture}
                </latex-image>
              </image>
              <instruction>
                Enter <m>f^{\prime}(0)</m>. If the derivative does not exist at the indicated point, enter <c>DNE</c> for <q>does not exist</q>.
              </instruction>
              <p>
                <var name="$zero" width="10"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-graph-extreme-values-evaluate-fprime-8">
          <webwork xml:id="webwork-ex-graph-extreme-values-evaluate-fprime-8">
            <pg-code>
              $zero=Real(0);
              $dne = String("DNE");
            </pg-code>
            <statement>
              <p>
                <m>f(x) = \begin{cases}x^2,\amp x\leq0\\x,\amp x\gt0\end{cases}</m>
              </p>
              <image>
                <shortdescription>The graph of a piecewise-defined function with a relative minimum at the origin.</shortdescription>
                <description>
                  <p>
                    For this piecewise-defined function, there is a relative minimum at <m>(0,0)</m>, which is the indicated point.
                    For <m>x\gt 0</m>, <m>f(x)=x</m>, so the slope of the tangent line for positive values of <m>x</m> close to <m>0</m> is <m>1</m>.
                    For <m>x\lt 0</m>, <m>f(x)=x^2</m>, and the slope of the tangent line approaches <m>0</m> as <m>x\to 0^-</m>.
                    This suggests that <m>f'(0)</m> will be undefined.
                  </p>
                </description>
                <latex-image label="img_03_01_ex_15">
                  \begin{tikzpicture}
                  \begin{axis}[
                    ymin=-.5,ymax=1.1,%
                    xmin=-1.1,xmax=1.1,%
                  ]

                  \addplot [firstcurvestyle,infiniteleft,domain=-1:0] {x^2};
                  \addplot [firstcurvestyle,infiniteright,domain=0:1] {x};

                  \draw [firstcolor,fill=firstcolor] 	(axis cs: 0,0) node [below right,black] {\((0,0)\)} circle (2.4pt);

                  \end{axis}
                  \end{tikzpicture}
                </latex-image>
              </image>
              <instruction>
                Enter <m>f^{\prime}(0)</m>. If the derivative does not exist at the indicated point, enter <c>DNE</c> for <q>does not exist</q>.
              </instruction>
              <p>
                <var name="$dne" width="10"/>
              </p>
            </statement>
          </webwork>
        </exercise>
      </exercisegroup>

      <exercisegroup cols="2" xml:id="exset-graph-extreme-values-find">
        <introduction>
          <p>
            Find the extreme values of the function on the given interval.
          </p>
        </introduction>
        <exercise label="ex-graph-extreme-values-find-1">
          <webwork xml:id="webwork-ex-graph-extreme-values-find-1">
            <pg-code>
              ($b,$c) = (-9..-1,1..9)[NchooseK(18,2)];
              ($l,$h) = (1..4)[NchooseK(4,2)];
              if($envir{problemSeed}==1){$b=1;$c=4;$l=1;$h=2};
              $low = int(-$b/2) - $l;
              $high = int(-$b/2) + $h;
              $f = Formula("x^2+$b x+$c")-&gt;reduce;
              Context("Fraction-NoDecimals");
              $max = Fraction(max($f-&gt;eval(x=&gt;$low),$f-&gt;eval(x=&gt;$high),$f-&gt;eval(x=&gt;-$b/2)));
              $min = Fraction(min($f-&gt;eval(x=&gt;$low),$f-&gt;eval(x=&gt;$high),$f-&gt;eval(x=&gt;-$b/2)));
            </pg-code>
            <statement>
              <p>
                <m>f(x) = <var name="$f"/></m> on <m>[<var name="$low"/>,<var name="$high"/>]</m>
              </p>
              <instruction>
                Enter the maximimum value here, or enter <c>NONE</c> if there isn't one.
              </instruction>
              <p>
                <var name="$max" width="10"/>
              </p>
              <instruction>
                Enter the minimimum value here, or enter <c>NONE</c> if there isn't one.
              </instruction>
              <p>
                <var name="$min" width="10"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-graph-extreme-values-find-2">
          <webwork xml:id="webwork-ex-graph-extreme-values-find-2">
            <pg-code>
              Context("Fraction-NoDecimals");
              $r = random(-9,-1,1);
              $s = random(1,9,1);
              $d = non_zero_random(-9,9,1);
              $high = $s+random(1,2,1);
              if($envir{problemSeed}==1){$r=-2;$s=5;$d=3;$high=6};
              $low = Real(0);
              $b = Fraction(-3*($r+$s)/2);
              $c = 3*$r*$s;
              $f = Formula("x^3+$b x^2+$c x+$d")-&gt;reduce;
              $max = Fraction(max($f-&gt;eval(x=&gt;$low),$f-&gt;eval(x=&gt;$high),$f-&gt;eval(x=&gt;$s)));
              $min = Fraction(min($f-&gt;eval(x=&gt;$low),$f-&gt;eval(x=&gt;$high),$f-&gt;eval(x=&gt;$s)));
            </pg-code>
            <statement>
              <p>
                <m>f(x) = <var name="$f"/></m> on <m>[<var name="$low"/>,<var name="$high"/>]</m>
              </p>
              <instruction>
                Enter the maximimum value here, or enter <c>NONE</c> if there isn't one.
              </instruction>
              <p>
                <var name="$max" width="10"/>
              </p>
              <instruction>
                Enter the minimimum value here, or enter <c>NONE</c> if there isn't one.
              </instruction>
              <p>
                <var name="$min" width="10"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-graph-extreme-values-find-3">
          <webwork xml:id="webwork-ex-graph-extreme-values-find-3">
            <pg-code>
              Context("Fraction-NoDecimals");
              $c = random(2,4,1);
              $trig = list_random('sin','cos');
              ($lowd,$highd) = (3,4,6)[NchooseK(3,2)];
              if ($trig eq 'sin') {
                if (list_random(0,1)) {$low = Formula("pi/$lowd"); $high = Formula("(($highd-1)pi)/$highd")}
                else {$low = Formula("(($lowd+1)pi)/$lowd"); $high = Formula("((2*$highd-1)pi)/$highd")}
              } else {
                if (list_random(0,1)) {$low = Formula("-pi/$lowd"); $high = Formula("pi/$highd")}
                else {$low = Formula("(($lowd-1)pi)/$lowd"); $high = Formula("(($highd+1)pi)/$highd")}
              }
              if($envir{problemSeed}==1){$c=3;$trig='sin';$low=Formula("pi/4");$high=Formula("(2pi)/3")};
              $f = Formula("$c $trig(x)");
              $max = max($f-&gt;eval(x=&gt;$low-&gt;eval(x=&gt;0)),$f-&gt;eval(x=&gt;$high-&gt;eval(x=&gt;0)),$c * $f-&gt;eval(x=&gt;$low-&gt;eval(x=&gt;0)) / abs($f-&gt;eval(x=&gt;$low-&gt;eval(x=&gt;0))));
              $min = min($f-&gt;eval(x=&gt;$low-&gt;eval(x=&gt;0)),$f-&gt;eval(x=&gt;$high-&gt;eval(x=&gt;0)),$c * $f-&gt;eval(x=&gt;$low-&gt;eval(x=&gt;0)) / abs($f-&gt;eval(x=&gt;$low-&gt;eval(x=&gt;0))));
            </pg-code>
            <statement>
              <p>
                <m>f(x) = <var name="$f"/></m> on <m>\left[<var name="$low"/>,<var name="$high"/>\right]</m>
              </p>
              <instruction>
                Enter the maximimum value here, or enter <c>NONE</c> if there isn't one.
              </instruction>
              <p>
                <var name="$max" width="10"/>
              </p>
              <instruction>
                Enter the minimimum value here, or enter <c>NONE</c> if there isn't one.
              </instruction>
              <p>
                <var name="$min" width="10"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-graph-extreme-values-find-4">
          <webwork xml:id="webwork-ex-graph-extreme-values-find-4">
            <pg-code>
              Context("Fraction-NoDecimals");
              $n = list_random(2,4,6);
              $r = random(1,4,1);
              if($envir{problemSeed}==1){$n=2;$r=2;};
              $low = -$r;
              $high = $r;
              $f = Formula("x^$n sqrt($r^2-x^2)");
              $a = -sqrt($n*$r**2/($n+1));
              $b = sqrt($n*$r**2/($n+1));
              $max = max($f-&gt;eval(x=&gt;$low),$f-&gt;eval(x=&gt;$high),$f-&gt;eval(x=&gt;$a),$f-&gt;eval(x=&gt;$b),$f-&gt;eval(x=&gt;0));
              $min = min($f-&gt;eval(x=&gt;$low),$f-&gt;eval(x=&gt;$high),$f-&gt;eval(x=&gt;$a),$f-&gt;eval(x=&gt;$b),$f-&gt;eval(x=&gt;0));
            </pg-code>
            <statement>
              <p>
                <m>f(x) = <var name="$f"/></m> on <m>[<var name="$low"/>,<var name="$high"/>]</m>
              </p>
              <instruction>
                Enter the maximimum value here, or enter <c>NONE</c> if there isn't one.
              </instruction>
              <p>
                <var name="$max" width="10"/>
              </p>
              <instruction>
                Enter the minimimum value here, or enter <c>NONE</c> if there isn't one.
              </instruction>
              <p>
                <var name="$min" width="10"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-graph-extreme-values-find-5">
          <webwork xml:id="webwork-ex-graph-extreme-values-find-5">
            <pg-code>
              Context("Fraction-NoDecimals");
              $a = list_random(2,3,5,6,7);
              $low = random(1,int(sqrt($a)),1);
              $high = random(int(sqrt($a))+1,int(sqrt($a))+6);
              if($envir{problemSeed}==1){$a=3;$low=1;$high=5;};
              $f = Formula("x+$a/x");
              $max = Fraction(max($f-&gt;eval(x=&gt;$low),$f-&gt;eval(x=&gt;$high),$f-&gt;eval(x=&gt;sqrt($a))));
              $min = min($f-&gt;eval(x=&gt;$low),$f-&gt;eval(x=&gt;$high),$f-&gt;eval(x=&gt;sqrt($a)));
            </pg-code>
            <statement>
              <p>
                <m>f(x) = <var name="$f"/></m> on <m>[<var name="$low"/>,<var name="$high"/>]</m>
              </p>
              <instruction>
                Enter the maximimum value here, or enter <c>NONE</c> if there isn't one.
              </instruction>
              <p>
                <var name="$max" width="10"/>
              </p>
              <instruction>
                Enter the minimimum value here, or enter <c>NONE</c> if there isn't one.
              </instruction>
              <p>
                <var name="$min" width="10"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-graph-extreme-values-find-6">
          <webwork xml:id="webwork-ex-graph-extreme-values-find-6">
            <pg-code>
              Context("Fraction-NoDecimals");
              $n = random(2,4,2);
              $a = random(1,9,1);
              $low = random(-9,-1,1);
              $high = random(1,9,1);
              if($envir{problemSeed}==1){$n=2;$a=5;$low=-3;$high=5;};
              $f = Formula("x^$n/(x^$n+$a)");
              $max = Fraction(max($f-&gt;eval(x=&gt;$low),$f-&gt;eval(x=&gt;$high),$f-&gt;eval(x=&gt;0)));
              $min = Fraction(min($f-&gt;eval(x=&gt;$low),$f-&gt;eval(x=&gt;$high),$f-&gt;eval(x=&gt;0)));
            </pg-code>
            <statement>
              <p>
                <m>f(x) = <var name="$f"/></m> on <m>[<var name="$low"/>,<var name="$high"/>]</m>
              </p>
              <instruction>
                Enter the maximimum value here, or enter <c>NONE</c> if there isn't one.
              </instruction>
              <p>
                <var name="$max" width="10"/>
              </p>
              <instruction>
                Enter the minimimum value here, or enter <c>NONE</c> if there isn't one.
              </instruction>
              <p>
                <var name="$min" width="10"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-graph-extreme-values-find-7">
          <webwork xml:id="webwork-ex-graph-extreme-values-find-7">
            <pg-code>
              Context("Numeric");
              $trig='cos';
              $low = Formula("0");
              $high = Formula("pi");
              $f = Formula("e^x $trig(x)");
              $a = Formula("pi/4");
              $max = Compute("e^($a)/sqrt(2)");
              $min = Compute("-e^(pi)");
            </pg-code>
            <statement>
              <p>
                <m>f(x) = <var name="$f"/></m> on <m>[<var name="$low"/>,<var name="$high"/>]</m>
              </p>
              <instruction>
                Enter the maximimum value here, or enter <c>NONE</c> if there isn't one.
              </instruction>
              <p>
                <var name="$max" width="10"/>
              </p>
              <instruction>
                Enter the minimimum value here, or enter <c>NONE</c> if there isn't one.
              </instruction>
              <p>
                <var name="$min" width="10"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-graph-extreme-values-find-8">
          <webwork xml:id="webwork-ex-graph-extreme-values-find-8">
            <pg-code>
              Context("Numeric");
              $trig='sin';
              $low = Formula("0");
              $high = Formula("pi");
              $f = Formula("e^x $trig(x)");
              $a = Formula("3pi/4");
              $max = Compute("e^($a)/sqrt(2)");
              $min = Compute("0");
            </pg-code>
            <statement>
              <p>
                <m>f(x) = <var name="$f"/></m> on <m>[<var name="$low"/>,<var name="$high"/>]</m>
              </p>
              <instruction>
                Enter the maximimum value here, or enter <c>NONE</c> if there isn't one.
              </instruction>
              <p>
                <var name="$max" width="10"/>
              </p>
              <instruction>
                Enter the minimimum value here, or enter <c>NONE</c> if there isn't one.
              </instruction>
              <p>
                <var name="$min" width="10"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-graph-extreme-values-find-9">
          <webwork xml:id="webwork-ex-graph-extreme-values-find-9">
            <pg-code>
              Context("Numeric");
              Context()-&gt;flags-&gt;set(reduceConstants=&gt;0,reduceConstantFunctions=&gt;0);
              $n = random(1,4,1);
              $high = random(3,9,1);
              if($envir{problemSeed}==1){$n=1;$high=4;};
              $low = Compute("1");
              $a = exp(1/$n);
              $f = Formula("ln(x)/x^$n")-&gt;reduce;
              $max = Compute("1/($n e)");
              $min = Real(0);
            </pg-code>
            <statement>
              <p>
                <m>f(x) = <var name="$f"/></m> on <m>[<var name="$low"/>,<var name="$high"/>]</m>
              </p>
              <instruction>
                Enter the maximimum value here, or enter <c>NONE</c> if there isn't one.
              </instruction>
              <p>
                <var name="$max" width="10"/>
              </p>
              <instruction>
                Enter the minimimum value here, or enter <c>NONE</c> if there isn't one.
              </instruction>
              <p>
                <var name="$min" width="10"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-graph-extreme-values-find-10">
          <webwork xml:id="webwork-ex-graph-extreme-values-find-10">
            <pg-code>
              Context("Fraction-NoDecimals");
              $d = random(2,5,1);
              do {$n = random(1,2*$d-1,1)} until (gcd($n,$d) == 1);
              $m = random(int($n/$d)+1,int($n/$d)+5,1);
              $high = random(2,4,1);
              if($envir{problemSeed}==1){$d=3;$n=2;$m=1;$high=2;};
              $low = Compute("0");
              $md = $m*$d;
              $mdn = $md - $n;
              $f = Formula("x^($n/$d) - x^$m")-&gt;reduce;
              $max = max($f-&gt;substitute(x=&gt;$low),$f-&gt;substitute(x=&gt;$high),Formula("($mdn/$md) ($n/$md)^($n/$mdn)"));
              $min = min($f-&gt;substitute(x=&gt;$low),$f-&gt;substitute(x=&gt;$high),Formula("($mdn/$md) ($n/$md)^($n/$mdn)"));
            </pg-code>
            <statement>
              <p>
                <m>f(x) = <var name="$f"/></m> on <m>[<var name="$low"/>,<var name="$high"/>]</m>
              </p>
              <instruction>
                Enter the maximimum value here, or enter <c>NONE</c> if there isn't one.
              </instruction>
              <p>
                <var name="$max" width="10"/>
              </p>
              <instruction>
                Enter the minimimum value here, or enter <c>NONE</c> if there isn't one.
              </instruction>
              <p>
                <var name="$min" width="10"/>
              </p>
            </statement>
          </webwork>
        </exercise>
      </exercisegroup>
    </subexercises>

    <!-- <subexercises>
      <title>Review</title>
      <exercise label="ex-graph-extreme-values-review-1">
        <webwork xml:id="webwork-ex-graph-extreme-values-review-1">
          <pg-code>
            Context()->variables->add(y=>'Real');
            ($m,$n) = (1..4)[NchooseK(4,2)];
            if($envir{problemSeed}==1){$m=1;$n=2};
            $left = Formula("x^2y^$m-y^$n x")->reduce;
            @y=(random(0.1,5,0.1),random(0.1,5,0.1),random(0.1,5,0.1),random(0.1,5,0.1),random(0.1,5,0.1));
            @x=map{($_**$n + list_random(-1,1)*sqrt($_**(2*$n) + 4*$_**$m))/(2*$_**$m)}(@y);
            @xy=map{[$x[$_],$y[$_]]}(0..4);
            $dydx = Formula("(y^$n-2xy^$m)/($m x^2 y^($m-1) - $n x y^($n-1))")->reduce;
            $dydx->{test_points}=~~@xy;
          </pg-code>
          <statement>
            <p>
              Find <m>\lz{y}{x}</m>, where <m><var name="$left"/>=1</m>.
            </p>
            <p>
              <var name="$dydx" width="80"/>
            </p>
          </statement>
        </webwork>
      </exercise>

      <exercise label="ex-graph-extreme-values-review-2">
        <webwork xml:id="webwork-ex-graph-extreme-values-review-2">
          <pg-code>
            Context("Fraction");
            Context()->variables->add(y=>'Real');
            parser::Assignment->Allow;
            do {
              $n = random(2,4,1);
              ($x0,$y0) = (-3..-1,1..3)[NchooseK(6,2)];
              $pm=list_random('+','-');
            } until ($x0 != $n*$y0**($n-1) and $x0 != -$n*$y0**($n-1));
            if($envir{problemSeed}==1){$n=2;$x0=1;$y0=2;$pm='+'};
            $left = Formula("x^$n+y^$n $pm xy");
            $c = $left->eval(x=>$x0,y=>$y0);
            if ($pm eq '+') {$m = Fraction(-$n*$x0**($n-1)-$y0,$n*$y0**($n-1)+$x0)}
            else {$m = Fraction(-$n*$x0**($n-1)+$y0,$n*$y0**($n-1)-$x0)};
            $t=Formula("y=$m(x-$x0)+$y0")->reduce;
          </pg-code>
          <statement>
            <p>
              Find the equation of the line tangent to the graph of
              <m><var name="$left"/>=<var name="$c"/></m> at the point <m>(<var name="$x0"/>,<var name="$y0"/>)</m>.
            </p>
            <p>
              <var name="$t" width="80"/>
            </p>
          </statement>
        </webwork>
      </exercise>

      <exercise label="ex-graph-extreme-values-review-3">
        <webwork xml:id="webwork-ex-graph-extreme-values-review-3">
          <pg-code>
            $n = random(3,4,1);
            $b = non_zero_random(-2,2,1);
            if($envir{problemSeed}==1){$n=3;$b=1;};
            $f = Formula("x^$n+$b x")->reduce;
            $l = $f->D('x');
          </pg-code>
          <statement>
            <p>
              Let <m>f(x) = <var name="$f"/></m>. Find <m>\lim\limits_{s\to 0} \frac{f(x+s)-f(x)}{s}</m>.
            </p>
            <p>
              <var name="$l" width="80"/>
            </p>
          </statement>
        </webwork>
      </exercise>
    </subexercises> -->
  </exercises>
</section>
