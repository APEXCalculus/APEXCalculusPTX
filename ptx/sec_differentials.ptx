<?xml version="1.0" encoding="UTF-8"?>
<section xml:id="sec_differentials">
  <title>Differentials</title>

  <figure xml:id="vid_deriv_apps_diff_intro" component="video">
    <caption>Video introduction to <xref ref="sec_differentials"/></caption>
    <video youtube="YmODT2PolKY" label="vid_deriv_apps_diff_intro"/>
  </figure>

  <p>
    In <xref ref="sec_interp_deriv">Section</xref>
    we explored the meaning and use of the derivative.
    This section starts by revisiting some of those ideas.
  </p>

  <p>
    Recall that the derivative of a function <m>f</m> can be used to find the slopes of lines tangent to the graph of <m>f</m>.
    At <m>x=c</m>,
    the tangent line to the graph of <m>f</m> has equation
    <me>
      y = \fp(c)(x-c)+f(c)
    </me>.
  </p>

  <p>
    The tangent line can be used to find good approximations of <m>f(x)</m> for values of <m>x</m> near <m>c</m>.
  </p>

  <p>
    For instance, we can approximate
    <m>\sin(1.1)</m> using the tangent line to the graph of
    <m>f(x)=\sin(x)</m> at <m>x=\pi/3 \approx 1.05</m>.
    Recall that <m>\sin(\pi/3) = \sqrt{3}/2 \approx 0.866</m>,
    and <m>\fp(\pi/3)=\cos(\pi/3) = 1/2</m>.
    Thus the tangent line to <m>f(x) = \sin(x)</m> at <m>x=\pi/3</m> is:
    <me>
      \ell(x) = \frac12(x-\pi/3)+0.866
    </me>.
  </p>

  <figure xml:id="fig_diffal1">
    <caption>Graphing <m>f(x) = \sin(x)</m> and its tangent line at <m>x=\pi/3</m> in order to estimate <m>\sin(1.1)</m></caption>
    <sidebyside widths="47% 47%" margins="0%">
      <figure xml:id="fig_diffal1a">
        <caption/>
        <image xml:id="img_diffal1a">
          <description></description>
          <latex-image>

          \begin{tikzpicture}
          \begin{axis}[
          xtick=\empty,
          extra x ticks={1.047},
          extra x tick labels={$\frac{\pi}{3}$},
          ytick = {0,0.5,1},
          extra y ticks={0.866},
          extra y tick labels={$\frac{\sqrt{3}}{2}$},
          ymin=-.1,ymax=1.1,
          xmin=-.1,xmax=2.36,
          ]
          \addplot+[domain=0:2.1, rightarrow] {sin(deg(x))};
          \addplot [tangentline, domain=-.1:1.5] {.5*(x-1.047197551)+0.866025};
          \addplot [soliddot] coordinates {(1.047,0.866)} node [below right] {\small $(\pi/3,\sqrt{3}/3)$};
          \draw (axis cs:1.04,.86) rectangle (axis cs:1.122,.9);
          \end{axis}
          \end{tikzpicture}

          </latex-image>
        </image>
      </figure>

      <figure xml:id="fig_diffal1b">
        <caption/>
        <image xml:id="img_diffal1b">
          <description></description>
          <latex-image>

          \begin{tikzpicture}
          \begin{axis}[
          xtick=\empty,%
          extra x ticks={1.047,1.1},
          extra x tick labels={$\frac{\pi}{3}$,$1.1$},
          extra y ticks={0.866},
          extra y tick labels={$\frac{\sqrt{3}}{2}$},
          ytick={0.86,0.87,0.88,0.89},
          %extra y ticks={0.866},
          %extra y tick labels={$\frac{\sqrt{3}}{2}$},
          xdiscontinuity,
          ydiscontinuity,
          ymin=.86,ymax=.9,%
          xmin=1.04,xmax=1.122,
          ]
          \addplot+[domain=1.04:1.12] {sin(deg(x))};
          \addplot [tangentline,domain=1.04:1.115] {.5*(x-1.0471)+0.866025};
          \addplot [soliddot] coordinates{(1.047,0.866)} node [below right] {\small $\left(\pi/3,\sqrt{3}/3\right)$};
          \addplot [soliddot,guideline] coordinates {(1.1,.8925)} node [pin={180:{$\ell(1.1)\approx \sin(1.1)$}}] {};
          \addplot [soliddot] coordinates {(1.1,.8912)} node [pin={0:{$\sin(1.1)$}}] {};

          \end{axis}
          \end{tikzpicture}

          </latex-image>
        </image>
      </figure>
    </sidebyside>
  </figure>

  <p>
    In <xref ref="fig_diffal1a"/>,
    we see a graph of <m>f(x) = \sin(x)</m> graphed along with its tangent line at <m>x=\pi/3</m>.
    The small rectangle shows the region that is displayed in <xref ref="fig_diffal1b"/>.
    In this figure, we see how we are approximating
    <m>\sin(1.1)</m> with the tangent line, evaluated at <m>1.1</m>.
    Together, the two figures show how close these values are.
  </p>

  <p>
    Using this line to approximate <m>\sin(1.1)</m>, we have:
    <md>
      <mrow>\ell(1.1) \amp = \frac{1}{2}(1.1-\pi/3)+0.866</mrow>
      <mrow>\amp = \frac12(0.053)+0.866 = 0.8925</mrow>
    </md>.
  </p>

  <p>
    (We leave it to the reader to see how good of an approximation this is.)
  </p>

  <figure xml:id="vid_deriv_apps_diff_ex_1" component="video">
    <caption>Approximating the value of <m>\sin(1.1)</m></caption>
    <video youtube="mQRelmurD-w" label="vid_deriv_apps_diff_ex_1"/>
  </figure>


  <p>
    We now generalize this concept.
    Given <m>f(x)</m> and an <m>x</m>-value <m>c</m>,
    the tangent line is <m>y=\ell(x)</m>, where <m>\ell(x) = \fp(c)(x-c)+f(c)</m>.
    Clearly, <m>f(c) = \ell(c)</m>.
    Let <m>\dx</m> be a small number,
    representing a small change in the <m>x</m>-value.
    We assert that:
    <me>
      f(c+\dx) \approx \ell(c+\dx)
    </me>,
    since the tangent line to a function approximates well the values of that function near <m>x=c</m>.
    This tangent line approximation is used frequently enough in applications that we give it a name.
  </p>

  <definition xml:id="def-linearization">
    <statement>
      <p>
        The function <m>\ell(x)</m> is often referred to as the <term>linearization</term>,
        or <term>linear approximation</term> of <m>f</m> at <m>c</m>.
        It is the linear function that best approximates the value of <m>f(x)</m> when <m>x</m> is close to <m>c</m>.
        <idx><h>linearization</h></idx>
        <idx><h>approximation</h><h>tangent line</h></idx>
        <idx><h>approximation</h><h>linear</h></idx>
      </p>
    </statement>
  </definition>

  <p>
    As the <m>x</m>-value changes from <m>c</m> to <m>c+\dx</m>,
    the <m>y</m>-value of <m>f</m> changes from <m>f(c)</m> to <m>f(c+\dx)</m>.
    We call this change of <m>y</m>-value <m>\dy</m>.
    That is:
    <me>
      \dy = f(c+\dx)-f(c)
    </me>.
  </p>

  <p>
    Replacing <m>f(c+\dx)</m> with its tangent line approximation, we have
    <mdn>
      <mrow number="no">\dy \amp \approx \ell(c+\dx) - f(c)</mrow>
      <mrow number="no">\amp = \fp(c)\big((c+\dx)-c\big)+f(c) - f(c)</mrow>
      <mrow xml:id="eq_differential">\amp =\fp(c)\dx</mrow>
    </mdn>.
  </p>

  <p>
    This final equation is important;
    it becomes the basis of <xref ref="def_differential"/> and <xref ref="idea_differential"/>.
    In short, it says that when the <m>x</m>-value changes from <m>c</m> to <m>c+\Delta x</m>,
    the <m>y</m> value of a function <m>f</m> changes by about <m>\fp(c)\Delta x</m>.
  </p>

  <p>
    We introduce two new variables,
    <m>dx</m> and <m>dy</m> in the context of a formal definition.
  </p>

  <definition xml:id="def_differential">
    <title>Differentials of <m>x</m> and <m>y</m></title>
    <statement>
      <p>
        Let <m>y=f(x)</m> be differentiable.
        The <term>differential</term> of <m>x</m>,
        denoted <m>dx</m>, is any nonzero real number
        (usually taken to be a small number).

        <idx><h>differential</h></idx>

        <idx><h>derivative</h><h>differential</h></idx>

        The <term>differential</term> of <m>y</m>, denoted <m>dy</m>, is
        <me>
          dy = \fp(x)dx
        </me>.
      </p>
    </statement>
  </definition>

  <figure xml:id="vid_deriv_apps_diff_defn" component="video">
    <caption>Video presentation of <xref ref="def_differential"/></caption>
    <video youtube="y9lTgdHD8wI" label="vid_deriv_apps_diff_defn"/>
  </figure>


  <p>
    We can solve for <m>\fp(x)</m> in the above equation:
    <m>\fp(x) = dy/dx</m>.
    This states that the derivative of <m>f</m> with respect to <m>x</m> is the differential of <m>y</m> divided by the differential of <m>x</m>;
    this is <em>not</em> the alternate notation for the derivative,
    <m>\lz{y}{x}</m>.
    This latter notation was chosen because of the fraction-like qualities of the derivative,
    but again,
    it is one symbol and not a fraction.
  </p>

  <p>
    It is helpful to organize our new concepts and notations in one place.
  </p>

  <aside>
    <title>Differentials and linearization</title>
    <p>
      The relationship between the differential and the linearization given in
      <xref ref="def-linearization"/> is as follows:
      <me>
        \ell(x) = f(c)+dy
      </me>,
      if we take <m>dy</m> to be evaluated at <m>x=c</m>.
    </p>

    <p>
      It is often useful to think of <m>dy</m> is the <em>linear change</em> in <m>f</m>,
      while <m>\dy</m> represents the true change in <m>f</m>.
    </p>
  </aside>

  <insight xml:id="idea_differential">
    <title>Differential Notation</title>
    <p>
      Let <m>y = f(x)</m> be a differentiable function.

      <idx><h>differential</h><h>notation</h></idx>

    </p>

    <p>
      <ol>
        <li>
          <p>
            Let <m>\dx</m> represent a small,
            nonzero change in <m>x</m> value.
          </p>
        </li>

        <li>
          <p>
            Let <m>dx</m> represent a small,
            nonzero change in <m>x</m> value (<ie/>, <m>\dx = dx</m>).
          </p>
        </li>

        <li>
          <p>
            Let <m>\dy</m> be the change in <m>y</m> value as <m>x</m> changes by <m>\dx</m>; hence
            <me>
              \dy = f(x+\dx)-f(x)
            </me>.
          </p>
        </li>

        <li>
          <p>
            Let <m>dy = \fp(x)dx</m> which,
            by <xref ref="eq_differential"/>,
            is an <em>approximation</em> of the change in <m>y</m>-value as <m>x</m> changes by <m>\dx</m>;
            <m>dy \approx \dy</m>.
          </p>
        </li>
      </ol>
    </p>
  </insight>

  <p xml:id="vidint_deriv_apps_diff_dx_eq_delta_x" component="video">
    When students first encounter differentials,
    they are often left wondering why <m>dy</m> and <m>\Delta y</m> are different,
    while <m>dx</m> and <m>\Delta x</m> are the same.
    The video in <xref ref="vid_deriv_apps_diff_dx_eq_delta_x"/> attempts to offer an explanation.
  </p>

  <figure xml:id="vid_deriv_apps_diff_dx_eq_delta_x" component="video">
    <caption>Why is it that <m>dx = \Delta x</m>?</caption>
    <video youtube="XxpcZw702nA" label="vid_deriv_apps_diff_dx_eq_delta_x"/>
  </figure>

  <p>
    What is the value of differentials?
    Like many mathematical concepts,
    differentials provide both practical and theoretical benefits.
    We explore both here.
  </p>

  <example xml:id="ex_diffal1">
    <title>Finding and using differentials</title>
    <statement>
      <p>
        Consider <m>f(x) = x^2</m>.
        Knowing <m>f(3) = 9</m>, approximate <m>f(3.1)</m>.
      </p>
    </statement>
    <solution component="video">
      <title>Video solution</title>
      <video width="98%" youtube="KCDezzvfDKA" xml:id="vid_deriv_apps_diff_ex_2" label="vid_deriv_apps_diff_ex_2" component="video"/>
    </solution>
    <solution>

      <p>
        The <m>x</m>-value is changing from <m>x=3</m> to <m>x=3.1</m>;
        therefore, we see that <m>dx=0.1</m>.
        If we know how much the <m>y</m>-value changes from <m>f(3)</m> to <m>f(3.1)</m> (<ie/>, if we know <m>\dy</m>),
        we will know exactly what <m>f(3.1)</m> is (since we already know <m>f(3)</m>).
        We can approximate <m>\dy</m> with <m>dy</m>.
        <md>
          <mrow>\dy \amp \approx dy</mrow>
          <mrow>\amp = \fp(3)dx</mrow>
          <mrow>\amp = 2\cdot 3\cdot 0.1 = 0.6</mrow>
        </md>.
      </p>

      <p>
        We expect the <m>y</m>-value to change by about <m>0.6</m>,
        so we approximate <m>f(3.1) \approx 9.6</m>.
      </p>

      <p>
        We leave it to the reader to verify this,
        but the preceding discussion links the differential to the tangent line of <m>f(x)</m> at <m>x=3</m>.
        One can verify that the tangent line,
        evaluated at <m>x=3.1</m>, also gives <m>y=9.6</m>.
      </p>
    </solution>
  </example>

  <p>
    Of course, it is easy to compute the actual answer (by hand or with a calculator):
    <m>3.1^2 = 9.61</m>. (Before we get too cynical and say
    <q>Then why bother?</q>,
    note our approximation is <em>really</em> good!)
  </p>

  <p>
    So why bother?
  </p>

  <p>
    In <q>most</q> real life situations,
    we do not know the function that describes a particular behavior.
    Instead, we can only take measurements of how things change <mdash/> measurements of the derivative.
  </p>

  <p>
    Imagine water flowing down a winding channel.
    It is easy to measure the speed and direction (<ie/>, the
    <em>velocity</em>) of water at any location.
    It is very hard to create a function that describes the overall flow,
    hence it is hard to predict where a floating object placed at the beginning of the channel will end up.
    However, we can <em>approximate</em>
    the path of an object using differentials.
    Over small intervals,
    the path taken by a floating object is essentially linear.
    Differentials allow us to approximate the true path by piecing together lots of short,
    linear paths.
    This technique is called Euler's Method,
    studied in introductory Differential Equations courses.
  </p>
  <aside>
    <title>PID controllers</title>
    <p>
      Another place differentials are used is in a PID controller,
      which stands for <q>Proportional Integral Derivative</q>.
      A PID controller uses concepts of both derivative and integral calculus to very accurately control a process
      (such as maintaining a stable temperature on an espresso machine).
    </p>
  </aside>
  <p>
    We use differentials once more to approximate the value of a function.
    Even though calculators are very accessible,
    it is neat to see how these techniques can sometimes be used to easily compute something that looks rather hard.
  </p>

  <example xml:id="ex_diffal2">
    <title>Using differentials to approximate a function value</title>
    <statement>
      <p>
        Approximate <m>\sqrt{4.5}</m>.
      </p>
    </statement>
    <solution component="video">
      <title>Video solution</title>
      <video width="98%" youtube="nFaq1O_wWso" xml:id="vid_deriv_apps_diff_ex_3" label="vid_deriv_apps_diff_ex_3" component="video"/>
    </solution>
    <solution>

      <p>
        We expect <m>\sqrt{4.5} \approx 2</m>, yet we can do better.
        Let <m>f(x) = \sqrt{x}</m>, and let <m>c=4</m>.
        Thus <m>f(4) = 2</m>.
        We can compute <m>\fp(x) = 1/(2\sqrt{x})</m>, so <m>\fp(4) = 1/4</m>.
      </p>

      <p>
        We approximate the difference between <m>f(4.5)</m> and <m>f(4)</m> using differentials,
        with <m>dx = 0.5</m>:
        <md>
          <mrow>f(4.5)-f(4) \amp = \dy \approx dy</mrow>
          <mrow>\amp = \fp(4)\cdot dx</mrow>
          <mrow>\amp = 1/4 \cdot 1/2</mrow>
          <mrow>\amp = 1/8</mrow>
          <mrow>\amp = 0.125</mrow>
        </md>.
      </p>

      <p>
        The approximate change in <m>f</m> from <m>x=4</m> to <m>x=4.5</m> is <m>0.125</m>,
        so we approximate <m>\sqrt{4.5} \approx 2.125</m>.
      </p>
    </solution>
  </example>

  <p>
    Differentials are important when we discuss <em>integration</em>.
    When we study that topic, we will use notation such as
    <me>
      \int f(x)\,dx
    </me>
    quite often.
    While we don't discuss here what all of that notation means,
    note the existence of the differential <m>dx</m>.
    Proper handling of <em>integrals</em>
    comes with proper handling of differentials.
  </p>

  <p>
    In light of that, we practice finding differentials in general.
  </p>

  <example xml:id="ex_diffal3">
    <title>Finding differentials</title>
    <statement>
      <p>
        In each of the following, find the differential <m>dy</m>.
      </p>

      <p>
        <ol cols="3">
          <li><p><m>y = \sin(x)</m></p></li>

          <li><p><m>y = e^x\left(x^2+2\right)</m></p></li>

          <li><p><m>y = \sqrt{x^2+3x-1}</m></p></li>
        </ol>
      </p>
    </statement>
    <solution>
      <p>
        <ol>
          <li>
            <p>
              <m>y = \sin(x)</m>: As <m>f(x) = \sin(x)</m>, <m>\fp(x) = \cos(x)</m>.
              Thus
              <me>
                dy = \cos(x)dx
              </me>.
            </p>
          </li>

          <li>
            <p>
              <m>y = e^x\left(x^2+2\right)</m>: Let <m>f(x) = e^x\left(x^2+2\right)</m>.
              We need <m>\fp(x)</m>,
              requiring the <xref ref="thm_ProductRule"/>.
            </p>

            <p>
              We have <m>\fp(x) = e^x\left(x^2+2\right) + 2xe^x</m>, so
              <me>
                dy = \left(e^x\left(x^2+2\right) + 2xe^x\right)dx
              </me>.
            </p>
          </li>

          <li>
            <p>
              <m>y = \sqrt{x^2+3x-1}</m>: Let <m>f(x) = \sqrt{x^2+3x-1}</m>;
              we need <m>\fp(x)</m>,
              requiring the <xref ref="thm_chain_rule"/>.
            </p>

            <p>
              We have <m>\fp(x) = \frac{1}{2}\left(x^2+3x-1\right)^{-\frac{1}{2}}(2x+3) = \frac{2x+3}{2\sqrt{x^2+3x-1}}</m>.
              Thus
              <me>
                dy = \frac{(2x+3)dx}{2\sqrt{x^2+3x-1}}
              </me>.
            </p>
          </li>
        </ol>
      </p>
    </solution>
  </example>

  <p>
    Finding the differential <m>dy</m> of <m>y=f(x)</m> is really no harder than finding the derivative of <m>f</m>;
    we just <em>multiply</em> <m>\fp(x)</m> by <m>dx</m>.
    It is important to remember that we are not simply adding the symbol
    <q><m>dx</m></q> at the end.
  </p>

  <p>
    We have seen a practical use of differentials as they offer a good method of making certain approximations.
    Another use is <em>error propagation.</em>
    Suppose a length is measured to be <m>x</m>,
    although the actual value is <m>x+\dx</m>
    (where <m>\dx</m> is the error, which we hope is small).
    This measurement of <m>x</m> may be used to compute some other value;
    we can think of this latter value as <m>f(x)</m> for some function <m>f</m>.
    As the true length is <m>x+\dx</m>,
    one really should have computed <m>f(x+\dx)</m>.
    The difference between <m>f(x)</m> and
    <m>f(x+\dx)</m> is the propagated error.
  </p>

  <p>
    How close are <m>f(x)</m> and <m>f(x+\dx)</m>?
    This is a difference in <q>y</q> values:
    <me>
      f(x+\dx)-f(x) = \dy \approx dy
    </me>.
  </p>

  <p>
    We can approximate the propagated error using differentials.
  </p>

  <example xml:id="ex_diffal4">
    <title>Using differentials to approximate propagated error</title>
    <statement>
      <p>
        A steel ball bearing is to be manufactured with a diameter of
        <quantity>
          <mag>2</mag><unit base="meter" prefix="centi"/>
        </quantity>.
        The manufacturing process has a tolerance of <m>\pm 0.1</m><quantity>
          <unit base="meter" prefix="milli"/>
        </quantity>
        in the diameter.
        Given that the density of steel is about
        <quantity>
          <mag>7.85</mag><unit base="gram"/><per base="meter" prefix="centi" exp="3"/>
        </quantity>, estimate the propagated error in the mass of the ball bearing.
      </p>
    </statement>
    <solution component="video">
      <title>Video solution</title>
      <video width="98%" youtube="0_tSaBZZR1s" xml:id="vid_deriv_apps_diff_prop_error" label="vid_deriv_apps_diff_prop_error" component="video"/>
    </solution>
    <solution>

<!--ToDo: apex-mbx used math mode for the equation below, with \text around each term. Is this better?-->
      <p>
        The mass of a ball bearing is found using the equation
        <q>mass = volume <times/> density.</q>
        In this situation the mass function is a product of the radius of the ball bearing,
        hence it is <m>m = 7.85\frac43\pi r^3</m>.
        The differential of the mass is
        <me>
          dm = 31.4\pi r^2 dr
        </me>.
      </p>

      <p>
        The radius is to be
        <quantity>
          <mag>1</mag><unit base="meter" prefix="centi"/>
        </quantity>; the manufacturing tolerance in the radius is <m>\pm 0.05</m><quantity>
          <unit base="meter" prefix="milli"/>
        </quantity>, or <m>\pm 0.005</m><quantity>
          <unit base="meter" prefix="centi"/>
        </quantity>.
        The propagated error is approximately:
        <md>
          <mrow>\Delta m \amp  \approx dm</mrow>
          <mrow>\amp = 31.4\pi (1)^2 (\pm 0.005)</mrow>
          <mrow>\amp = \pm 0.493\text{g}</mrow>
        </md>
      </p>

      <p>
        Is this error significant?
        It certainly depends on the application,
        but we can get an idea by computing the
        <em>relative error</em>.
        The ratio between amount of error to the total mass is
        <md>
          <mrow>\frac{dm}{m} \amp = \pm \frac{0.493}{7.85\frac43\pi}</mrow>
          <mrow>\amp =\pm \frac{0.493}{32.88}</mrow>
          <mrow>\amp =\pm 0.015</mrow>
        </md>,
        or <m>\pm 1.5\%</m>.
      </p>

      <p>
        We leave it to the reader to confirm this,
        but if the diameter of the ball was supposed to be
        <quantity>
          <mag>10</mag><unit base="meter" prefix="centi"/>
        </quantity>, the same manufacturing tolerance would give a propagated error in mass of <m>\pm12.33</m><quantity>
          <unit base="gram"/>
        </quantity>, which corresponds to a
        <em>percent error</em> of <m>\pm0.188\%</m>.
        While the amount of error is much greater (<m>12.33 \gt 0.493</m>),
        the percent error is much lower.
      </p>
    </solution>
  </example>

  <exercises>
    <subexercises xml:id="TaC-differentials">
      <title>Terms and Concepts</title>
      <exercise label="TaC-differentials-1">
        <webwork xml:id="TaC-differentials-1">
          <pg-code>
            $true=PopUp(['?','True','False'],1);
            $false=PopUp(['?','True','False'],2);
          </pg-code>
          <statement>
            <p>
              <var name="$true" form="popup"/>
              Given a differentiable function <m>y=f(x)</m>,
              we are generally free to choose a value for <m>dx</m>,
              which then determines the value of <m>dy</m>.
            </p>
          </statement>
        </webwork>
      </exercise>

      <exercise label="TaC-differentials-2">
        <webwork xml:id="TaC-differentials-2">
          <pg-code>
            $true=PopUp(['?','True','False'],1);
            $false=PopUp(['?','True','False'],2);
          </pg-code>
          <statement>
            <p>
              <var name="$true" form="popup"/>
              The symbols <q><m>dx</m></q> and <q><m>\dx</m></q>
              represent the same concept.
            </p>
          </statement>
        </webwork>
      </exercise>

      <exercise label="TaC-differentials-3">
        <webwork xml:id="TaC-differentials-3">
          <pg-code>
            $true=PopUp(['?','True','False'],1);
            $false=PopUp(['?','True','False'],2);
          </pg-code>
          <statement>
            <p>
              <var name="$false" form="popup"/>
              The symbols <q><m>dy</m></q> and <q><m>\dy</m></q>
              represent the same concept.
            </p>
          </statement>
        </webwork>
      </exercise>

      <exercise label="TaC-differentials-4">
        <webwork xml:id="TaC-differentials-4">
          <pg-code>
            $true=PopUp(['?','True','False'],1);
            $false=PopUp(['?','True','False'],2);
          </pg-code>
          <statement>
            <p>
              <var name="$true" form="popup"/>
              Differentials are important in the study of integration.
            </p>
          </statement>
        </webwork>
      </exercise>

      <exercise label="TaC-differentials-5">
        <webwork xml:id="TaC-differentials-5">
          <statement>
            <p>
              How are differentials and tangent lines related?
            </p>
            <p>
              <var form="essay"/>
            </p>
          </statement>
        </webwork>
      </exercise>

      <exercise label="TaC-differentials-6">
        <webwork xml:id="TaC-differentials-6">
          <pg-code>
            $true=PopUp(['?','True','False'],1);
            $false=PopUp(['?','True','False'],2);
          </pg-code>
          <statement>
            <p>
              <var name="$true" form="popup"/>
              In real life,
              differentials are used to approximate function values
              when the function itself is not known.
            </p>
          </statement>
        </webwork>
      </exercise>
    </subexercises>

    <subexercises>
      <title>Problems</title>
      <!-- Group 2: Approximate with differentials -->
      <exercisegroup xml:id="lastdefcount1" cols="2">
        <introduction>
          <p>
            Use differentials to approximate the given value by hand.
          </p>
        </introduction>
        <!-- Exercises 7 & 8: Square function -->
        <exercise label="ex-differentials-approximate-1">
          <webwork xml:id="ex-differentials-approximate-1">
            <pg-code>
              $x0 = random(2,9,1);
              $dx = random(0.03,0.09,0.01);
              if($envir{problemSeed}==1){$x0=2;$dx=0.05};
              Context()->flags->set(tolType=>'absolute',tolerance=>10**-8);
              $f = Compute("x^2");
              $df = $f->D('x');
              $x1 = $x0 + $dx;
              $dy = $dx * $df->eval(x=>$x0);
              $y = $f->eval(x=>$x0);
              $r = $y+$dy;
              Context()->flags->set(reduceConstants=>0,reduceConstantFunctions=>0);
              $given = $f->substitute(x=>Formula("$x1"));
            </pg-code>
            <statement>
              <p>
                <m><var name="$given"/></m>
              </p>
              <p>
                <var name="$r" width="10"/>
              </p>
            </statement>
            <solution>
              <p>
                Use <m>y = <var name="$f"/></m>;
                <m>dy = <var name="$df"/>\cdot dx</m> with <m>x=<var name="$x0"/></m>
                and <m>dx = <var name="$dx"/></m>.
                Thus <m>dy = <var name="$dy"/></m>; knowing
                <m><var name="$given"/>=<var name="$y"/></m>,
                we have <m><var name="$given"/> \approx <var name="$r"/></m>.
              </p>
            </solution>
          </webwork>
        </exercise>
        <exercise label="ex-differentials-approximate-2">
          <webwork xml:id="ex-differentials-approximate-2">
            <pg-code>
              $x0 = random(2,9,1);
              $dx = -random(0.03,0.09,0.01);
              if($envir{problemSeed}==1){$x0=6;$dx=-0.07};
              Context()->flags->set(tolType=>'absolute',tolerance=>10**-8);
              $f = Compute("x^2");
              $df = $f->D('x');
              $x1 = $x0 + $dx;
              $dy = $dx * $df->eval(x=>$x0);
              $y = $f->eval(x=>$x0);
              $r = $y+$dy;
              Context()->flags->set(reduceConstants=>0,reduceConstantFunctions=>0);
              $given = $f->substitute(x=>Formula("$x1"));
            </pg-code>
            <statement>
              <p>
                <m><var name="$given"/></m>
              </p>
              <p>
                <var name="$r" width="10"/>
              </p>
            </statement>
            <solution>
              <p>
                Use <m>y = <var name="$f"/></m>;
                <m>dy = <var name="$df"/>\cdot dx</m> with <m>x=<var name="$x0"/></m>
                and <m>dx = <var name="$dx"/></m>.
                Thus <m>dy = <var name="$dy"/></m>; knowing
                <m><var name="$given"/>=<var name="$y"/></m>,
                we have <m><var name="$given"/> \approx <var name="$r"/></m>.
              </p>
            </solution>
          </webwork>
        </exercise>
        <!-- Exercises 9 & 10: Cube function -->
        <exercise label="ex-differentials-approximate-3">
          <webwork xml:id="ex-differentials-approximate-3">
            <pg-code>
              $x0 = random(2,9,1);
              $dx = random(0.1,0.4,0.1);
              if($envir{problemSeed}==1){$x0=5;$dx=0.1};
              Context()->flags->set(tolType=>'absolute',tolerance=>10**-8);
              $f = Compute("x^3");
              $df = $f->D('x');
              $x1 = $x0 + $dx;
              $dy = $dx * $df->eval(x=>$x0);
              $y = $f->eval(x=>$x0);
              $r = $y+$dy;
              Context()->flags->set(reduceConstants=>0,reduceConstantFunctions=>0);
              $given = $f->substitute(x=>Formula("$x1"));
            </pg-code>
            <statement>
              <p>
                <m><var name="$given"/></m>
              </p>
              <p>
                <var name="$r" width="10"/>
              </p>
            </statement>
            <solution>
              <p>
                Use <m>y = <var name="$f"/></m>;
                <m>dy = <var name="$df"/>\cdot dx</m> with <m>x=<var name="$x0"/></m>
                and <m>dx = <var name="$dx"/></m>.
                Thus <m>dy = <var name="$dy"/></m>; knowing
                <m><var name="$given"/>=<var name="$y"/></m>,
                we have <m><var name="$given"/> \approx <var name="$r"/></m>.
              </p>
            </solution>
          </webwork>
        </exercise>
        <exercise label="ex-differentials-approximate-4">
          <webwork xml:id="ex-differentials-approximate-4">
            <pg-code>
              $x0 = random(2,9,1);
              $dx = -random(0.1,0.4,0.1);
              if($envir{problemSeed}==1){$x0=7;$dx=-0.2};
              Context()->flags->set(tolType=>'absolute',tolerance=>10**-8);
              $f = Compute("x^3");
              $df = $f->D('x');
              $x1 = $x0 + $dx;
              $dy = $dx * $df->eval(x=>$x0);
              $y = $f->eval(x=>$x0);
              $r = $y+$dy;
              Context()->flags->set(reduceConstants=>0,reduceConstantFunctions=>0);
              $given = $f->substitute(x=>Formula("$x1"));
            </pg-code>
            <statement>
              <p>
                <m><var name="$given"/></m>
              </p>
              <p>
                <var name="$r" width="10"/>
              </p>
            </statement>
            <solution>
              <p>
                Use <m>y = <var name="$f"/></m>;
                <m>dy = <var name="$df"/>\cdot dx</m> with <m>x=<var name="$x0"/></m>
                and <m>dx = <var name="$dx"/></m>.
                Thus <m>dy = <var name="$dy"/></m>; knowing
                <m><var name="$given"/>=<var name="$y"/></m>,
                we have <m><var name="$given"/> \approx <var name="$r"/></m>.
              </p>
            </solution>
          </webwork>
        </exercise>
        <!-- Exercises 11 & 12: Square root function -->
        <exercise label="ex-differentials-approximate-5">
          <webwork xml:id="ex-differentials-approximate-5">
            <pg-code>
              $x0 = list_random(9,16,25,36,49);
              $dx = random(0.3,0.9,0.1);
              if($envir{problemSeed}==1){$x0=16;$dx=0.5};
              Context()->flags->set(tolType=>'absolute',tolerance=>10**-8);
              $f = Compute("sqrt(x)");
              $df = $f->D('x');
              $x1 = $x0 + $dx;
              $dy = $dx * $df->eval(x=>$x0);
              $y = $f->eval(x=>$x0);
              $r = $y+$dy;
              Context()->flags->set(reduceConstants=>0,reduceConstantFunctions=>0);
              $given = $f->substitute(x=>Formula("$x1"));
            </pg-code>
            <statement>
              <p>
                <m><var name="$given"/></m>
              </p>
              <p>
                <var name="$r" width="10"/>
              </p>
            </statement>
            <solution>
              <p>
                Use <m>y = <var name="$f"/></m>;
                <m>dy = <var name="$df"/>\cdot dx</m> with <m>x=<var name="$x0"/></m>
                and <m>dx = <var name="$dx"/></m>.
                Thus <m>dy = <var name="$dy"/></m>; knowing
                <m><var name="$given"/>=<var name="$y"/></m>,
                we have <m><var name="$given"/> \approx <var name="$r"/></m>.
              </p>
            </solution>
          </webwork>
        </exercise>
        <exercise label="ex-differentials-approximate-6">
          <webwork xml:id="ex-differentials-approximate-6">
            <pg-code>
              $x0 = list_random(9,16,25,36,49);
              $dx = -random(0.3,1.5,0.1);
              if($envir{problemSeed}==1){$x0=25;$dx=-1};
              Context()->flags->set(tolType=>'absolute',tolerance=>10**-8);
              $f = Compute("sqrt(x)");
              $df = $f->D('x');
              $x1 = $x0 + $dx;
              $dy = $dx * $df->eval(x=>$x0);
              $y = $f->eval(x=>$x0);
              $r = $y+$dy;
              Context()->flags->set(reduceConstants=>0,reduceConstantFunctions=>0);
              $given = $f->substitute(x=>Formula("$x1"));
            </pg-code>
            <statement>
              <p>
                <m><var name="$given"/></m>
              </p>
              <p>
                <var name="$r" width="10"/>
              </p>
            </statement>
            <solution>
              <p>
                Use <m>y = <var name="$f"/></m>;
                <m>dy = <var name="$df"/>\cdot dx</m> with <m>x=<var name="$x0"/></m>
                and <m>dx = <var name="$dx"/></m>.
                Thus <m>dy = <var name="$dy"/></m>; knowing
                <m><var name="$given"/>=<var name="$y"/></m>,
                we have <m><var name="$given"/> \approx <var name="$r"/></m>.
              </p>
            </solution>
          </webwork>
        </exercise>
        <!-- Exercises 13 & 14: Cube root -->
        <exercise label="ex-differentials-approximate-7">
          <webwork xml:id="ex-differentials-approximate-7">
            <pg-code>
              $x0 = list_random(8,27,64,125,216);
              $dx = -random(0.3,1.5,0.1);
              if($envir{problemSeed}==1){$x0=64;$dx=-1};
              Context()->flags->set(tolType=>'absolute',tolerance=>10**-8);
              parser::Root->Enable;
              $f = Compute("root(3,x)");
              $df = $f->D('x');
              $x1 = $x0 + $dx;
              $dy = $dx * $df->eval(x=>$x0);
              $y = $f->eval(x=>$x0);
              $r = $y+$dy;
              Context()->flags->set(reduceConstants=>0,reduceConstantFunctions=>0);
              $given = $f->substitute(x=>Formula("$x1"));
            </pg-code>
            <statement>
              <p>
                <m><var name="$given"/></m>
              </p>
              <p>
                <var name="$r" width="10"/>
              </p>
            </statement>
            <solution>
              <p>
                Use <m>y = <var name="$f"/></m>;
                <m>dy = <var name="$df"/>\cdot dx</m> with <m>x=<var name="$x0"/></m>
                and <m>dx = <var name="$dx"/></m>.
                Thus <m>dy = <var name="$dy"/></m>; knowing
                <m><var name="$given"/>=<var name="$y"/></m>,
                we have <m><var name="$given"/> \approx <var name="$r"/></m>.
              </p>
            </solution>
          </webwork>
        </exercise>
        <exercise label="ex-differentials-approximate-8">
          <webwork xml:id="ex-differentials-approximate-8">
            <pg-code>
              $x0 = list_random(8,27,64,125,216);
              $dx = random(0.3,1.5,0.1);
              if($envir{problemSeed}==1){$x0=8;$dx=0.5};
              Context()->flags->set(tolType=>'absolute',tolerance=>10**-8);
              parser::Root->Enable;
              $f = Compute("root(3,x)");
              $df = $f->D('x');
              $x1 = $x0 + $dx;
              $dy = $dx * $df->eval(x=>$x0);
              $y = $f->eval(x=>$x0);
              $r = $y+$dy;
              Context()->flags->set(reduceConstants=>0,reduceConstantFunctions=>0);
              $given = $f->substitute(x=>Formula("$x1"));
            </pg-code>
            <statement>
              <p>
                <m><var name="$given"/></m>
              </p>
              <p>
                <var name="$r" width="10"/>
              </p>
            </statement>
            <solution>
              <p>
                Use <m>y = <var name="$f"/></m>;
                <m>dy = <var name="$df"/>\cdot dx</m> with <m>x=<var name="$x0"/></m>
                and <m>dx = <var name="$dx"/></m>.
                Thus <m>dy = <var name="$dy"/></m>; knowing
                <m><var name="$given"/>=<var name="$y"/></m>,
                we have <m><var name="$given"/> \approx <var name="$r"/></m>.
              </p>
            </solution>
          </webwork>
        </exercise>
        <!-- Exercise 15: sin(x) -->
        <exercise label="ex-differentials-approximate-9">
          <webwork xml:id="ex-differentials-approximate-9">
            <pg-code>
              $x0 = Compute("pi");
              $dx = 3-$x0;
              Context()->flags->set(tolType=>'absolute',tolerance=>10**-8);
              $f = Compute("sin(x)");
              $df = $f->D('x');
              $x1 = 3;
              $dy = $dx * $df->eval(x=>$x0);
              $y = $f->eval(x=>$x0);
              $r = $y+$dy;
              Context()->flags->set(reduceConstants=>0,reduceConstantFunctions=>0);
              $given = $f->substitute(x=>Formula("$x1"));
            </pg-code>
            <statement>
              <p>
                <m><var name="$given"/></m>
              </p>
              <p>
                <var name="$r" width="10"/>
              </p>
            </statement>
            <solution>
              <p>
                Use <m>y = <var name="$f"/></m>;
                <m>dy = <var name="$df"/>\cdot dx</m> with <m>x=<var name="$x0"/></m>
                and <m>dx = <var name="$dx"/></m>.
                Thus <m>dy = <var name="$dy"/></m>; knowing
                <m><var name="$given"/>=<var name="$y"/></m>,
                we have <m><var name="$given"/> \approx <var name="$r"/></m>.
              </p>
            </solution>
          </webwork>
        </exercise>
        <!-- Exercise 16: e^x -->
        <exercise label="ex-differentials-approximate-10">
          <webwork xml:id="ex-differentials-approximate-10">
            <pg-code>
              $x0 = 0;
              $dx = random(0.1,0.5,0.1);
              if($envir{problemSeed}==1){$dx=0.1};
              Context()->flags->set(tolType=>'absolute',tolerance=>10**-8);
              parser::Root->Enable;
              $f = Compute("e^x");
              $df = $f->D('x');
              $x1 = $x0 + $dx;
              $dy = $dx * $df->eval(x=>$x0);
              $y = $f->eval(x=>$x0);
              $r = $y+$dy;
              Context()->flags->set(reduceConstants=>0,reduceConstantFunctions=>0);
              $given = $f->substitute(x=>Formula("$x1"));
            </pg-code>
            <statement>
              <p>
                <m><var name="$given"/></m>
              </p>
              <p>
                <var name="$r" width="10"/>
              </p>
            </statement>
            <solution>
              <p>
                Use <m>y = <var name="$f"/></m>;
                <m>dy = <var name="$df"/>\cdot dx</m> with <m>x=<var name="$x0"/></m>
                and <m>dx = <var name="$dx"/></m>.
                Thus <m>dy = <var name="$dy"/></m>; knowing
                <m><var name="$given"/>=<var name="$y"/></m>,
                we have <m><var name="$given"/> \approx <var name="$r"/></m>.
              </p>
            </solution>
          </webwork>
        </exercise>
      </exercisegroup>

      <!-- Exercise 17 - 30: Compute differential -->
      <exercisegroup cols="2" xml:id="exset-differential-compute">
        <introduction>
          <p>
            Compute the differential <m>dy</m>.
          </p>
        </introduction>
        <exercise label="ex-differential-compute-1">
          <webwork xml:id="ex-differential-compute-1">
            <pg-code>
              $b = non_zero_random(-9,9,1);
              $c = non_zero_random(-9,9,1);
              if($envir{problemSeed}==1){$b=3;$c=-5;};
              Context()->variables->add(dx=>"Real");
              $f = Compute("x^2+$b x + $c")->reduce;
              $df = $f->D('x')->reduce;
              $A = Formula("$df dx");
            </pg-code>
            <statement>
              <p>
                <m>y=<var name="$f"/></m>
              </p>
              <p>
                <var name="$A" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <!-- Exercise 18 -->
        <exercise label="ex-differential-compute-2">
          <webwork xml:id="ex-differential-compute-2">
            <pg-code>
              ($m,$n) = (3..9)[NchooseK(7,2)];
              $c = list_random(1,-1);
              if($envir{problemSeed}==1){$m=7;$n=5;$c=-1};
              Context()->variables->add(dx=>"Real");
              $f = Compute("x^$m+$c x^$n")->reduce;
              $df = $f->D('x')->reduce;
              $A = Formula("$df dx");
            </pg-code>
            <statement>
              <p>
                <m>y=<var name="$f"/></m>
              </p>
              <p>
                <var name="$A" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <!-- Exercise 19 -->
        <exercise label="ex-differential-compute-3">
          <webwork xml:id="ex-differential-compute-3">
            <pg-code>
              ($m,$n) = (1..9)[NchooseK(9,2)];
              if($envir{problemSeed}==1){$m=4;$n=2;};
              Context()->variables->add(dx=>"Real");
              $f = Compute("1/($m x^$n)")->reduce;
              $df = $f->D('x')->reduce;
              $A = Formula("$df dx");
            </pg-code>
            <statement>
              <p>
                <m>y=\displaystyle<var name="$f"/></m>
              </p>
              <p>
                <var name="$A" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <!-- Exercise 20 -->
        <exercise label="ex-differential-compute-4">
          <webwork xml:id="ex-differential-compute-4">
            <pg-code>
              $a = random(2,9,1);
              $n = random(2,3,1);
              if($envir{problemSeed}==1){$a=2;$n=2;};
              Context()->variables->add(dx=>"Real");
              $f = Compute("($a x + sin(x))^$n")->reduce;
              $df = $f->D('x')->reduce;
              $A = Formula("$df dx");
            </pg-code>
            <statement>
              <p>
                <m>y=<var name="$f"/></m>
              </p>
              <p>
                <var name="$A" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <!-- Exercise 21 -->
        <exercise label="ex-differential-compute-5">
          <webwork xml:id="ex-differential-compute-5">
            <pg-code>
              ($m,$n) = (2..9)[NchooseK(8,2)];
              if($envir{problemSeed}==1){$m=2;$n=3;};
              Context()->variables->add(dx=>"Real");
              $f = Compute("x^$m + e^($n x)")->reduce;
              $df = $f->D('x')->reduce;
              $A = Formula("$df dx");
            </pg-code>
            <statement>
              <p>
                <m>y=<var name="$f"/></m>
              </p>
              <p>
                <var name="$A" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <!-- Exercise 22       -->
        <exercise label="ex-differential-compute-6">
          <webwork xml:id="ex-differential-compute-6">
            <pg-code>
              $a = random(2,9,1);
              $b = random(2,9,1);
              if($envir{problemSeed}==1){$a=4;$b=4;};
              Context()->variables->add(dx=>"Real");
              $f = Compute("$a/x^$b")->reduce;
              $df = $f->D('x')->reduce;
              $A = Formula("$df dx");
            </pg-code>
            <statement>
              <p>
                <m>y=\displaystyle<var name="$f"/></m>
              </p>
              <p>
                <var name="$A" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <!-- Exercise 23 -->
        <exercise label="ex-differential-compute-7">
          <webwork xml:id="ex-differential-compute-7">
            <pg-code>
              $a = random(2,9,1);
              $b = random(1,9,1);
              if($envir{problemSeed}==1){$a=2;$b=1;};
              Context()->variables->add(dx=>"Real");
              $f = Compute("($a x)/(tan(x) + $b)")->reduce;
              $df = $f->D('x')->reduce;
              $A = Formula("$df dx");
            </pg-code>
            <statement>
              <p>
                <m>y=\displaystyle<var name="$f"/></m>
              </p>
              <p>
                <var name="$A" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <!-- Exercise 24 -->
        <exercise label="ex-differential-compute-8">
          <webwork xml:id="ex-differential-compute-8">
            <pg-code>
              $a = random(2,9,1);
              if($envir{problemSeed}==1){$a=5;};
              Context()->variables->add(dx=>"Real");
              $f = Compute("ln($a x)")->reduce;
              $df = $f->D('x')->reduce;
              $A = Formula("$df dx");
            </pg-code>
            <statement>
              <p>
                <m>y=<var name="$f"/></m>
              </p>
              <p>
                <var name="$A" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <!-- Exercise 25 -->
        <exercise label="ex-differential-compute-9">
          <webwork xml:id="ex-differential-compute-9">
            <pg-code>
              $trig = list_random('sin','cos','tan','sec','csc','cot');
              if($envir{problemSeed}==1){$trig='sin';};
              Context()->variables->add(dx=>"Real");
              $f = Compute("e^x $trig(x)")->reduce;
              $df = $f->D('x')->reduce;
              $A = Formula("$df dx");
            </pg-code>
            <statement>
              <p>
                <m>y=<var name="$f"/></m>
              </p>
              <p>
                <var name="$A" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <!-- Exercise 26 -->
        <exercise label="ex-differential-compute-10">
          <webwork xml:id="ex-differential-compute-10">
            <pg-code>
              ($trig1,$trig2) = ('sin','cos','tan','sec','csc','cot')[NchooseK(6,2)];
              if($envir{problemSeed}==1){$trig1='cos';$trig2='sin';};
              Context()->variables->add(dx=>"Real");
              $f = Compute("$trig1($trig2(x))")->reduce;
              $df = $f->D('x')->reduce;
              $A = Formula("$df dx");
            </pg-code>
            <statement>
              <p>
                <m>y=<var name="$f"/></m>
              </p>
              <p>
                <var name="$A" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <!-- Exercise 27 -->
        <exercise label="ex-differential-compute-11">
          <webwork xml:id="ex-differential-compute-11">
            <pg-code>
              ($a,$b) = (-9..-1,1..9)[NchooseK(18,2)];
              if($envir{problemSeed}==1){$a=1;$b=2;};
              Context()->variables->add(dx=>"Real");
              $f = Compute("(x+$a)/(x+$b)")->reduce;
              $df = $f->D('x')->reduce;
              $A = Formula("$df dx");
            </pg-code>
            <statement>
              <p>
                <m>y=\displaystyle<var name="$f"/></m>
              </p>
              <p>
                <var name="$A" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <!-- Exercise 28 -->
        <exercise label="ex-differential-compute-12">
          <webwork xml:id="ex-differential-compute-12">
            <pg-code>
              $a = random(2,9,1);
              if($envir{problemSeed}==1){$a=3;};
              Context()->variables->add(dx=>"Real");
              $f = Compute("$a^x ln(x)")->reduce;
              $df = $f->D('x')->reduce;
              $A = Formula("$df dx");
            </pg-code>
            <statement>
              <p>
                <m>y=<var name="$f"/></m>
              </p>
              <p>
                <var name="$A" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <!-- Exercise 29 -->
        <exercise label="ex-differential-compute-13">
          <webwork xml:id="ex-differential-compute-13">
            <pg-code>
              $fstring = list_random('x ln(x) - x','x arctan(x) - (1/2) ln(1+x^2)');
              if($envir{problemSeed}==1){$fstring='x ln(x) - x';};
              Context()->variables->add(dx=>"Real");
              $f = Compute("$fstring")->reduce;
              $df = ($fstring eq 'x ln(x) - x') ? Compute("ln(x)") : Compute("arctan(x)");
              $A = Formula("$df dx");
            </pg-code>
            <statement>
              <p>
                <m>y=<var name="$f"/></m>
              </p>
              <p>
                <var name="$A" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <!-- Exercise 30 -->
        <exercise label="ex-differential-compute-14">
          <webwork xml:id="ex-differential-compute-14">
            <pg-code>
              $fstring = list_random('ln(sec(x))','ln(sin(x))',);
              if($envir{problemSeed}==1){$fstring='ln(sec(x))';};
              Context()->variables->add(dx=>"Real");
              $f = Compute("$fstring")->reduce;
              $df = ($fstring eq 'ln(sec(x))') ? Compute("tan(x)") : Compute("cot(x)");
              $A = Formula("$df dx");
            </pg-code>
            <statement>
              <p>
                <m>y=<var name="$f"/></m>
              </p>
              <p>
                <var name="$A" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>
      </exercisegroup>

      <!-- Exercise 31: Propogated error in a plastic sphere -->
      <exercise label="ex-differentials-error-1">
        <webwork xml:id="ex-differentials-error-1">
          <pg-code>
            $diameter = random(1,5,1);
            $dx = random(1,$diameter,1);
            if($envir{problemSeed}==1){$diamter=1;$dx=1;};
            $diameterU = NumberWithUnits("$diameter cm");
            $dxU = NumberWithUnits("$dx mm");
            $f = Compute("1/6*pi*x^3");
            $df = $f->D('x');
            $err = $df->eval(x=>$diameter) * $dx/10;
            $errU = NumberWithUnits("$err cm^3");
          </pg-code>
          <statement>
            <p>
              A set of plastic spheres are to be made with a diameter of <m><var name="$diameterU"/></m>.
              If the manufacturing process is accurate to <m><var name="$dxU"/></m>,
              what is the propagated error in volume of the spheres?
            </p>
            <p>
              <var name="$errU" width="20"/>
            </p>
          </statement>
        </webwork>
      </exercise>
      <!-- Exercise 32: Propagated error dropping a stone into a hole -->
      <exercise label="ex-differentials-error-2">
        <webwork xml:id="ex-differentials-error-2">
          <pg-code>
            $dx = random(1,4,1);
            $a = random(2,4,1);
            $b = random(5,8,1);
            if($envir{problemSeed}==1){$dx=2;$a=2;$b=5;};
            $f = Compute("16*x^2");
            $df = $f->D('x');
            $err_a = $df->eval(x=>$a) * $dx/10;
            $err_aU = NumberWithUnits("$err_a ft");
            $err_b = $df->eval(x=>$b) * $dx/10;
            $err_bU = NumberWithUnits("$err_b ft");
          </pg-code>
          <statement>
            <p>
              The distance, in feet,
              a stone drops in <m>t</m> seconds is given by <m>d(t) = 16t^2</m>.
              The depth of a hole is to be approximated by dropping a rock and listening for it to hit the bottom.
              What is the propagated error if the time measurement is accurate to
              <m><var name="$dx"/>/10</m> of a second and the measured time is:
              <ol>
                <li>
                  <p>
                    <m><var name="$a"/></m> seconds?
                  </p>
                  <p>
                    <var name="$err_a" width="20"/>
                  </p>
                </li>
                <li>
                  <p>
                    <m><var name="$b"/></m> seconds?
                  </p>
                  <p>
                    <var name="$err_b" width="20"/>
                  </p>
                </li>
              </ol>
            </p>
          </statement>
        </webwork>
      </exercise>
      <!-- Exercise 33: Propagated error in cross-sectional area of a log -->
      <exercise label="ex-differentials-error-3">
        <webwork xml:id="ex-differentials-error-3">
          <pg-code>
            $diameter = random(12,20,1);
            $dx = list_random(2,4,8,16);
            if($envir{problemSeed}==1){$diameter=15;$dx=4};
            $f = Compute("pi/4*x^2");
            $df = $f->D('x');
            $err = $df->eval(x=>$diameter) * 1/$dx;
            $errU = NumberWithUnits("$err in^2");
          </pg-code>
          <statement>
            <p>
              What is the propagated error in the measurement of the cross sectional area
              of a circular log if the diameter is measured at <m><var name="$diameter"/>''</m>,
              accurate to <m>1/<var name="$dx"/>''</m>?
            </p>
            <p>
              <var name="$err" width="20"/>
            </p>
          </statement>
        </webwork>
      </exercise>
      <!-- Exercise 34: Propagated error in SA of wall -->
      <exercise label="ex-differentials-error-4">
        <webwork xml:id="ex-differentials-error-4">
          <pg-code>
            $h = random(8,10,1);
            $lft = random(10,20,1);
            $lin = random(1,11);
            $dx = list-random(2,4,8,16);
            if($envir{problemSeed}==1){$h=8;$lft=10;$lin=7;$dx=2};
            $f = Compute("$h*x");
            $df = $f->D('x');
            $x = $lft + $lin/12;
            $err = $df->eval(x=>$x) * 1/$dx;
            $errU = NumberWithUnits("$err ft^2");
          </pg-code>
          <statement>
            <p>
              A wall is to be painted that is <m><var name="$h"/>'</m> high and is measured
              to be <m><var name="$lft"/>',\,<var name="$lin"/>''</m> long.
              Find the propagated error in the measurement of the wall's surface area
              if the measurement is accurate to <m>1/<var name="$dx"/>''</m>.
            </p>
            <p>
              <var name="$errU" width="10"/>
            </p>
          </statement>
        </webwork>
      </exercise>
    </subexercises>

    <subexercises>
      <exercisegroup cols="2" xml:id="exset-differentials-survey">
        <introduction>
          <p>
            The following exercises explore some issues related to surveying in which
            distances are approximated using other measured distances and measured angles.
            <em>(Hint: Convert all angles to radians before computing.)</em>
          </p>
        </introduction>
        <!-- Exercise 35: Error in length of wall -->
        <exercise xml:id="exer_04_04_ex_35" label="ex-differentials-survey-1">
           <webwork xml:id="ex-differentials-survey-1">
            <pg-code>
              $theta = 85.2;
              $d = 25;
              $f = Compute("$d*tan(x)");
              $l = $f->eval(x=>$theta*pi/180);
              $lU = NumberWithUnits("$l ft");
              $df = $f->D('x');
              $err = $df->eval(x=>$theta*pi/180) * pi/180;
              $errU = NumberWithUnits("$err ft");
              Context("Percent");
              $err_pct = Percent("$err/$l");
            </pg-code>
            <statement>
              <p>
                The length <m>L</m> of a long wall is to be approximated.
                The angle <m>\theta</m>, as shown in the diagram
                (not to scale),
                is measured to be <m><var name="$theta"/>^\circ</m>,
                accurate to <m>1^\circ</m>.
                Assume that the triangle formed is a right triangle.
              </p>
              <!-- <image pg-name="$gr" width="40%"/> -->
              <latex-image>
                \begin{tikzpicture}
                  \draw [ultra thick] (1,-1) -&#x2D; node [pos=.5,right] { \(l=\mathord{?}\)} (1,1);
                  \draw [dashed] (1,1) -&#x2D; (-1,-1) node [xshift=10pt,yshift=5pt] { \(\theta\)} -&#x2D; node [pos=.5,below] { \(25'\)} (1,-1);
                \end{tikzpicture}
              </latex-image>
              <p>
                <ol>
                  <li>
                    <p>
                      What is the measured length <m>L</m> of the wall?
                    </p>
                    <p>
                      <var name="$lU" width="20"/>
                    </p>
                  </li>
                  <li>
                    <p>
                      What is the propagated error?
                    </p>
                    <p>
                      <var name="$errU" width="20"/>
                    </p>
                  </li>
                  <li>
                    <p>
                      What is the percent error?
                    </p>
                    <p>
                      <var name="$err_pct" width="20"/>
                    </p>
                  </li>
                </ol>
              </p>
            </statement>
          </webwork>
        </exercise>
        <!-- Exercise 36: Length of the wall with a different angle and distance -->
        <exercise label="ex-differentials-survey-2">
           <webwork xml:id="ex-differentials-survey-2">
            <pg-code>
              $theta = 71.5;
              $d = 100;
              $f = Compute("$d*tan(x)");
              $l = $f->eval(x=>$theta*pi/180);
              $lU = NumberWithUnits("$l ft");
              $df = $f->D('x');
              $err = $df->eval(x=>$theta*pi/180) * pi/180;
              $errU = NumberWithUnits("$err ft");
              Context("Percent");
              $err_pct = Percent("$err/$l");
            </pg-code>
            <statement>
              <p>
                The length <m>L</m> of a long wall is to be approximated.
                The angle <m>\theta</m>, as shown in the diagram
                (not to scale),
                is measured to be <m><var name="$theta"/>^\circ</m>,
                accurate to <m>1^\circ</m>.
                Assume that the triangle formed is a right triangle.
              </p>
              <!-- <image pg-name="$gr" width="40%"/> -->
              <image xml:id="img-ex-diff-approx1" width="60%">
                <latex-image>
                  \begin{tikzpicture}
                    \draw [ultra thick] (1,-1) -&#x2D; node [pos=.5,right] { \(l=\mathord{?}\)} (1,1);
                    \draw [dashed] (1,1) -&#x2D; (-1,-1) node [xshift=10pt,yshift=5pt] { \(\theta\)} -&#x2D; node [pos=.5,below] { \(25'\)} (1,-1);
                  \end{tikzpicture}
                </latex-image>
              </image>
              <p>
                <ol>
                  <li>
                    <p>
                      What is the measured length <m>L</m> of the wall?
                    </p>
                    <p>
                      <var name="$lU" width="20"/>
                    </p>
                  </li>
                  <li>
                    <p>
                      What is the propagated error?
                    </p>
                    <p>
                      <var name="$errU" width="20"/>
                    </p>
                  </li>
                  <li>
                    <p>
                      What is the percent error?
                    </p>
                    <p>
                      <var name="$err_pct" width="20"/>
                    </p>
                  </li>
                </ol>
              </p>
            </statement>
          </webwork>
        </exercise>
        <!-- Exercise 37: Length of the wall if an isosceles triangle -->
        <exercise xml:id="exer_04_04_ex_37" label="ex-differentials-survey-3">
           <webwork xml:id="ex-differentials-survey-3">
            <pg-code>
              $theta = 143;
              $d = 50;
              $f = Compute("2*$d*tan(x/2)");
              $l = $f->eval(x=>$theta*pi/180);
              $lU = NumberWithUnits("$l ft");
              $df = $f->D('x');
              $err = $df->eval(x=>$theta*pi/180) * pi/180;
              $errU = NumberWithUnits("$err ft");
              Context("Percent");
              $err_pct = Percent("$err/$l");
            </pg-code>
            <statement>
              <p>
                The length <m>L</m> of a long wall is to be calculated
                by measuring the angle <m>\theta</m> shown in the diagram
                (not to scale).
                Assume the formed triangle is an isosceles triangle.
                The measured angle is <m><var name="$theta"/>^\circ</m>,
                accurate to <m>1^\circ</m>.
              </p>
              <!-- <image pg-name="$gr" width="40%"/> -->
              <image xml:id="img-ex-diff-approx2" width="60%">
                <latex-image>
                  \begin{tikzpicture}
                    \draw [ultra thick] (1,-1) -&#x2D; node [pos=.5,right] { \(l=\mathord{?}\)} (1,1);
                    \draw [dashed] (1,1) -&#x2D; (-1,-1) node [xshift=10pt,yshift=5pt] { \(\theta\)} -&#x2D; node [pos=.5,below] { \(25'\)} (1,-1);
                  \end{tikzpicture}
                </latex-image>
              </image>
              <p>
                <ol>
                  <li>
                    <p>
                      What is the measured length <m>L</m> of the wall?
                    </p>
                    <p>
                      <var name="$lU" width="20"/>
                    </p>
                  </li>
                  <li>
                    <p>
                      What is the propagated error?
                    </p>
                    <p>
                      <var name="$errU" width="20"/>
                    </p>
                  </li>
                  <li>
                    <p>
                      What is the percent error?
                    </p>
                    <p>
                      <var name="$err_pct" width="20"/>
                    </p>
                  </li>
                </ol>
              </p>
            </statement>
          </webwork>
        </exercise>
        <!-- Exercise 37: Compare errors in wall measurements from previous exercises -->
        <exercise label="ex-differentials-survey-4">
          <webwork xml:id="ex-differentials-survey-4">
            <pg-code>
              $buttons = RadioButtons(
                [
                  'Right triangle at 25 feet',
                  'Right triangle at 100 feet',
                  'Isosceles triangle at 50 feet',
                ],2);
            </pg-code>
            <statement>
              <p>
                The length of the walls in
                <xref first="exer_04_04_ex_35" last="exer_04_04_ex_37"/>
                are essentially the same.
                Which setup gives the most accurate result?
              </p>
              <p>
                <var name="$buttons" form="buttons"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <!-- Exercise 38: Length of wall if the distance has the error instead of the angle -->
        <exercise label="ex-differentials-survey-5">
           <webwork xml:id="ex-differentials-survey-5">
            <pg-code>
              $theta = 143;
              $d = 50;
              $f = Compute("2*x*tan( ($theta*pi/180) /2)");
              $l = $f->eval(x=>$d);
              $lU = NumberWithUnits("$l ft");
              $df = $f->D('x');
              $err = $df->eval(x=>$d) * 0.5;
              $errU = NumberWithUnits("$err ft");
              Context("Percent");
              $err_pct = Percent("$err/$l");
              <!-- $gr = init_graph(-1,-1,51,51, size=>[240,240]);
              $gr->moveTo(0,25);
              $gr->lineTo(50,0,'black',1,'dashed');
              $gr->lineTo(50,50,'black',3);
              $gr->lineTo(0,25,'black',1,'dashed');
              $gr->moveTo(2,25);
              $gr->lineTo(50,25,'black',1);
              $gr->lb( new Label(25,25,$d."'",'black','center','top','large'));
              $gr->lb( new Label(50,25,' L','black','left','middle','large'));
              $xfunc = sub { my $t = shift();
                return 6*cos($t); };
              $yfunc = sub { my $t = shift();
                return 25 + 6*sin($t); };
              $fn = new Fun( $xfunc, $yfunc, $gr );
              $fn->domain(atan(-0.5),atan(0.5));
              $fn->color('black'); -->
            </pg-code>
            <statement>
              <p>
                Consider the setup in <xref ref="exer_04_04_ex_37"/>.
                This time, assume the angle measurement of
                <m>143^\circ</m> is exact but the measured <m>50'</m> from the wall is accurate to <m>6''</m>.
              </p>
              <!-- <image pg-name="$gr" width="40%"/> -->
              <image xml:id="img-ex-diff-approx3" width="60%">
                <latex-image>
                  \begin{tikzpicture}
                    \draw [ultra thick] (1,-1) -&#x2D; node [pos=.5,right] { \(l=\)?} (1,1);
                    \draw [dashed] (1,1) -&#x2D; (-1,-1) node [xshift=10pt,yshift=5pt] { \(\theta\)} -&#x2D; node [pos=.5,below] { \(25'\)} (1,-1);
                  \end{tikzpicture}
                </latex-image>
              </image>
              <p>
                What is the approximate percent error?
              </p>
              <p>
                <var name="$err_pct" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>
      </exercisegroup>
    </subexercises>
  </exercises>
</section>
