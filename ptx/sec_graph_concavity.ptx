<?xml version="1.0" encoding="UTF-8"?>
<section xml:id="sec_concavity" label="sec_concavity">
  <title>Concavity and the Second Derivative</title>
  <introduction>
    <figure xml:id="vid_graphs_concav_intro" component="video" vshift="-2">
      <caption>Video introduction to <xref ref="sec_concavity"/></caption>
      <video youtube="0uCjI5J4ew4" label="vid_graphs_concav_intro"/>
    </figure>

    <p>
      Our study of <q>nice</q> functions continues.
      The previous section showed how the first derivative of a function,
      <m>\fp</m>, can relay important information about <m>f</m>.
      We now apply the same technique to <m>\fp</m> itself,
      and learn what this tells us about <m>f</m>.
    </p>

    <p>
      The key to studying <m>\fp</m> is to consider its derivative,
      namely <m>\fp'</m>, which is the second derivative of <m>f</m>.
      When <m>\fp'\gt 0</m>, <m>\fp</m> is increasing.
      When <m>\fp'\lt 0</m>, <m> \fp </m>is decreasing.
      <m>\fp</m> has relative maxima and minima where <m>\fp'=0</m> or is undefined.
    </p>

    <p>
      This section explores how knowing information about <m>\fpp</m> gives information about <m>f</m>.
    </p>
  </introduction>

  <subsection>
    <title>Concavity</title>
    <p>
      We begin with a definition, then explore its meaning.
    </p>

    <definition xml:id="def_concavity">
      <title>Concave Up and Concave Down</title>
      <statement>
        <p>
          Let <m>f</m> be continuous on an interval <m>I</m>.
          The graph of <m>f</m> is <term>concave up</term>
          on <m>I</m> if for any <m>a\lt b</m> in <m>I</m>,
          <men xml:id="eqn-concave-up">
            f\left(\frac{a+b}{2}\right) \lt \frac{f(a)+f(b)}{2}
          </men>.
          The graph of <m>f</m> is <term>concave down</term>
          on <m>I</m> if for any <m>a\lt b</m> in <m>I</m>,
          <men xml:id="eqn-concave-down">
            f\left(\frac{a+b}{2}\right) \gt \frac{f(a)+f(b)}{2}
          </men>.
              <idx><h>concavity</h></idx>
              <idx><h>concave up</h></idx>
              <idx><h>concave down</h></idx>
        </p>
      </statement>
    </definition>

    <aside vshift="4.5">
      <title>Alternate terminology</title>
      <p>
        We often state that <q><m>f</m> is concave up</q>
        instead of <q>the graph of <m>f</m> is concave up</q> for simplicity.
      </p>
    </aside>

    <aside vshift="0">
      <title>Geometric concavity</title>
      <p>
        Geometrically speaking, a function is concave up if its graph lies below its secant line segments,
        and above its tangent lines; see <xref ref="fig-concavity-defn1"/> and <xref ref="fig_concavity1"/>.
      </p>

      <p>
        A function is concave down if its graph lies above its secant lines and below its tangent lines;
        see <xref ref="fig-concavity-defn2"/> and <xref ref="fig_concavity2"/>.
      </p>
    </aside>

    <p>
      Geometrically, the condition in <xref ref="eqn-concave-up">Equation</xref>
      states that a graph is concave up if the midpoint of the secant line from <m>(a,f(a))</m>
      to <m>(b,f(b))</m> (and hence, the secant line itself) is above the graph <m>y=f(x)</m>.
      Similarly, <xref ref="eqn-concave-down">Equation</xref> states that the secant line lies below the graph.
    </p>
    <p>
      In order for equality to hold instead of <xref ref="eqn-concave-up">Equation</xref> or <xref ref="eqn-concave-down">Equation</xref>,
      the function would have to be of the form <m>f(x)=mx+c</m>,
      in which case the graph is a straight line.
      Straight lines are considered to have <term>no concavity</term>.
    </p>

    <figure xml:id="fig-concavity-definition">
      <caption>Illustrating the nature of concave up and concave down</caption>
      <sidebyside widths="47% 47%">
        <figure xml:id="fig-concavity-defn1">
          <caption>A graph that is concave up. Notice how the secant line lies above the graph.</caption>
          <image>
            <shortdescription>
              A graph of a function with concave up curvature.
            </shortdescription>
            <description>
              <p>
                The image shows a graph where the curve is shaped upwards, resembling a bowl.
                There is a secant line from <m>x=-1</m> to <m>x=2</m> that lies above the curve.
                The points on the curve are all below this secant line, implying that the slope of the function is increasing as you move from left to right.
              </p>
            </description>
            <latex-image label="img-concavity-defn1">
              \begin{tikzpicture}
                \begin{axis}[
                    xmin=-1.5,xmax=2.5,
                    ymin=-0.5,ymax=7,
                  ]
                  \addplot+[infinite,domain=-1.4:2.4] {x^2};
                  \addplot+[secantline,-,domain=-1:2] {x+2};
                  \addplot[soliddot] coordinates {(-1,1) (2,4)};
                \end{axis}
              \end{tikzpicture}
            </latex-image>
          </image>
        </figure>
        <figure xml:id="fig-concavity-defn2">
          <caption>A graph that is concave down. Notice how the secant line lies below the graph.</caption>
          <image>
            <shortdescription>
              A graph representing a function with a concave down shape.
            </shortdescription>
            <description>
              <p>
                This image illustrates a graph with a curve that opens downwards, similar to an inverted bowl, which characterizes a concave down function.
                There's a secant line from <m>x=-1</m> to <m>x=2</m> that lies below the curve.
                The points on the curve are all above this secant line, implying that the function's slope is decreasing as you move from left to right.
              </p>
            </description>
            <latex-image label="img-concavity-defn2">
              \begin{tikzpicture}
                \begin{axis}[
                    xmin=-1.5,xmax=2.5,
                    ymin=-0.5,ymax=7,
                  ]
                  \addplot+[infinite,domain=-1.4:2.3] {6-x^2};
                  \addplot+[secantline,-,domain=-1:2] {-x+4};
                  \addplot[soliddot] coordinates {(-1,5) (2,2)};
                \end{axis}
              \end{tikzpicture}
            </latex-image>
          </image>
        </figure>
      </sidebyside>
    </figure>

    <p>
      Consider a function <m>f</m> such that <m>f</m> is continuous on <m>[a,b]</m> and differentiable on <m>(a,b)</m>.
      Note that <m>\frac{a+b}{2}</m> is the midpoint of the interval <m>[a,b]</m>.
      By the <xref ref="thm_mvt" text="title"/>,
      there must be a point <m>c_1</m> in <m>\left[a,\frac{a+b}{2}\right]</m> such that
      <me>
        \fp(c_1) = \frac{f\left(\frac{a+b}{2}\right)-f(a)}{\frac{a+b}{2}-a}=\frac{2}{b-a}\left(f\left(\frac{a+b}{2}\right)-f(a)\right)
      </me>.
      Similarly, there must be a point <m>c_2</m> in <m>\left[\frac{a+b}{2},b\right]</m> such that
      <me>
        \fp(c_2) = \frac{f(b)-f\left(\frac{a+b}{2}\right)}{b-\frac{a+b}{2}} = \frac{2}{b-a}\left(f(b)-f\left(\frac{a+b}{2}\right)\right)
      </me>.
      But then we have
      <md>
        <mrow>\fp(c_2)-\fp(c_1) \amp = \frac{2}{b-a}\left(f(b)-f\left(\frac{a+b}{2}\right)-f\left(\frac{a+b}{2}\right)+f(a)\right)</mrow>
        <mrow>\amp = \frac{4}{b-a}\left(\frac{f(a)+f(b)}{2}-f\left(\frac{a+b}{2}\right)\right)</mrow>
      </md>.
    </p>

    <p>
      Now, let us suppose that <m>\fp(x)</m> is an increasing function on <m>(a,b)</m>.
      In that case, <m>\fp(c_2)-\fp(c_1)\gt 0</m>, and since <m>b-a\gt 0</m>,
      this implies that
      <me>
        \frac{f(a)+f(b)}{2}-f\left(\frac{a+b}{2}\right)\gt 0
      </me>,
      which, by <xref ref="def_concavity"/> means that the graph of <m>f</m> is concave up.
    </p>

    <p>
      Similarly, if <m>\fp(x)</m> is a decreasing function on <m>(a,b)</m>,
      then the graph of <m>f</m> will be concave down.
      Using <xref ref="thm_incr_decr"/>, we arrive at the following theorem.
    </p>

    <theorem xml:id="thm-concave-derivative">
      <statement>
        <p>
          Let <m>f</m> be a continuous function on <m>[a,b]</m> and differentiable on <m>(a,b)</m>.
        </p>

        <p>
          <ol>
            <li xml:id="thm_conc_up">
              <p>
                If <m>\fpp(c) \gt 0</m> for all <m>c</m> in <m>(a,b)</m>,
                then <m>f</m> is concave up on <m>[a,b]</m>.
              </p>
            </li>
            <li xml:id="thm_conc_down">
              <p>
                If <m>\fpp(c) \lt 0</m> for all <m>c</m> in <m>(a,b)</m>,
                then <m>f</m> is concave down on <m>[a,b]</m>.
              </p>
            </li>
            <li>
              <p>
                If <m>\fpp(c) =0</m> for all <m>c</m> in <m>(a,b)</m>,
                then <m>f</m> is linear on <m>[a,b]</m>.
              </p>
            </li>
          </ol>
        </p>
      </statement>
    </theorem>

    <aside vshift="9">
      <p>
        <xref ref="thm-concave-derivative"/>
        lets us conclude that the graph of a function is concave up (or down)
        on a <em>closed</em> interval, assuming that the function is continuous on that interval.
        Again, we follow the convention that when a problem asks us to give the intervals on which the graph is concave up or down,
        we give <em>open</em> intervals, even if a closed interval is technically correct.
      </p>
      <p>
        If a function has the same concavity on adjacent intervals <m>(a,b)</m> and <m>(b,c)</m>,
        and the function is continuous at <m>b</m>,
        we should combine the intervals, and state the result as <m>(a,c)</m>.
        However, if <m>b</m> is a point of discontinuity, we must omit it from our intervals.
      </p>
    </aside>

    <p>
      The graph of a function <m>f</m> is <em>concave up</em>
      when <m> \fp </m>is <em>increasing.</em>
      That means as one looks at a concave up graph from left to right,
      the slopes of the tangent lines will be increasing.
      Consider <xref ref="fig_concavity1"/>,
      where a concave up graph is shown along with some tangent lines.
      Notice how the tangent line on the left is steep,
      downward, corresponding to a lesser
      (large negative)
      value of <m>\fp</m>.
      On the right, the tangent line is steep,
      upward, corresponding to a greater
      (large positive)
      value of <m>\fp</m>.
    </p>

    <figure xml:id="fig_concavity1" vshift="3">
      <caption>A function <m>f</m> with a concave up graph. Notice how the slopes of the tangent lines, when looking from left to right, are increasing. (The slope values pictured are <m>-12, -6, 6 </m>  and <m>12</m>).</caption>
      <!-- START figures/fig_concavity1.tex -->
      <image width="47%">
        <shortdescription>
          A graph of a function with concave up curvature and tangent lines.
        </shortdescription>
        <description>
          <p>
            The image displays a graph of a concave up function <m>f</m> with tangent lines drawn at various points along the curve.
            The function is shown as a continuous curve that opens upwards, like a parabola.
            Tangent lines at points with x-values of <m>(-2, -1, 1, 2)</m> are depicted, illustrating how the slope of these lines increases as we move from left to right.
            On the left side of the graph, the tangent lines slope downwards, indicating negative slopes, while on the right side, the tangent lines slope upwards, indicating positive slopes.
          </p>
        </description>
        <latex-image label="img_concavity1">
          \begin{tikzpicture}
            \begin{axis}[
                xmin=-3.5,
                xmax=3.5,
                ymin=-1,
                ymax=35,
              ]
              \addplot+[infinite,domain=-3:3] {3*x^2+5};
              \addplot [tangentlineseg,domain =-3:-1] {-12*(x+2)+17};
              \addplot [tangentlineseg,domain =1:3] {12*(x-2)+17} ;
              \addplot [tangentlineseg,domain =-2.5:.5] {-6*(x+1)+8};
              \addplot [tangentlineseg,domain =-.5:2.5] {6*(x-1)+8} ;
            \end{axis}
          \end{tikzpicture}
        </latex-image>
      </image>
      <!-- figures/fig_concavity1.tex END -->
    </figure>

    <p>
      If a function is decreasing and concave up,
      then its rate of decrease is slowing;
      it is <q>leveling off.</q> You can see this in the left side of <xref ref="fig_concavity1"/>.
      If the function is increasing and concave up,
      then the <em>rate</em> of increase is increasing.
      The function is increasing at a faster and faster rate.
      You can see this in the right side of <xref ref="fig_concavity1"/>.
    </p>

    <p>
      Now consider a function which is concave down.
      We essentially repeat the above paragraphs with slight variation.
    </p>

    <p>
      The graph of a function <m>f</m> is <em>concave down</em>
      when <m> \fp </m>is <em>decreasing.</em>
      That means as one looks at a concave down graph from left to right,
      the slopes of the tangent lines will be decreasing.
      Consider <xref ref="fig_concavity2"/>,
      where a concave down graph is shown along with some tangent lines.
      Notice how the tangent line on the left is steep,
      upward, corresponding to a greater
      (large positive)
      value of <m>\fp</m>.
      On the right, the tangent line is steep,
      downward, corresponding to a lesser
      (large negative)
      value of <m>\fp</m>.
    </p>

    <figure xml:id="fig_concavity2" vshift="-1">
      <caption>A function <m>f</m> with a concave down graph. Notice how the slopes of the tangent lines, when looking from left to right, are decreasing.</caption>
      <!-- START figures/fig_concavity2.tex -->
      <image width="47%">
        <shortdescription>
          A graph of a function with concave down curvature and tangent lines.
        </shortdescription>
        <description>
          <p>
            The image shows a graph of a concave down function <m>f</m> with tangent lines drawn at various points along the curve.
            The function forms a continuous curve that opens downwards.
            Tangent lines at points with x-values of <m>(-2, 1, 1, 2)</m> are shown, demonstrating how the slope of these lines decreases as we move from left to right across the graph.
            On the left side of the graph, the tangent lines slope upwards, indicating positive slopes, while on the right side, the tangent lines slope downwards, indicating negative slopes.
          </p>
        </description>
        <latex-image label="img_concavity2">
          \begin{tikzpicture}
            \begin{axis}[
                xmin=-3.5,
                xmax=3.5,
                ymin=-1,
                ymax=35,
              ]
              \addplot+[infinite,domain=-3:3] {-3*x^2+31};
              \addplot [tangentlineseg, domain =-3:-1] {12*(x+2)+19};
              \addplot [tangentlineseg, domain =1:3] {-12*(x-2)+19} ;
              \addplot [tangentlineseg, domain =-2.5:-.2] {6*(x+1)+28};
              \addplot [tangentlineseg, domain =.2:2.5] {-6*(x-1)+28} ;
            \end{axis}
          \end{tikzpicture}
        </latex-image>
      </image>
      <!-- figures/fig_concavity2.tex END -->
    </figure>

    <p>
      If a function is increasing and concave down,
      then its rate of increase is slowing;
      it is <q>leveling off.</q> If the function is decreasing and concave down,
      then the <em>rate</em> of decrease is decreasing.
      The function is decreasing at a faster and faster rate.
    </p>
    <aside vshift="-6">
      <title>Concavity Depravity</title>
      <p>
        A mnemonic for remembering what concave up/down means is:
        <q>Concave up is like a cup;
        concave down is like a frown.</q>
        It is admittedly terrible, but it works.
      </p>
    </aside>
    <p>
      Our definition of concave up and concave down is given in terms of when the first derivative is increasing or decreasing.
      We can apply the results of the previous section to find intervals on which a graph is concave up or down.
      That is, we recognize that <m>\fp</m> is increasing when <m>\fpp \gt 0</m>, etc.
    </p>

    <theorem xml:id="thm_concavity">
      <title>Test for Concavity</title>
      <statement>
        <p>
          Let <m>f</m> be twice differentiable on an interval <m>I</m>.
          The graph of <m>f</m> is concave up if <m>\fpp \gt 0</m> on <m>I</m>,
          and is concave down if <m>\fpp\lt 0</m> on <m>I</m>.
              <idx><h>concavity</h><h>test for</h></idx>
              <idx><h>concavity</h><h>inflection point</h></idx>
        </p>
      </statement>
    </theorem>
    <!-- Known issue: numbering is off here -->
    <!--ToDo: sbsgroup can't have a caption. Figure?-->
    <figure xml:id="fig_concavity3">
      <caption>Demonstrating the four ways that concavity interacts with increasing/decreasing, along with the relationships with the first and second derivatives</caption>
      <sbsgroup widths="20% 20%" margins="15%">
        <sidebyside>
          <figure>
            <caption><m>\fp\gt 0</m>, <m>f</m> increasing; <m>\fpp\lt0</m>, <m>f</m> is concave down</caption>
            <image>
              <shortdescription>
                A graph illustrating a function that is increasing and concave down.
              </shortdescription>
              <description>
                <p>
                  Diagram a shows a portion of a curve where the function <m>f</m> is increasing as the first derivative <m>\fp\gt 0</m> suggests.
                  Despite the increase, the curve is concave down, indicated by the second derivative <m>\fpp\lt0</m>, meaning the rate of increase is slowing down.
                </p>
              </description>
              <latex-image label="img_concavity3a">
                \begin{tikzpicture}
                  \draw [thick] (0,0) arc (180:90:2);
                \end{tikzpicture}
              </latex-image>
            </image>
          </figure>

          <figure>
            <caption><m>\fp\lt0</m>, <m>f</m> decreasing; <m>\fpp\lt0</m>, <m>f</m> is concave down</caption>
            <image>
              <shortdescription>
                A graph illustrating a function that is decreasing and concave down.
              </shortdescription>
              <description>
                <p>
                  Diagram b depicts a curve that is decreasing, with the first derivative <m>\fp\lt0</m>, and is also concave down, as shown by the second derivative <m>\fpp\lt0</m>.
                  This represents a function <m>f</m> that is decreasing at an increasing rate.
                </p>
              </description>
              <latex-image label="img_concavity3b">
                \begin{tikzpicture}
                  \draw [thick] (0,0) arc (90:0:2);
                \end{tikzpicture}
              </latex-image>
            </image>
          </figure>
        </sidebyside>

        <sidebyside>
          <figure>
            <caption><m>\fp\lt0</m>, <m>f</m> decreasing; <m>\fpp\gt 0</m>, <m>f</m> is concave up</caption>
            <image>
              <shortdescription>
                A graph illustrating a function that is decreasing and concave up.
              </shortdescription>
              <description>
                <p>
                  In diagram c, the curve represents a function <m>f</m> that is decreasing since <m>\fp\lt0</m>, but the concavity is up, which is indicated by the second derivative <m>\fpp\gt 0</m>.
                  This means the function is decreasing but the rate of decrease is slowing.
                </p>
              </description>
              <latex-image label="img_concavity3c">
                \begin{tikzpicture}
                  \draw [thick] (0,0) arc (180:270:2);
                \end{tikzpicture}
              </latex-image>
            </image>
          </figure>

          <figure>
            <caption><m>\fp\gt 0</m>, <m>f</m> increasing; <m>\fpp\gt 0</m>, <m>f</m> is concave up</caption>
            <image>
              <shortdescription>
                A graph illustrating a function that is increasing and concave up.
              </shortdescription>
              <description>
                <p>
                  Diagram d displays a curve that is increasing as the first derivative <m>\fp\gt 0</m> indicates, and it is concave up as the second derivative <m>\fpp\gt 0</m> confirms.
                  This represents a function <m>f</m> that is increasing at an increasing rate.
                </p>
              </description>
              <latex-image label="img_concavity3d">
                \begin{tikzpicture}
                  \draw [thick] (0,0) arc (0:-90:2);
                \end{tikzpicture}
              </latex-image>
            </image>
          </figure>
        </sidebyside>
      </sbsgroup>
    </figure>

    <p>
      If knowing where a graph is concave up/down is important,
      it makes sense that the places where the graph changes from one to the other is also important.
      This leads us to a definition.
    </p>

    <definition xml:id="def_infl">
      <title>Point of Inflection</title>
      <statement>
        <p>
          A <term>point of inflection</term>
          is a point on the graph of <m>f</m> at which the concavity of <m>f</m> changes.
              <idx><h>point of inflection</h></idx>
              <idx><h>inflection point</h></idx>
        </p>
      </statement>
    </definition>

    <p>
      <xref ref="fig_concavity4"/>
      shows a graph of a function with inflection points labeled.
    </p>

    <figure xml:id="fig_concavity4" vshift="1">
      <caption>A graph of a function with its inflection points marked. The intervals where concave up/down are also indicated.</caption>
      <!-- START figures/fig_concavity4.tex -->
      <image width="47%">
        <shortdescription>
          A graph depicting a function with labeled inflection points and concavity indications.
        </shortdescription>
        <description>
          <p>
            The image shows the graph of a function featuring distinct inflection points at <m>x=2</m> and <m>x=3</m>.
            The section of the function bounded by <m>x=0</m> and <m>x=2</m> is concave up with <m>\fpp\gt 0</m>, while the section between <m>x=2</m> and <m>x=3</m> is concave down with <m>\fpp\lt 0</m>.
            The section bouned by <m>x=3</m> and <m>x=4</m> is concave up with <m>\fpp\gt 0</m>.
          </p>
        </description>
        <latex-image label="img_concavity4">
          \begin{tikzpicture}
            \begin{axis}[
                xmin=-.5,
                xmax=4.5,
                ymin=-1,
                ymax=16,
              ]
              \addplot+[infinite,domain=.7:4.2, samples=40] {2*(x-1)*(x-2)*(x-3)*(x-4)+5};
              \addplot[soliddot] coordinates {(1.85,4.39) (3.15, 4.39)};
              \addplot[guideline] coordinates {(1.85,-1) (1.85,16)} node[left, anchor=north east] {\parbox{4em}{\flushright$\fpp&gt;0$, $f$ is concave up}};
              \addplot[guideline] coordinates {(3.15,-1) (3.15,16)} node[right, anchor=north west] {\parbox{4em}{\flushleft$\fpp&gt;0$, $f$ is concave up}};
              \draw (axis cs:2.5,16) node[anchor=north] {\parbox{4em}{\centering$\fpp&lt;0$, $f$ is concave down}};
            \end{axis}
          \end{tikzpicture}
        </latex-image>
      </image>
      <!-- figures/fig_concavity4.tex END -->
    </figure>

    <p>
      If the concavity of <m>f</m> changes at a point <m>(c,f(c))</m>,
      then <m> \fp </m>is changing from increasing to decreasing (or,
      decreasing to increasing) at <m>x=c</m>.
      That means that the sign of <m>\fpp</m>is changing from positive to negative (or,
      negative to positive) at <m>x=c</m>.
      A sign change <em>may</em> occur when <m>\fpp=0</m> or <m>\fpp</m> is undefined.
      This leads to the following theorem.
    </p>

    <theorem xml:id="thm_inflection">
      <title>Points of Inflection</title>
      <statement>
        <p>
          If <m>(c,f(c))</m> is a point of inflection on the graph of <m>f</m>,
          then either <m>\fpp(c)=0</m> or <m>\fpp</m> is not defined at <m>c</m>.
        </p>
      </statement>
    </theorem>

    <p>
      We have identified the concepts of concavity and points of inflection.
      It is now time to practice using these concepts;
      given a function,
      we should be able to find its points of inflection and identify intervals on which it is concave up or down.
      We do so in the following examples.
    </p>

    <example xml:id="ex_conc1">
      <title>Finding intervals of concave up/down, inflection points</title>
      <statement>
        <p>
          Let <m>f(x)=x^3-3x+1</m>.
          Find the inflection points of <m>f</m> and the intervals on which it is concave up/down.
        </p>
      </statement>
      <solution>
        <p>
          We start by finding <m>\fp(x)=3x^2-3</m> and <m>\fpp(x)=6x</m>.
          To find the inflection points,
          we use <xref ref="thm_inflection"/>
          and find where <m>\fpp(x)=0</m> or where <m> \fpp </m>is undefined.
          We find <m> \fpp </m>is always defined,
          and is <m>0</m> only when <m>x=0</m>.
          So the point <m>(0,f(0))=(0,1)</m> is the only possible point of inflection.
        </p>

        <p>
          This possible inflection point divides the real line into two intervals,
          <m>(-\infty,0)</m> and <m>(0,\infty)</m>.
          We use a process similar to the one used in the previous section to determine increasing/decreasing.
          Pick any <m>c\lt 0</m>;
          <m>\fpp(c)\lt 0</m> so <m>f</m> is concave down on <m>(-\infty,0)</m>.
          Pick any <m>c\gt 0</m>;
          <m>\fpp(c)\gt 0</m> so <m>f</m> is concave up on <m>(0,\infty)</m>.
          Since the concavity changes at <m>x=0</m>,
          the point <m>(0,1)</m> is an inflection point.
        </p>

        <p>
          The number line in <xref ref="fig_concline1"/>
          illustrates the process of determining concavity;
          <xref ref="fig_conc1"/>
          shows a graph of <m>f</m> and <m>\fpp</m>, confirming our results.
          Notice how <m>f</m> is concave down precisely when
          <m>\fpp(x)\lt 0</m> and concave up when <m>\fpp(x)\gt 0</m>.
        </p>

        <figure xml:id="fig_concline1" vshift="4">
          <caption>A number line determining the concavity of <m>f</m> in <xref ref="ex_conc1"/></caption>
          <!-- START figures/fig_concline1.tex -->

          <image width="47%">
            <shortdescription>
              A number line indicating the concavity of a function based on the second derivative.
            </shortdescription>
            <description>
              <p>
                The image illustrates a number line used to determine the concavity of a function <m>f</m>.
                The number line is divided at zero, with the left side showing <m>\fpp\lt 0</m>, indicating that the function is concave down in this region.
                Conversely, the right side of the number line where <m>\fpp\gt 0</m> indicates that the function is concave up.
              </p>
            </description>
            <latex-image label="img_concline1">
              \begin{tikzpicture}
                \begin{axis}[
                    numberline,
                    xmin=-0.9,
                    xmax=0.9,
                    after end axis/.code={
                      \path (axis cs:0,0)
                      node [anchor=north,yshift=-0.075cm] {\footnotesize 0};
                    },
                  ]
                  \addplot[guideline] coordinates {(0,0) (0,2)};
                  \addplot[mark=none] coordinates {(-0.5,1)} node {\parbox{8em}{\centering \small $\fpp&lt;0$\\$f$ is concave down}};
                  \addplot[mark=none] coordinates {(0.5,1)} node {\parbox{8em}{\centering \small $\fpp&gt;0$\\$f$ is concave up}};
                \end{axis}
              \end{tikzpicture}
            </latex-image>
          </image>
          <!-- figures/fig_concline1.tex END -->
        </figure>

        <figure xml:id="fig_conc1" vshift="-1">
          <caption>A graph of <m>f(x)</m> used in <xref ref="ex_conc1"/></caption>
          <!-- START figures/fig_conc1.tex -->
          <image width="47%">
            <shortdescription>
              A graph showing the a function and its second derivative.
            </shortdescription>
            <description>
              <p>
                The graph shows the function <m>f(x)</m> and its second derivative <m>\fpp</m>.
                The function <m>f(x)</m> exhibits both concave up and concave down behavior within different intervals.
                The second derivative <m>\fpp</m> crosses the <m>x</m>-axis at points where the concavity of <m>f(x)</m> changes, indicating the locations of possible inflection points.
                Above the <m>x</m>-axis, where <m>\fpp</m> is positive, the function <m>f(x)</m> is concave up. Below the <m>x</m>-axis, where <m>\fpp</m> is negative, the function <m>f(x)</m> is concave down.
              </p>
            </description>
            <latex-image label="img_conc1">
              \begin{tikzpicture}
                \begin{axis}[
                    xmin=-2.2,
                    xmax=2.2,
                    ymin=-3.5,
                    ymax=3.5,
                  ]
                  \addplot+[infinite,domain=-2.1:2,samples=60] {x^3-x*3+1} node[below right, pos=0.2] {$f(x)$}  ;
                  \addplot+[infinite,domain=-.5:.5] {6*x} node[below right]{$\fpp(x)$};
                \end{axis}
              \end{tikzpicture}
            </latex-image>
          </image>
          <!-- figures/fig_conc1.tex END -->
        </figure>
      </solution>
      <solution component="video" vshift="9">
        <title>Video solution</title>
        <video width="98%" youtube="n8TRVD_8sY0" label="vid_graphs_concav_ex_1" component="video"/>
      </solution>
    </example>

    <example xml:id="ex_conc2">
      <title>Finding intervals of concave up/down, inflection points</title>
      <statement>
        <p>
          Let <m>f(x)=x/(x^2-1)</m>.
          Find the inflection points of <m>f</m> and the intervals on which it is concave up/down.
        </p>
      </statement>
      <solution>
        <p>
          We need to find <m>\fp</m>and <m>\fpp</m>.
          Using the <xref ref="thm_QuotientRule" text="title"/> and simplifying, we find
          <md>
            <mrow>\fp(x)\amp=\frac{-(1+x^2)}{(x^2-1)^2}\amp\fpp(x)\amp= \frac{2x(x^2+3)}{(x^2-1)^3}</mrow>
          </md>.
        </p>

        <p>
          To find the possible points of inflection,
          we seek to find where <m>\fpp(x)=0</m> and where <m>\fpp</m> is not defined.
          Solving <m>\fpp(x)=0</m> reduces to solving <m>2x(x^2+3)=0</m>;
          we find <m>x=0</m>.
          We find that <m> \fpp </m>is not defined when <m>x=\pm 1</m>,
          for then the denominator of <m> \fpp </m>is <m>0</m>.
          We also note that <m>f</m> itself is not defined at <m>x=\pm1</m>,
          having a domain of <m>(-\infty,-1)\cup(-1,1)\cup(1,\infty)</m>.
          Since the domain of <m>f</m> is the union of three intervals,
          it makes sense that the concavity of <m>f</m> could switch across intervals.
          We technically cannot say that <m>f</m> has a point of inflection at <m>x=\pm1</m> as they are not part of the domain,
          but we must still consider these <m>x</m>-values to be important and will include them in our number line.
        </p>

        <p>
          The important <m>x</m>-values at which concavity might switch are <m>x=-1</m>,
          <m>x=0</m> and <m>x=1</m>,
          which split the number line into four intervals as shown in <xref ref="fig_concline2"/>.
          We determine the concavity on each.
          Keep in mind that all we are concerned with is the <em>sign</em>
          of <m> \fpp </m>on the interval.
        </p>

        <p>
          <dl>
            <li>
              <title>Interval 1: <m>(-\infty,-1)</m></title>
              <p>
                Select a number <m>c</m> in this interval with a large magnitude
                (for instance, <m>c=-100</m>).
                The denominator of <m>\fp'(x)</m> will be positive.
                In the numerator,
                the <m>\left(c^2+3\right)</m> factor will be positive and the <m>2c</m> factor will be negative.
                Thus the numerator is negative and <m>\fpp(c)</m> is negative.
                We conclude <m>f</m> is concave down on <m>(-\infty,-1)</m>.
              </p>
            </li>

            <li>
              <title>Interval 2: <m>(-1,0)</m></title>
              <p>
                For any number <m>c</m> in this interval,
                the factor <m>2c</m> in the numerator will be negative,
                the factor <m>\left(c^2+3\right)</m> in the numerator will be positive,
                and the factor <m>\left(c^2-1\right)^3</m> in the denominator will be negative.
                Thus <m>\fpp(c)\gt 0</m> and <m>f</m> is concave up on this interval.
              </p>
            </li>

            <li>
              <title>Interval 3: <m>(0,1)</m></title>
              <p>
                Any number <m>c</m> in this interval will be positive and <q>small.</q>
                Thus the numerator is positive while the denominator is negative.
                Thus <m>\fpp(c)\lt 0</m> and <m>f</m> is concave down on this interval.
              </p>
            </li>

            <li>
              <title>Interval 4: <m>(1,\infty)</m></title>
              <p>
                Choose a large value for <m>c</m>.
                It is evident that <m>\fpp(c)\gt 0</m>,
                so we conclude that <m>f</m> is concave up on <m>(1,\infty)</m>.
              </p>
            </li>
          </dl>
        </p>

        <figure xml:id="fig_concline2" vshift="10">
          <caption>Number line for <m>f</m> in <xref ref="ex_conc2"/></caption>

          <!-- START figures/fig_concline2.tex -->
          <image width="50%">
            <shortdescription>
              A number line indicating intervals of concavity for a function.
            </shortdescription>
            <description>
              <p>
                The image shows a number line that is used to determine the concavity of the function <m>f</m>.
                The line is divided into four intervals by the points <m>-1, 0</m> and <m>1</m>,
                each of which is an inflection point.
              </p>

              <p>
                The intervals are marked as follows:
                <ul>
                  <li>
                    <p>
                      For <m>x\lt -1</m>, <m>\fpp\lt 0</m>, and <m>f</m> is concave down.
                    </p>
                  </li>

                  <li>
                    <p>
                      For <m>-1\lt x\lt 0</m>, <m>\fpp\gt 0</m>, and <m>f</m> is concave up.
                    </p>
                  </li>

                  <li>
                    <p>
                      For <m>0\lt x\lt 1</m>, <m>\fpp\lt 0</m>, and <m>f</m> is concave down.
                    </p>
                  </li>

                  <li>
                    <p>
                      For <m>x\gt 1</m>, <m>\fpp\gt 0</m>, and <m>f</m> is concave up.
                    </p>
                  </li>
                </ul>
              </p>
            </description>
            <latex-image label="img_concline2">
              \begin{tikzpicture}
                \begin{axis}[
                    numberline,
                    xmin=-2,
                    xmax=2,
                    extra x ticks={-1, 1, 0},
                    extra x tick labels={$-1$,$1$, $0$},
                  ]
                  \addplot[guideline] coordinates {(-1,0) (-1,2)};
                  \addplot[guideline] coordinates {(0,0) (0,2)};
                  \addplot[guideline] coordinates {(1,0) (1,2)};
                  \addplot[mark=none] coordinates {(-1.5,1.5)} node {\parbox{3em}{\centering \small  $\fpp\lt0$\\$f$ conc down}};
                  \addplot[mark=none] coordinates {(-0.5,1.5)} node {\parbox{3em}{\centering \small  $\fpp&gt;0$\\$f$ conc up}};
                  \addplot[mark=none] coordinates {(0.5,1.5)} node {\parbox{3em}{\centering \small  $\fpp\lt0$\\$f$ conc down}};
                  \addplot[mark=none] coordinates {(1.5,1.5)} node {\parbox{3em}{\centering \small  $\fpp&gt;0$\\$f$ conc up}};
                \end{axis}
              \end{tikzpicture}
            </latex-image>
          </image>
          <!-- figures/fig_concline2.tex END -->
        </figure>

        <p>
          We conclude that <m>f</m> is concave up on <m>(-1,0)</m> and
          <m>(1,\infty)</m> and concave down on <m>(-\infty,-1)</m> and <m>(0,1)</m>.
          There is only one point of inflection,
          <m>(0,0)</m>, as <m>f</m> is not defined at <m>x=\pm 1</m>.
          Our work is confirmed by the graph of <m>f</m> in <xref ref="fig_conc2"/>.
          Notice how <m>f</m> is concave up whenever <m>\fpp</m>is positive,
          and concave down when <m>\fpp</m>is negative.
          The inflection in <m>f</m> occurs where <m>\fpp</m> changes sign.
        </p>

        <figure xml:id="fig_conc2" vshift="7">
          <caption>A graph of <m>f(x)</m> and <m>\fpp(x)</m> in <xref ref="ex_conc2"/></caption>
          <!-- START figures/fig_conc2.tex -->
          <image width="47%">
            <shortdescription>
              A graph comparing a function and its second derivative.
            </shortdescription>
            <description>
              <p>
                The graph displays two curves on the same set of axes: one for the function <m>f(x)</m> in blue and another for its second derivative <m>\fpp(x)</m> in red.
                The function <m>f(x)</m> shows a vertical asymptote, where the curve approaches but never reaches the line <m>x=0</m>.
                The red curve of the second derivative <m>\fpp(x)</m> also approaches this vertical asymptote.
                Both curves demonstrate that as <m>x</m> gets closer to zero from either side, the values of <m>f(x)</m> and <m>\fpp(x)</m> increase or decrease without bound, indicating a point of inflection at <m>x=0</m> for the function <m>f(x)</m>.
              </p>
            </description>
            <latex-image label="img_conc2">
              \begin{tikzpicture}
                \begin{axis}[
                    xmin=-3.2,
                    xmax=3.2,
                    ymin=-11,
                    ymax=11,
                  ]
                  \addplot[firstcurvestyle, infinite,samples=25, domain=-3.1:-1.05] {x/(x^2-1)};
                  \addplot[firstcurvestyle, infinite,samples=25, domain=-.95:.95] {x/(x^2-1)} node[left, pos=0.1]{$f(x)$};
                  \addplot[firstcurvestyle, infinite,samples=25, domain=1.05:3.1] {x/(x^2-1)};
                  \addplot[secondcurvestyle,infinite, samples=25, domain=-3.1:-1.5] {(2*x*(x^2+3))/((x^2-1)^3)};
                  \addplot[secondcurvestyle,infinite, samples=25, domain=-.5:.5] {(2*x*(x^2+3))/((x^2-1)^3)};
                  \addplot[secondcurvestyle, infinite,domain=1.5:3.1] {(2*x*(x^2+3))/((x^2-1)^3)} node[right, pos=0.1] {$\fpp(x)$};
                \end{axis}
              \end{tikzpicture}
            </latex-image>
          </image>
          <!-- figures/fig_conc2.tex END -->
        </figure>
      </solution>
      <solution component="video" vshift="0">
        <title>Video solution</title>
        <video width="98%" youtube="eC6QLbsuRVs" label="vid_graphs_concav_ex_2" component="video"/>
      </solution>
    </example>

    <p>
      Recall that relative maxima and minima of <m>f</m> are found at critical points of <m>f</m>;
      that is, they are found when
      <m>\fp(x)=0</m> or when <m>\fp</m> is undefined.
      Likewise, the relative maxima and minima of <m> \fp </m>are found when
      <m>\fpp(x)=0</m> or when <m> \fpp </m>is undefined;
      note that these are the inflection points of <m>f</m>.
    </p>

    <p>
      What does a <q>relative maximum of <m>\fp</m></q> <em>mean</em>?
      The derivative measures the rate of change of <m>f</m>;
      maximizing <m>\fp</m> means finding where <m>f</m> is increasing the most <mdash/> where <m>f</m> has the steepest tangent line.
      A similar statement can be made for minimizing <m>\fp</m>; it corresponds to where <m>f</m> has the steepest negatively-sloped tangent line.
    </p>

    <p>
      We utilize this concept in the next example.
    </p>

    <example xml:id="ex_conc3">
      <title>Understanding inflection points</title>
      <statement>
        <p>
          The sales of a certain product over a three-year span are modeled by <m>S(t)= t^4-8t^2+20</m>,
          where <m>t</m> is the time in years,
          shown in <xref ref="fig_conc3"/>.
          Over the first two years, sales are decreasing.
          Find the point at which sales are decreasing at their greatest rate.
        </p>

        <figure xml:id="fig_conc3" vshift="1">
          <caption>A graph of <m>S(t)</m> in <xref ref="ex_conc3"/>, modeling the sale of a product over time</caption>
          <!-- START figures/fig_conc3.tex -->
          <image width="47%">
            <shortdescription>
              A graph representing the sales model of a product over time.
            </shortdescription>
            <description>
              <p>
                The figure illustrates a graph of the function <m>S(t)</m>, which models the sales of a product over a three-year period.
                The sales are modeled by the equation <m>S(t)= t^4-8t^2+20</m>, where <m>t</m> is the time in years.
                The graph shows an initial decline in sales, reaching a minimum before rising again.
              </p>
            </description>
            <latex-image label="img_conc3">
              \begin{tikzpicture}
                \begin{axis}[
                    xmin=-.2,
                    xmax=3.2,
                    ymin=-1,
                    ymax=21,
                    xlabel={$t$},
                  ]
                  \addplot+[rightarrow, domain=0:2.8, samples=40] {x^4-8*x^2+20} node[above right, pos=0.3]{$S(t)$};
                \end{axis}
              \end{tikzpicture}
            </latex-image>
          </image>
          <!-- figures/fig_conc3.tex END -->
        </figure>
      </statement>
      <solution>
        <p>
          We want to maximize the rate of decrease,
          which is to say, we want to find where <m>S'</m> has a minimum.
          To do this, we find where <m>S''</m> is <m>0</m> and <m>S''</m> changes from negative to positive.
          We find <m>S'(t)=4t^3-16t</m> and <m>S''(t)=12t^2-16</m>.
          Setting <m>S''(t)=0</m> and solving,
          we get <m>t=\sqrt{4/3}\approx 1.16</m>
          (we ignore the negative solution for <m>t</m> since it does not lie in the domain of our function <m>S</m>).
        </p>

        <p>
          Since <m>S''(1)=-4\lt 0</m> and <m>S''(2)=32\gt 0</m>,
          we can say <m>S'(\sqrt{4/3})</m> is a local minimum of <m>S'</m>.
          This is both the inflection point and the point of maximum decrease.
          This is the point at which things first start looking up for the company.
          After the inflection point, sales are still decreasing,
          but not decreasing quite as quickly as they had been.
        </p>

        <p>
          A graph of <m>S(t)</m> and <m>S'(t)</m> is given in <xref ref="fig_conc3b"/>.
          When <m>S'(t)\lt 0</m>, sales are decreasing;
          note how at <m>t\approx 1.16</m>,
          <m>S'(t)</m> is minimized.
          That is, sales are decreasing at the fastest rate at <m>t\approx 1.16</m>.
          On the interval of <m>(1.16,2)</m>,
          <m>S</m> is decreasing but concave up,
          so the decline in sales is <q>leveling off.</q>
        </p>

        <figure xml:id="fig_conc3b" vshift="5">
          <caption>A graph of <m>S(t)</m> in <xref ref="ex_conc3"/>, along with <m>S'(t)</m></caption>
          <!-- START figures/fig_conc3b.tex -->
          <image width="47%">
            <shortdescription>
              A graph showing both the sales function and its rate of change over time.
            </shortdescription>
            <description>
              <p>
                The graph depicts two curves: the blue curve represents the sales function <m>S(t)</m>, and the red curve represents its rate of change, <m>S'(t)</m>, over a time period <m>t</m>.
                The sales function curve shows a parabolic shape, indicating a period of declining sales followed by an upturn.
                The rate of change curve <m>S'(t)</m> crosses the <m>t</m>-axis at its lowest point, signifying the moment when the sales rate is changing from decreasing to increasing.
                The point where <m>S'(t)</m> is most negative corresponds to the fastest rate of decrease in sales, which is the primary point of interest in this example.
              </p>
            </description>
            <latex-image label="img_conc3b">
              \begin{tikzpicture}
                \begin{axis}[
                    xmin=-.2,
                    xmax=3.2,
                    ymin=-16,
                    ymax=21,
                    xlabel={$t$},
                  ]
                  \addplot+[rightarrow,domain=0:2.8, samples=40] {x^4-8*x^2+20} node[above right, pos=0.3]{$S(t)$};
                  \addplot+[domain=0:3, samples=40] {4*x^3-16*x} node[below right, pos=0.2]{$S'(t)$};
                  \addplot[soliddot] coordinates {(1.16,11.04) (1.16,-12.32)};
                \end{axis}
              \end{tikzpicture}
            </latex-image>
          </image>
          <!-- figures/fig_conc3.tex END -->
        </figure>
      </solution>
      <!-- <solution component="video" vshift="2">
        <title>Video solution</title>
        <video width="98%" youtube="yjcSXaGkL5Y" label="vid_graphs_concav_ex_3" component="video"/>
      </solution> -->
    </example>

    <p>
      Not every critical point corresponds to a relative extrema;
      <m>f(x)=x^3</m> has a critical point at <m>(0,0)</m> but no relative maximum or minimum.
      Likewise, just because <m>\fpp(x)=0</m> we cannot conclude concavity changes at that point.
      We were careful before to use terminology
      <q><em>possible</em> point of inflection</q>
      since we needed to check to see if the concavity changed.
      The canonical example of <m>\fpp(x)=0</m> <em>without</em>
      concavity changing is <m>f(x)=x^4</m>.
      At <m>x=0</m>,
      <m>\fpp(x)=0</m> but <m>f</m> is always concave up,
      as shown in <xref ref="fig_concavity5"/>.
    </p>

    <figure xml:id="fig_concavity5" vshift="1.5">
      <caption>A graph of <m>f(x) = x^4</m>. Clearly <m>f</m> is always concave up, despite the fact that <m>\fpp(x) = 0</m> when <m>x=0</m>. In this example, the <em>possible</em> point of inflection <m>(0,0)</m> is not a point of inflection.</caption>
      <!-- START figures/fig_concavity5.tex -->
      <image width="47%">
        <shortdescription>
          A graph depicting a U-shaped curve representing a function raised to the fourth power.
        </shortdescription>
        <description>
          <p>
            The graph of <m>f(x) = x^4</m> illustrates a U-shaped curve that is concave up across its domain. Despite the second derivative <m>\fpp(x)</m> equalling zero when <m>x = 0</m>, indicating a potential inflection point, the function remains concave up on both sides of the <m>y</m>-axis.
          </p>
        </description>
        <latex-image label="img_concavity5">
          \begin{tikzpicture}
            \begin{axis}[
                xmin=-1.1,
                xmax=1.1,
                ymin=-.1,
                ymax=1.1,
              ]
              \addplot+[infinite,domain=-1:1] {x^4};
            \end{axis}
          \end{tikzpicture}
        </latex-image>
      </image>
      <!-- figures/fig_concavity5.tex END -->
    </figure>
  </subsection>

  <subsection>
    <title>The Second Derivative Test</title>
    <p>
      The first derivative of a function gave us a test to find if a critical value corresponded to a relative maximum, minimum,
      or neither.
      The second derivative gives us another way to test if a critical point is a local maximum or minimum.
      The following theorem officially states something that is intuitive:
      if a critical value occurs in a region where a function <m>f</m> is concave up,
      then that critical value must correspond to a relative minimum of <m>f</m>, etc.
      See <xref ref="fig_concavity6"/> for a visualization of this.
    </p>

    <figure xml:id="fig_concavity6" vshift="-1.5">
      <caption>Demonstrating the fact that relative maxima occur when the graph is concave down and relative minima occur when the graph is concave up</caption>
      <!-- START figures/fig_concavity6.tex -->
      <image width="47%">
        <shortdescription>
          A graph depicting points of maximum and minimum on a curve with changing concavity.
        </shortdescription>
        <description>
          <p>
            The figure showcases a curve that illustrates the concepts of relative maxima and minima in relation to concavity.
            The curve rises upwards, dips downward and then rises upward again, forming a valley-like shape.
            At the peak of the first curve, where the shape is bending downwards indicating concave down, a point is marked at <m>(-1, 10)</m> signifying a relative maximum.
            Similarly, at the lowest point in the valley at <m>(1,-10)</m>, where the curve starts to bend upwards denoted as concave up, a point signifies a relative minimum.
          </p>
        </description>
        <latex-image label="img_concavity6">
          \begin{tikzpicture}
            \begin{axis}[
                xmin=-2.1,
                xmax=2.1,
                ymin=-11,
                ymax=11,
              ]
              \addplot+[infinite,domain=-2:2, samples=50] {5*x^3-15*x};
              \addplot[soliddot] coordinates {(-1,10) (1,-10)};
              \addplot[mark=none] coordinates {(-1,7.5)} node {\parbox{6em}{\centering concave down\\$\implies$ rel max}};
              \addplot[mark=none] coordinates {(1,-7.5)} node {\parbox{6em}{\centering concave up\\$\implies$ rel min}};
            \end{axis}
          \end{tikzpicture}
        </latex-image>
      </image>
      <!-- figures/fig_concavity6.tex END -->
    </figure>

    <theorem xml:id="thm_second_der">
      <title>The Second Derivative Test</title>
      <statement>
        <p>
          Let <m>c</m> be a critical value of <m>f</m> where <m>\fpp(c)</m> is defined.
          <idx><h>derivative</h><h>Second Deriv.
          Test</h></idx>
              <idx><h>Second Derivative Test</h></idx>
              <idx><h>extrema</h><h>and Second Deriv. Test</h></idx>
              <idx><h>maximum</h><h>and Second Deriv. Test</h></idx>
              <idx><h>minimum</h><h>and First Deriv. Test</h></idx>

          <ol>
            <li>
              <p>
                If <m>\fpp(c)\gt 0</m>,
                then <m>f</m> has a local minimum at <m>(c,f(c))</m>.
              </p>
            </li>

            <li>
              <p>
                If <m>\fpp(c)\lt 0</m>,
                then <m>f</m> has a local maximum at <m>(c,f(c))</m>.
              </p>
            </li>
          </ol>
        </p>
      </statement>
    </theorem>

    <figure xml:id="vid_graphs_concav_second_deriv_test" component="video" vshift="-4">
      <caption>Video presentation of <xref ref="thm_second_der"/></caption>
      <video youtube="4hWldEUoG2U" label="vid_graphs_concav_second_deriv_test"/>
    </figure>

    <p>
      The Second Derivative Test relates to the <xref ref="thm_first_der" text="title"/> in the following way.
      If <m>\fpp(c)\gt 0</m>,
      then the graph is concave up at a critical point <m>c</m> and <m>\fp</m> itself is growing.
      Since <m>\fp(c)=0</m> and <m>\fp</m> is growing at <m>c</m>,
      then it must go from negative to positive at <m>c</m>.
      This means the function goes from decreasing to increasing,
      indicating a local minimum at <m>c</m>.
    </p>

    <example xml:id="ex_conc4">
      <title>Using the Second Derivative Test</title>
      <statement>
        <p>
          Let <m>f(x)=100/x + x</m>.
          Find the critical points of <m>f</m> and use the <xref ref="thm_second_der" text="title"/> to label them as relative maxima or minima.
        </p>
      </statement>
      <solution>
        <p>
          We find <m>\fp(x)=-100/x^2+1</m> and <m>\fpp(x) = 200/x^3</m>.
          We set <m>\fp(x)=0</m> and solve for <m>x</m> to find the critical values
          (note that <m>\fp</m> is not defined at <m>x=0</m>,
          but neither is <m>f</m> so this is not a critical value.)
          We find the critical values are <m>x=\pm 10</m>.
          We now evaluate the second derivative at these critical numbers.
          Evaluating <m> \fpp(10)=0.1\gt 0</m>,
          so there is a local minimum at <m>x=10</m>.
          Evaluating <m>\fpp(-10)=-0.1\lt 0</m>,
          determining a relative maximum at <m>x=-10</m>.
          These results are confirmed in <xref ref="fig_conc4"/>.
        </p>

        <figure xml:id="fig_conc4" vshift="-6">
          <caption>A graph of <m>f(x)</m> in <xref ref="ex_conc4"/>. The second derivative is evaluated at each critical point. When the graph is concave up, the critical point represents a local minimum; when the graph is concave down, the critical point represents a local maximum.</caption>
          <!-- START figures/fig_conc4.tex -->
          <image width="47%">
            <shortdescription>
              A graph illustrating the evaluation of the second derivative at critical points.
            </shortdescription>
            <description>
              <p>
                This graph depicts a function <m>f(x)</m> with two marked critical points where the second derivative <m>\fpp(x)</m> has been evaluated.
                On the left, a point at <m>x = -10</m> is marked with <m>\fpp(-10)\lt 0</m>, indicating that the graph is concave down at this point, which typically corresponds to a local maximum.
                On the right, a point at <m>x = 10</m> is marked with <m>\fpp(10)\gt 0</m>, signifying that the graph is concave up at this point, suggesting the presence of a local minimum.
              </p>
            </description>
            <latex-image label="img_conc4">
              \begin{tikzpicture}
                \begin{axis}[
                    xmin=-21,
                    xmax=21,
                    ymin=-51,
                    ymax=51,
                  ]
                  \addplot+[infinite,domain=-20:-2.2] {100/x+x};
                  \addplot[firstcurvestyle,domain=2.2:20] {100/x+x};
                  \addplot[soliddot] coordinates{(10,20)} node [below] {$\fpp(10)&gt;0$};
                  \addplot[soliddot] coordinates{(-10,-20)} node [above] {$\fpp(-10)\lt0$};
                \end{axis}
              \end{tikzpicture}
            </latex-image>
          </image>
          <!-- figures/fig_conc4.tex END -->
        </figure>
      </solution>
      <solution component="video" vshift="2">
        <title>Video solution</title>
        <video width="98%" youtube="_DhmPXRZfi8" label="vid_graphs_concav_ex_4" component="video"/>
      </solution>
    </example>

    <p>
      The second derivative test can only be used on a function that is twice differentiable at <m>c</m>.
      For functions that are not twice differentiable at <m>c</m>,
      you will need to use the <xref ref="thm_first_der" text="title"/>.
      If you've already determined the sign diagram for <m>\fp</m>,
      the <xref ref="thm_first_der" text="title"/> is usually
      easier to apply, and it applies in cases when
      <xref ref="thm_first_der" text="title"/> does not.
    </p>
    
    <p>
      We have been learning how the first and second derivatives of a function relate information about the graph of that function.
      We have found intervals of increasing and decreasing,
      intervals where the graph is concave up and down,
      along with the locations of relative extrema and inflection points.
      In <xref ref="chapter_limits"/>
      we saw how limits explained asymptotic behavior.
      In the next section we combine all of this information to produce accurate sketches of functions.
    </p>
  </subsection>

  <reading-questions xml:id="TaC-graph-concavity">
    <exercise label="TaC-graph-concavity-1">
        <statement>
          <p>
            Sketch a graph of a function <m>f(x)</m> that is concave up on <m>(0,1)</m> and is concave down on <m>(1,2)</m>.
          </p>
        </statement>
        <!-- <answer>
          <p>
            Answers will vary.
          </p>
        </answer> -->
      </exercise>

      <exercise label="TaC-graph-concavity-2">
        <statement>
          <p>
            Sketch a graph of a function <m>f(x)</m> that is:
          </p>

          <p>
            <ul>
              <li>
                increasing, concave up on <m>(0,1)</m>,
              </li>

              <li>
                increasing, concave down on <m>(1,2)</m>,
              </li>

              <li>
                decreasing, concave down on <m>(2,3)</m>, and
              </li>

              <li>
                increasing, concave down on <m>(3,4)</m>.
              </li>
            </ul>
          </p>
        </statement>
        <!-- <answer>
          <p>
            Answers will vary.
          </p>
        </answer> -->
      </exercise>

      <exercise label="TaC-graph-concavity-3">
        <statement>
          <p>
            Is is possible for a function to be increasing and concave down on
            <m>(0,\infty)</m> with a horizontal asymptote of <m>y=1</m>?
            If so, give a sketch of such a function.
          </p>
        </statement>
        <!-- <answer>
          <p>
            Yes; Answers will vary.
          </p>
        </answer> -->
      </exercise>

      <exercise label="TaC-graph-concavity-4">
        <statement>
          <p>
            Is is possible for a function to be increasing and concave up on
            <m>(0,\infty)</m> with a horizontal asymptote of <m>y=1</m>?
            If so, give a sketch of such a function.
          </p>
        </statement>
        <!-- <answer>
          <p>
            No.
          </p>
        </answer> -->
      </exercise>
  </reading-questions>

  <exercises>
    <!-- <subexercises xml:id="TaC-graph-concavity">
      <title>Terms and Concepts</title>

      
    </subexercises>

    <subexercises>
      <title>Problems</title> -->

      <exercisegroup cols="2" xml:id="exset-graph-concavity-sketch-second">
        <!-- The graphing element of these problems makes them inapproprtiate for WeBWorK. -->
        <introduction>
          <p>
            A function <m>f(x)</m> is given.
            Graph <m>f</m> and <m>\fpp</m> on the same axes
            (using technology is permitted)
            and verify <xref ref="thm_concavity"/>.
          </p>
        </introduction>

        <exercise label="ex-graph-concavity-sketch-second-1">
          <statement>
            <p>
              <m>f(x) = -7x+3</m>
            </p>
          </statement>
        </exercise>

        <exercise label="ex-graph-concavity-sketch-second-2">
          <statement>
            <p>
              <m>f(x) = -4x^2+3x-8</m>
            </p>
          </statement>
        </exercise>

        <exercise label="ex-graph-concavity-sketch-second-3">
          <statement>
            <p>
              <m>f(x) = 4x^2+3x-8</m>
            </p>
          </statement>
        </exercise>

        <exercise label="ex-graph-concavity-sketch-second-4">
          <statement>
            <p>
              <m>f(x) = x^3-3x^2+x-1</m>
            </p>
          </statement>
        </exercise>

        <exercise label="ex-graph-concavity-sketch-second-5">
          <statement>
            <p>
              <m>f(x) = -x^3+x^2-2x+5</m>
            </p>
          </statement>
        </exercise>

        <!-- <exercise>
          <statement>
            <p>
              <m>f(x) = \cos(x)</m>
            </p>
          </statement>
        </exercise> -->

        <exercise label="ex-graph-concavity-sketch-second-6">
          <statement>
            <p>
              <m>f(x) = \sin(x)</m>
            </p>
          </statement>
        </exercise>

        <exercise label="ex-graph-concavity-sketch-second-7">
          <statement>
            <p>
              <m>f(x) = \tan(x)</m>
            </p>
          </statement>
        </exercise>

        <exercise label="ex-graph-concavity-sketch-second-8">
          <statement>
            <p>
              <m>f(x) = \dfrac{1}{x^2+1}</m>
            </p>
          </statement>
        </exercise>

        <exercise label="ex-graph-concavity-sketch-second-9">
          <statement>
            <p>
              <m>f(x) = \frac{1}{x}</m>
            </p>
          </statement>
        </exercise>

        <exercise label="ex-graph-concavity-sketch-second-10">
          <statement>
            <p>
              <m>f(x) = \frac{1}{x^2}</m>
            </p>
          </statement>
        </exercise>
      </exercisegroup>

      <exercisegroup cols="2" xml:id="exercisegroup-concavity">
        <introduction>
          <p>
            A function <m>f(x)</m> is given.
            <ol marker="(a)">
              <li>
                <p>
                  Find the possible points of inflection of <m>f</m>.
                </p>
              </li>
              <li>
                <p>
                  Find the intervals on which the graph of <m>f</m> is concave up.
                </p>
              </li>
              <li>
                <p>
                  Find the intervals on which the graph of <m>f</m> is concave down.
                </p>
              </li>
            </ol>
          </p>
        </introduction>

        <exercise label="ex-graph-concavity-intervals-1">
          <webwork xml:id="webwork-ex-graph-concavity-intervals-1">
            <pg-code>
              $r = non_zero_random(-9,9,1);
              if($envir{problemSeed}==1){$r=1;};
              Context()-&gt;noreduce('(-x)-y','(-x)+y');
              $f = Formula("x^2 - 2*$r x + ($r)^2")-&gt;reduce;
              $inflecs = List(Compute("None"));
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("(-inf,inf)"));
              $dn = List(Compute("None"));
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the possible points of inflection,
                separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$inflecs" width="30"/>
              </p>
              <instruction>
                List the maximal intervals where <m>f</m> is concave up,
                using interval notation,
                and separating with commas if needed.
                If there are no such intervals,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$up" width="30"/>
              </p>
              <instruction>
                List the maximal intervals where <m>f</m> is concave down,
                using interval notation,
                and separating with commas if needed.
                If there are no such intervals,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$dn" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The possible points of inflection are <m><var name="$inflecs"/></m>.
                The function is concave up on <m><var name="$up"/></m> and concave down on <m><var name="$dn"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-intervals-2">
          <webwork xml:id="webwork-ex-graph-concavity-intervals-2">
            <pg-code>
              ($a,$b) = (-9..-1,1..9)[NchooseK(18,2)];
              if($envir{problemSeed}==1){$a=-5; $b=7};
              Context()-&gt;noreduce('(-x)-y','(-x)+y');
              $f = Formula("-x^2 + $a x + $b")-&gt;reduce;
              $inflecs = List(Compute("None"));
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Compute("None"));
              $dn = List(Interval("(-inf,inf)"));
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the possible points of inflection,
                separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$inflecs" width="30"/>
              </p>
              <instruction>
                List the maximal intervals where <m>f</m> is concave up,
                using interval notation,
                and separating with commas if needed.
                If there are no such intervals,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$up" width="30"/>
              </p>
              <instruction>
                List the maximal intervals where <m>f</m> is concave down,
                using interval notation,
                and separating with commas if needed.
                If there are no such intervals,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$dn" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The possible points of inflection are <m><var name="$inflecs"/></m>.
                The function is concave up on <m><var name="$up"/></m> and concave down on <m><var name="$dn"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-intervals-3">
          <webwork xml:id="webwork-ex-graph-concavity-intervals-3">
            <pg-code>
              $s = random(1,9,1);
              $c = non_zero_random(-9,9,1);
              if($envir{problemSeed}==1){$s=1; $c=1;};
              Context()-&gt;noreduce('(-x)-y','(-x)+y');
              $f = Formula("x^3 - $s x + $c")-&gt;reduce;
              $inflecs = List(0);
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("[0,inf)"));
              $dn = List(Interval("(-inf,0]"));
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the possible points of inflection,
                separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$inflecs" width="30"/>
              </p>
              <instruction>
                List the maximal intervals where <m>f</m> is concave up,
                using interval notation,
                and separating with commas if needed.
                If there are no such intervals,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$up" width="30"/>
              </p>
              <instruction>
                List the maximal intervals where <m>f</m> is concave down,
                using interval notation,
                and separating with commas if needed.
                If there are no such intervals,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$dn" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The possible points of inflection are <m><var name="$inflecs"/></m>.
                The function is concave up on <m><var name="$up"/></m> and concave down on <m><var name="$dn"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-intervals-4">
          <webwork xml:id="webwork-ex-graph-concavity-intervals-4">
            <pg-code>
              $a = non_zero_random(-9,9,1);
              $b = non_zero_random(-9,9,1);
              $c = ($a &gt; 0) ? random(int(($b)**2/(3*$a))+1,int(($b)**2/(3*$a))+9,1) : random(int(($b)**2/(3*$a))-9,int(($b)**2/(3*$a))-1,1);
              $d = non_zero_random(-9,9,1);
              if($envir{problemSeed}==1){$a=2; $b=-3; $c=9; $d=5};
              Context()-&gt;noreduce('(-x)-y','(-x)+y');
              $f = Formula("$a x^3 + $b x^2 + $c x + $d")-&gt;reduce;
              Context("Fraction");
              $i = Fraction(-2*$b,6*$a);
              $inflecs = List($i);
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("[$i,inf)"));
              $dn = List(Interval("(-inf,$i]"));
              ($up,$dn) = ($dn,$up) if ($a &lt; 0);
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the possible points of inflection,
                separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$inflecs" width="30"/>
              </p>
              <instruction>
                List the maximal intervals where <m>f</m> is concave up,
                using interval notation,
                and separating with commas if needed.
                If there are no such intervals,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$up" width="30"/>
              </p>
              <instruction>
                List the maximal intervals where <m>f</m> is concave down,
                using interval notation,
                and separating with commas if needed.
                If there are no such intervals,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$dn" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The possible points of inflection are <m><var name="$inflecs"/></m>.
                The function is concave up on <m><var name="$up"/></m> and concave down on <m><var name="$dn"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-intervals-5">
          <webwork xml:id="webwork-ex-graph-concavity-intervals-5">
            <pg-code>
              $s = non_zero_random(-9,9,1);
              $k = ($s % 2 == 0) ? non_zero_random(2,8,2) : non_zero_random(1,9,2);
              $d = non_zero_random(-9,9,1);
              if($envir{problemSeed}==1){$s=-1; $k=-1; $d=3;};
              $r = ($s + $k)/-2;
              $t = $k*$s;
              Context("Fraction");
              $b = Fraction(-($r+2*$s),3);
              ($bn,$bd) = $b-&gt;value;
              $c = -$r*(($s)**2+$t);
              Context()-&gt;noreduce('(-x)-y','(-x)+y');
              $f = Formula("x^4/4 + $bn x^3/$bd + $c x + $d")-&gt;reduce;
              $i = Fraction(3*$s-$k,3);
              ($i,$j) = num_sort($i,0);
              $inflecs = List($i,$j);
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("(-inf,$i]"),Interval("[$j,inf)"));
              $dn = List(Interval("[$i,$j]"));
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the possible points of inflection,
                separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$inflecs" width="30"/>
              </p>
              <instruction>
                List the maximal intervals where <m>f</m> is concave up,
                using interval notation,
                and separating with commas if needed.
                If there are no such intervals,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$up" width="30"/>
              </p>
              <instruction>
                List the maximal intervals where <m>f</m> is concave down,
                using interval notation,
                and separating with commas if needed.
                If there are no such intervals,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$dn" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The possible points of inflection are <m><var name="$inflecs"/></m>.
                The function is concave up on <m><var name="$up"/></m> and concave down on <m><var name="$dn"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-intervals-6">
          <webwork xml:id="webwork-ex-graph-concavity-intervals-6">
            <pg-code>
              ($r,$s,$t) = (-5..-1,1..5)[NchooseK(10,3)];
              $k = list_random(-12,-8,-4,4,8,12);
              if ($k % 3 != 0) {
                do {$t = non_zero_random(-($r+$s) % 3 - 6, -($r+$s) % 3 + 6, 3)} until ($t != $r and $t != $s);
              }
              ($r,$s,$t) = num_sort($r,$s,$t);
              $e = non_zero_random(-9,9,1);
              if($envir{problemSeed}==1){$r=-1; $s=1; $t=2; $k=12;};
              $a = $k/4;
              $b = $k*($r+$s+$t)/3;
              $c = $k*($s*$t+$r*$s+$r*$t)/2;
              $d = $k*$r*$s*$t;
              Context("Fraction");
              Context()-&gt;noreduce('(-x)-y','(-x)+y');
              $f = Formula("$a x^4 + $b x^3 + $c x^2 + $d x + $e")-&gt;reduce;
              $disc = 9*($b)**2 - 24*$a*$c;
              ($discsquare,$discnonsquare) = (1,$disc);
              for my $p (2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251) {
                while ($discnonsquare % ($p**2) == 0) {
                  ($discsquare,$discnonsquare) = ($discsquare * $p**2, $discnonsquare / $p**2);
                }
              }
              $G = gcd(gcd(3*$b,sqrt($discsquare)),12*$a);
              $A = -3*$b/$G;
              $B = sqrt($discsquare)/$G;
              $C = 12*$a/$G;
              if ($discnonsquare == 1) {
                $i = Fraction($A+$B,$C);
                $j = Fraction($A-$B,$C);
              } else {
                $i = Formula("($A+$B sqrt($discnonsquare))/$C");
                $j = Formula("($A-$B sqrt($discnonsquare))/$C");
              }
              ($i,$j) = num_sort($i,$j);
              $inflecs = List($i,$j);
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("(-inf,$i]"),Interval("[$j,inf)"));
              $dn = List(Interval("[$i,$j]"));
              ($up,$dn) = ($dn,$up) if ($a &lt; 0);
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the possible points of inflection,
                separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$inflecs" width="30"/>
              </p>
              <instruction>
                List the maximal intervals where <m>f</m> is concave up,
                using interval notation,
                and separating with commas if needed.
                If there are no such intervals,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$up" width="30"/>
              </p>
              <instruction>
                List the maximal intervals where <m>f</m> is concave down,
                using interval notation,
                and separating with commas if needed.
                If there are no such intervals,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$dn" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The possible points of inflection are <m><var name="$inflecs"/></m>.
                The function is concave up on <m><var name="$up"/></m> and concave down on <m><var name="$dn"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-intervals-7">
          <webwork xml:id="webwork-ex-graph-concavity-intervals-7">
            <pg-code>
              $r = non_zero_random(-4,4,1);
              if($envir{problemSeed}==1){$r=1;};
              $a = 1;
              $b = -4*$r;
              $c = 6*($r**2);
              $d = -4*($r**3);
              $e = ($r)**4;
              Context()-&gt;noreduce('(-x)-y','(-x)+y');
              $f = Formula("$a x^4 + $b x^3 + $c x^2 + $d x + $e")-&gt;reduce;
              $inflecs = List($r);
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("(-inf,inf)"));
              $dn = List(Compute("none"));
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the possible points of inflection,
                separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$inflecs" width="30"/>
              </p>
              <instruction>
                List the maximal intervals where <m>f</m> is concave up,
                using interval notation,
                and separating with commas if needed.
                If there are no such intervals,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$up" width="30"/>
              </p>
              <instruction>
                List the maximal intervals where <m>f</m> is concave down,
                using interval notation,
                and separating with commas if needed.
                If there are no such intervals,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$dn" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The possible points of inflection are <m><var name="$inflecs"/></m>.
                The function is concave up on <m><var name="$up"/></m> and concave down on <m><var name="$dn"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-intervals-8">
          <webwork xml:id="webwork-ex-graph-concavity-intervals-8">
            <pg-code>
              $f = Formula("sec(x)");
              $inflecs = List(Compute("none"));
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("(-pi/2,pi/2)"));
              $dn = List(Interval("(-3pi/2,-pi/2)"),Interval("(pi/2,3pi/2)"));
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m> on <m>(-3\pi/2,3\pi/2)</m>
              </p>
              <instruction>
                Enter the possible points of inflection,
                separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$inflecs" width="30"/>
              </p>
              <instruction>
                List the maximal intervals where <m>f</m> is concave up,
                using interval notation,
                and separating with commas if needed.
                If there are no such intervals,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$up" width="30"/>
              </p>
              <instruction>
                List the maximal intervals where <m>f</m> is concave down,
                using interval notation,
                and separating with commas if needed.
                If there are no such intervals,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$dn" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The possible points of inflection are <m><var name="$inflecs"/></m>.
                The function is concave up on <m><var name="$up"/></m> and concave down on <m><var name="$dn"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-intervals-9">
          <webwork xml:id="webwork-ex-graph-concavity-intervals-9">
            <pg-code>
              $r = random(-9,9,1);
              $s = random(1,9,1);
              if($envir{problemSeed}==1){$r=0; $s = 1;};
              $b = -2*$r;
              $c = ($r**2) + $s;
              Context()-&gt;noreduce('(-x)-y','(-x)+y');
              $f = Formula("1/(x^2 + $b x + $c)")-&gt;reduce;
              $disc = 3*$s;
              ($discsquare,$discnonsquare) = (1,$disc);
              for my $p (2,3,5) {
                while ($discnonsquare % ($p**2) == 0) {
                  ($discsquare,$discnonsquare) = ($discsquare * $p**2, $discnonsquare / $p**2);
                }
              }
              $G = gcd(gcd(3*$3,sqrt($discsquare)),3);
              $A = 3*$r/$G;
              $B = sqrt($discsquare)/$G;
              $C = 3/$G;
              Context("Fraction");
              if ($discnonsquare == 1) {
                $i = Fraction($A+$B,$C);
                $j = Fraction($A-$B,$C);
              } else {
                $i = Formula("($A+$B sqrt($discnonsquare))/$C");
                $j = Formula("($A-$B sqrt($discnonsquare))/$C");
              }
              ($i,$j) = num_sort($i,$j);
              $inflecs = List($i,$j);
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("(-inf,$i]"),Interval("[$j,inf)"));
              $dn = List(Interval("[$i,$j]"));
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the possible points of inflection,
                separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$inflecs" width="30"/>
              </p>
              <instruction>
                List the maximal intervals where <m>f</m> is concave up,
                using interval notation,
                and separating with commas if needed.
                If there are no such intervals,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$up" width="30"/>
              </p>
              <instruction>
                List the maximal intervals where <m>f</m> is concave down,
                using interval notation,
                and separating with commas if needed.
                If there are no such intervals,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$dn" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The possible points of inflection are <m><var name="$inflecs"/></m>.
                The function is concave up on <m><var name="$up"/></m> and concave down on <m><var name="$dn"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-intervals-10">
          <webwork xml:id="webwork-ex-graph-concavity-intervals-10">
            <pg-code>
              ($r,$s) = num_sort((-9..-1,1..9)[NchooseK(18,2)]);
              if($envir{problemSeed}==1){$r=-1; $s = 1;};
              $b = -$r - $s;
              $c = $r*$s;
              Context()-&gt;noreduce('(-x)-y','(-x)+y');
              $f = Formula("1/(x^2 + $b x + $c)")-&gt;reduce;
              $inflecs = List(Compute("none"));
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("(-inf,$r)"),Interval("($s,inf)"));
              $dn = List(Interval("($r,$s)"));
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the possible points of inflection,
                separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$inflecs" width="30"/>
              </p>
              <instruction>
                List the maximal intervals where <m>f</m> is concave up,
                using interval notation,
                and separating with commas if needed.
                If there are no such intervals,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$up" width="30"/>
              </p>
              <instruction>
                List the maximal intervals where <m>f</m> is concave down,
                using interval notation,
                and separating with commas if needed.
                If there are no such intervals,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$dn" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The possible points of inflection are <m><var name="$inflecs"/></m>.
                The function is concave up on <m><var name="$up"/></m> and concave down on <m><var name="$dn"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-intervals-11">
          <webwork xml:id="webwork-ex-graph-concavity-intervals-11">
            <pg-code>
              $f = Formula("sin(x) + cos(x)");
              $inflecs = List(Compute("-pi/4"),Compute("3pi/4"));
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("(-pi,-pi/4]"),Interval("[3pi/4,pi)"));
              $dn = List(Interval("[-pi/4,3pi/4]"));
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m> on <m>(-\pi,\pi)</m>
              </p>
              <instruction>
                Enter the possible points of inflection,
                separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$inflecs" width="30"/>
              </p>
              <instruction>
                List the maximal intervals where <m>f</m> is concave up,
                using interval notation,
                and separating with commas if needed.
                If there are no such intervals,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$up" width="30"/>
              </p>
              <instruction>
                List the maximal intervals where <m>f</m> is concave down,
                using interval notation,
                and separating with commas if needed.
                If there are no such intervals,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$dn" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The possible points of inflection are <m><var name="$inflecs"/></m>.
                The function is concave up on <m><var name="$up"/></m> and concave down on <m><var name="$dn"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-intervals-12">
          <webwork xml:id="webwork-ex-graph-concavity-intervals-12">
            <pg-code>
              $f = Formula("x^2e^x");
              $inflecs = List(Compute("-2+sqrt(2)"),Compute("-2-sqrt(2)"));
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("(-inf,-2-sqrt(2)]"),Interval("[-2+sqrt(2),inf)"));
              $dn = List(Interval("[-2-sqrt(2),-2+sqrt(2)]"));
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the possible points of inflection,
                separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$inflecs" width="30"/>
              </p>
              <instruction>
                List the maximal intervals where <m>f</m> is concave up,
                using interval notation,
                and separating with commas if needed.
                If there are no such intervals,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$up" width="30"/>
              </p>
              <instruction>
                List the maximal intervals where <m>f</m> is concave down,
                using interval notation,
                and separating with commas if needed.
                If there are no such intervals,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$dn" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The possible points of inflection are <m><var name="$inflecs"/></m>.
                The function is concave up on <m><var name="$up"/></m> and concave down on <m><var name="$dn"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-intervals-13">
          <webwork xml:id="webwork-ex-graph-concavity-intervals-13">
            <pg-code>
              $f = Formula("x^2ln(x)");
              $inflecs = List(Compute("1/e^(3/2)"));
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("[1/e^(3/2),inf)"));
              $dn = List(Interval("(0,1/e^(3/2)]"));
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the possible points of inflection,
                separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$inflecs" width="30"/>
              </p>
              <instruction>
                List the maximal intervals where <m>f</m> is concave up,
                using interval notation,
                and separating with commas if needed.
                If there are no such intervals,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$up" width="30"/>
              </p>
              <instruction>
                List the maximal intervals where <m>f</m> is concave down,
                using interval notation,
                and separating with commas if needed.
                If there are no such intervals,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$dn" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The possible points of inflection are <m><var name="$inflecs"/></m>.
                The function is concave up on <m><var name="$up"/></m> and concave down on <m><var name="$dn"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-intervals-14">
          <webwork xml:id="webwork-ex-graph-concavity-intervals-14">
            <pg-code>
              $f = Formula("e^(-x^2)");
              $inflecs = List(Compute("1/sqrt(2)"),Compute("-1/sqrt(2)"));
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("(-inf,-1/sqrt(2)]"),Interval("[1/sqrt(2),inf)"));
              $dn = List(Interval("[-1/sqrt(2),1/sqrt(2)]"));
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the possible points of inflection,
                separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$inflecs" width="30"/>
              </p>
              <instruction>
                List the maximal intervals where <m>f</m> is concave up,
                using interval notation,
                and separating with commas if needed.
                If there are no such intervals,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$up" width="30"/>
              </p>
              <instruction>
                List the maximal intervals where <m>f</m> is concave down,
                using interval notation,
                and separating with commas if needed.
                If there are no such intervals,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$dn" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The possible points of inflection are <m><var name="$inflecs"/></m>.
                The function is concave up on <m><var name="$up"/></m> and concave down on <m><var name="$dn"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>
      </exercisegroup>

      <exercisegroup cols="2" xml:id="exset-graph-concavity-second-test">
        <introduction>
          <p>
            A function <m>f(x)</m> is given.
            Find the critical points of <m>f</m> and use the Second Derivative Test,
            when possible,
            to determine the relative extrema.
            (Note: these are the same functions as in <xref ref="exercisegroup-concavity"/>.)
          </p>
        </introduction>

        <exercise label="ex-graph-concavity-second-test-1">
          <webwork xml:id="webwork-ex-graph-concavity-second-test-1">
            <pg-code>
              $r = non_zero_random(-9,9,1);
              if($envir{problemSeed}==1){$r=1;};
              Context()-&gt;noreduce('(-x)-y','(-x)+y');
              $f = Formula("x^2 - 2*$r x + ($r)^2")-&gt;reduce;
              $inflecs = List(Compute("None"));
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("(-inf,inf)"));
              $dn = List(Compute("None"));
              Context("Fraction");
              $crit = List($r);
              $max = List(Compute("none"));
              $min = List($r);
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the critical points, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$crit" width="30"/>
              </p>
              <instruction>
                List the critical points for which the Second Derivative Test indicates the point is a relative maximum.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$max" width="30"/>
              </p>
              <instruction>
                List the critical points for which the Second Derivative Test indicates the point is a relative minimumm.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$min" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The critical points are <m><var name="$crit"/></m>.
                The critical points for which the Second Derivative Test indicates the point is a relative maximum are <m><var name="$max"/></m>.
                The critical points for which the Second Derivative Test indicates the point is a relative minimum are <m><var name="$min"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-second-test-2">
          <webwork xml:id="webwork-ex-graph-concavity-second-test-2">
            <pg-code>
              ($a,$b) = (-9..-1,1..9)[NchooseK(18,2)];
              if($envir{problemSeed}==1){$a=-5; $b=7};
              Context()-&gt;noreduce('(-x)-y','(-x)+y');
              $f = Formula("-x^2 + $a x + $b")-&gt;reduce;
              $inflecs = List(Compute("None"));
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Compute("None"));
              $dn = List(Interval("(-inf,inf)"));
              Context("Fraction");
              $m = Fraction($a,2);
              $crit = List($m);
              $max = List($m);
              $min = List(Compute("none"));
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the critical points, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$crit" width="30"/>
              </p>
              <instruction>
                List the critical points for which the Second Derivative Test indicates the point is a relative maximum.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$max" width="30"/>
              </p>
              <instruction>
                List the critical points for which the Second Derivative Test indicates the point is a relative minimumm.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$min" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The critical points are <m><var name="$crit"/></m>.
                The critical points for which the Second Derivative Test indicates the point is a relative maximum are <m><var name="$max"/></m>.
                The critical points for which the Second Derivative Test indicates the point is a relative minimum are <m><var name="$min"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-second-test-3">
          <webwork xml:id="webwork-ex-graph-concavity-second-test-3">
            <pg-code>
              $s = random(1,9,1);
              $c = non_zero_random(-9,9,1);
              if($envir{problemSeed}==1){$s=1; $c=1;};
              Context()-&gt;noreduce('(-x)-y','(-x)+y');
              $f = Formula("x^3 - $s x + $c")-&gt;reduce;
              $inflecs = List(0);
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("[0,inf)"));
              $dn = List(Interval("(-inf,0]"));
              Context("Fraction");
              $rad = 3*$s;
              ($radsquare,$radnonsquare) = (1,$rad);
              for my $p (2,3,5) {
                while ($radnonsquare % ($p**2) == 0) {
                  ($radsquare,$radnonsquare) = ($radsquare * $p**2, $radnonsquare / $p**2);
                }
              }
              $G = gcd(sqrt($radsquare),3);
              $B = sqrt($radsquare)/$G;
              $C = 3/$G;
              if ($discnonsquare == 1) {
                $m = Fraction($B,$C);
                $n = Fraction(-$B,$C);
              } else {
                $m = Formula("($B sqrt($radnonsquare))/$C");
                $n = Formula("(-$B sqrt($radnonsquare))/$C");
              }
              ($m,$n) = num_sort($m,$n);
              $crit = List($m,$n);
              $max = List($m);
              $min = List($n);
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the critical points, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$crit" width="30"/>
              </p>
              <instruction>
                List the critical points for which the Second Derivative Test indicates the point is a relative maximum.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$max" width="30"/>
              </p>
              <instruction>
                List the critical points for which the Second Derivative Test indicates the point is a relative minimumm.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$min" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The critical points are <m><var name="$crit"/></m>.
                The critical points for which the Second Derivative Test indicates the point is a relative maximum are <m><var name="$max"/></m>.
                The critical points for which the Second Derivative Test indicates the point is a relative minimum are <m><var name="$min"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-second-test-4">
          <webwork xml:id="webwork-ex-graph-concavity-second-test-4">
            <pg-code>
              $a = non_zero_random(-9,9,1);
              $b = non_zero_random(-9,9,1);
              $c = ($a &gt; 0) ? random(int(($b)**2/(3*$a))+1,int(($b)**2/(3*$a))+9,1) : random(int(($b)**2/(3*$a))-9,int(($b)**2/(3*$a))-1,1);
              $d = non_zero_random(-9,9,1);
              if($envir{problemSeed}==1){$a=2; $b=-3; $c=9; $d=5};
              Context()-&gt;noreduce('(-x)-y','(-x)+y');
              $f = Formula("$a x^3 + $b x^2 + $c x + $d")-&gt;reduce;
              Context("Fraction");
              $i = Fraction(-2*$b,6*$a);
              $inflecs = List($i);
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("[$i,inf)"));
              $dn = List(Interval("(-inf,$i]"));
              ($up,$dn) = ($dn,$up) if ($a &lt; 0);
              $crit = List(Compute("none"));
              $max = List(Compute("none"));
              $min = List(Compute("none"));
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the critical points, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$crit" width="30"/>
              </p>
              <instruction>
                List the critical points for which the Second Derivative Test indicates the point is a relative maximum.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$max" width="30"/>
              </p>
              <instruction>
                List the critical points for which the Second Derivative Test indicates the point is a relative minimumm.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$min" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The critical points are <m><var name="$crit"/></m>.
                The critical points for which the Second Derivative Test indicates the point is a relative maximum are <m><var name="$max"/></m>.
                The critical points for which the Second Derivative Test indicates the point is a relative minimum are <m><var name="$min"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-second-test-5">
          <webwork xml:id="webwork-ex-graph-concavity-second-test-5">
            <pg-code>
              $s = non_zero_random(-9,9,1);
              $k = ($s % 2 == 0) ? non_zero_random(2,8,2) : non_zero_random(1,9,2);
              $d = non_zero_random(-9,9,1);
              if($envir{problemSeed}==1){$s=-1; $k=-1; $d=3;};
              $r = ($s + $k)/-2;
              $t = $k*$s;
              Context("Fraction");
              $b = Fraction(-($r+2*$s),3);
              ($bn,$bd) = $b-&gt;value;
              $c = -$r*(($s)**2+$t);
              Context()-&gt;noreduce('(-x)-y','(-x)+y');
              $f = Formula("x^4/4 + $bn x^3/$bd + $c x + $d")-&gt;reduce;
              $i = Fraction(3*$s-$k,3);
              ($i,$j) = num_sort($i,0);
              $inflecs = List($i,$j);
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("(-inf,$i]"),Interval("[$j,inf)"));
              $dn = List(Interval("[$i,$j]"));
              $crit = List($r);
              $max = ($i &lt;= $r and $r &lt;= $j) ? List($r) : List(Compute("none"));
              $min = ($i &lt;= $r and $r &lt;= $j) ? List(Compute("none")) : List($r);
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the critical points, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$crit" width="30"/>
              </p>
              <instruction>
                List the critical points for which the Second Derivative Test indicates the point is a relative maximum.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$max" width="30"/>
              </p>
              <instruction>
                List the critical points for which the Second Derivative Test indicates the point is a relative minimumm.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$min" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The critical points are <m><var name="$crit"/></m>.
                The critical points for which the Second Derivative Test indicates the point is a relative maximum are <m><var name="$max"/></m>.
                The critical points for which the Second Derivative Test indicates the point is a relative minimum are <m><var name="$min"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-second-test-6">
          <webwork xml:id="webwork-ex-graph-concavity-second-test-6">
            <pg-code>
              ($r,$s,$t) = (-5..-1,1..5)[NchooseK(10,3)];
              $k = list_random(-12,-8,-4,4,8,12);
              if ($k % 3 != 0) {
                do {$t = non_zero_random(-($r+$s) % 3 - 6, -($r+$s) % 3 + 6, 3)} until ($t != $r and $t != $s);
              }
              ($r,$s,$t) = num_sort($r,$s,$t);
              $e = non_zero_random(-9,9,1);
              if($envir{problemSeed}==1){$r=-1; $s=1; $t=2; $k=12;};
              $a = $k/4;
              $b = $k*($r+$s+$t)/3;
              $c = $k*($s*$t+$r*$s+$r*$t)/2;
              $d = $k*$r*$s*$t;
              Context("Fraction");
              Context()-&gt;noreduce('(-x)-y','(-x)+y');
              $f = Formula("$a x^4 + $b x^3 + $c x^2 + $d x + $e")-&gt;reduce;
              $disc = 9*($b)**2 - 24*$a*$c;
              ($discsquare,$discnonsquare) = (1,$disc);
              for my $p (2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251) {
                while ($discnonsquare % ($p**2) == 0) {
                  ($discsquare,$discnonsquare) = ($discsquare * $p**2, $discnonsquare / $p**2);
                }
              }
              $G = gcd(gcd(3*$b,sqrt($discsquare)),12*$a);
              $A = -3*$b/$G;
              $B = sqrt($discsquare)/$G;
              $C = 12*$a/$G;
              if ($discnonsquare == 1) {
                $i = Fraction($A+$B,$C);
                $j = Fraction($A-$B,$C);
              } else {
                $i = Formula("($A+$B sqrt($discnonsquare))/$C");
                $j = Formula("($A-$B sqrt($discnonsquare))/$C");
              }
              ($i,$j) = num_sort($i,$j);
              $inflecs = List($i,$j);
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("(-inf,$i]"),Interval("[$j,inf)"));
              $dn = List(Interval("[$i,$j]"));
              ($up,$dn) = ($dn,$up) if ($a &lt; 0);
              $crit = List($r,$s,$t);
              $max = ($a &gt; 0) ? List($s) : List($r,$t);
              $min = ($a &gt; 0) ? List($r,$t): List($s);
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the critical points, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$crit" width="30"/>
              </p>
              <instruction>
                List the critical points for which the Second Derivative Test indicates the point is a relative maximum.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$max" width="30"/>
              </p>
              <instruction>
                List the critical points for which the Second Derivative Test indicates the point is a relative minimumm.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$min" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The critical points are <m><var name="$crit"/></m>.
                The critical points for which the Second Derivative Test indicates the point is a relative maximum are <m><var name="$max"/></m>.
                The critical points for which the Second Derivative Test indicates the point is a relative minimum are <m><var name="$min"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-second-test-7">
          <webwork xml:id="webwork-ex-graph-concavity-second-test-7">
            <pg-code>
              $r = non_zero_random(-4,4,1);
              if($envir{problemSeed}==1){$r=1;};
              $a = 1;
              $b = -4*$r;
              $c = 6*($r**2);
              $d = -4*($r**3);
              $e = ($r)**4;
              Context()-&gt;noreduce('(-x)-y','(-x)+y');
              $f = Formula("$a x^4 + $b x^3 + $c x^2 + $d x + $e")-&gt;reduce;
              $inflecs = List($r);
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("(-inf,inf)"));
              $dn = List(Compute("none"));
              $crit = List($r);
              $max = List(Compute("none"));
              $min = List(Compute("none"));
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the critical points, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$crit" width="30"/>
              </p>
              <instruction>
                List the critical points for which the Second Derivative Test indicates the point is a relative maximum.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$max" width="30"/>
              </p>
              <instruction>
                List the critical points for which the Second Derivative Test indicates the point is a relative minimumm.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$min" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The critical points are <m><var name="$crit"/></m>.
                The critical points for which the Second Derivative Test indicates the point is a relative maximum are <m><var name="$max"/></m>.
                The critical points for which the Second Derivative Test indicates the point is a relative minimum are <m><var name="$min"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-second-test-8">
          <webwork xml:id="webwork-ex-graph-concavity-second-test-8">
            <pg-code>
              $f = Formula("sec(x)");
              $inflecs = List(Compute("none"));
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("(-pi/2,pi/2)"));
              $dn = List(Interval("(-3pi/2,-pi/2)"),Interval("(pi/2,3pi/2)"));
              $crit = List(Compute("-pi"),0,Compute("pi"));
              $max = List(Compute("-pi"),Compute("pi"));
              $min = List(0);
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m> on <m>(-3\pi/2,3\pi/2)</m>
              </p>
              <instruction>
                Enter the critical points, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$crit" width="30"/>
              </p>
              <instruction>
                List the critical points for which the Second Derivative Test indicates the point is a relative maximum.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$max" width="30"/>
              </p>
              <instruction>
                List the critical points for which the Second Derivative Test indicates the point is a relative minimumm.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$min" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The critical points are <m><var name="$crit"/></m>.
                The critical points for which the Second Derivative Test indicates the point is a relative maximum are <m><var name="$max"/></m>.
                The critical points for which the Second Derivative Test indicates the point is a relative minimum are <m><var name="$min"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-second-test-9">
          <webwork xml:id="webwork-ex-graph-concavity-second-test-9">
            <pg-code>
              $r = random(-9,9,1);
              $s = random(1,9,1);
              if($envir{problemSeed}==1){$r=0; $s = 1;};
              $b = -2*$r;
              $c = ($r**2) + $s;
              Context()-&gt;noreduce('(-x)-y','(-x)+y');
              $f = Formula("1/(x^2 + $b x + $c)")-&gt;reduce;
              $disc = 3*$s;
              ($discsquare,$discnonsquare) = (1,$disc);
              for my $p (2,3,5) {
                while ($discnonsquare % ($p**2) == 0) {
                  ($discsquare,$discnonsquare) = ($discsquare * $p**2, $discnonsquare / $p**2);
                }
              }
              $G = gcd(gcd(3*$3,sqrt($discsquare)),3);
              $A = 3*$r/$G;
              $B = sqrt($discsquare)/$G;
              $C = 3/$G;
              Context("Fraction");
              if ($discnonsquare == 1) {
                $i = Fraction($A+$B,$C);
                $j = Fraction($A-$B,$C);
              } else {
                $i = Formula("($A+$B sqrt($discnonsquare))/$C");
                $j = Formula("($A-$B sqrt($discnonsquare))/$C");
              }
              ($i,$j) = num_sort($i,$j);
              $inflecs = List($i,$j);
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("(-inf,$i]"),Interval("[$j,inf)"));
              $dn = List(Interval("[$i,$j]"));
              $crit = List($r);
              $max = List($r);
              $min = List("none");
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the critical points, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$crit" width="30"/>
              </p>
              <instruction>
                List the critical points for which the Second Derivative Test indicates the point is a relative maximum.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$max" width="30"/>
              </p>
              <instruction>
                List the critical points for which the Second Derivative Test indicates the point is a relative minimumm.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$min" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The critical points are <m><var name="$crit"/></m>.
                The critical points for which the Second Derivative Test indicates the point is a relative maximum are <m><var name="$max"/></m>.
                The critical points for which the Second Derivative Test indicates the point is a relative minimum are <m><var name="$min"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-second-test-10">
          <webwork xml:id="webwork-ex-graph-concavity-second-test-10">
            <pg-code>
              ($r,$s) = num_sort((-9..-1,1..9)[NchooseK(18,2)]);
              if($envir{problemSeed}==1){$r=-1; $s = 1;};
              $b = -$r - $s;
              $c = $r*$s;
              Context()-&gt;noreduce('(-x)-y','(-x)+y');
              $f = Formula("1/(x^2 + $b x + $c)")-&gt;reduce;
              $inflecs = List(Compute("none"));
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("(-inf,$r)"),Interval("($s,inf)"));
              $dn = List(Interval("($r,$s)"));
              Context("Fraction");
              $m = Fraction($r+$s,2);
              $crit = List($m);
              $max = List($m);
              $min = List("none");
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the possible points of inflection,
                separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$crit" width="30"/>
              </p>
              <instruction>
                List the critical points for which the Second Derivative Test indicates the point is a relative maximum.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$max" width="30"/>
              </p>
              <instruction>
                List the critical points for which the Second Derivative Test indicates the point is a relative minimum.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$min" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The possible points of inflection are <m><var name="$inflecs"/></m>.
                The function is concave up on <m><var name="$up"/></m> and concave down on <m><var name="$dn"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-second-test-11">
          <webwork xml:id="webwork-ex-graph-concavity-second-test-11">
            <pg-code>
              $f = Formula("sin(x) + cos(x)");
              $inflecs = List(Compute("-pi/4"),Compute("3pi/4"));
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("(-pi,-pi/4]"),Interval("[3pi/4,pi)"));
              $dn = List(Interval("[-pi/4,3pi/4]"));
              $crit = List(Compute("-3pi/4"),Compute("pi/4"));
              $max = List(Compute("pi/4"));
              $min = List(Compute("-3pi/4"));
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m> on <m>(-\pi,\pi)</m>
              </p>
              <instruction>
                Enter the critical points, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$crit" width="30"/>
              </p>
              <instruction>
                List the critical points for which the Second Derivative Test indicates the point is a relative maximum.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$max" width="30"/>
              </p>
              <instruction>
                List the critical points for which the Second Derivative Test indicates the point is a relative minimumm.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$min" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The critical points are <m><var name="$crit"/></m>.
                The critical points for which the Second Derivative Test indicates the point is a relative maximum are <m><var name="$max"/></m>.
                The critical points for which the Second Derivative Test indicates the point is a relative minimum are <m><var name="$min"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-second-test-12">
          <webwork xml:id="webwork-ex-graph-concavity-second-test-12">
            <pg-code>
              $f = Formula("x^2e^x");
              $inflecs = List(Compute("-2+sqrt(2)"),Compute("-2-sqrt(2)"));
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("(-inf,-2-sqrt(2)]"),Interval("[-2+sqrt(2),inf)"));
              $dn = List(Interval("[-2-sqrt(2),-2+sqrt(2)]"));
              $crit = List(-2,0);
              $max = List(-2);
              $min = List(0);
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the critical points, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$crit" width="30"/>
              </p>
              <instruction>
                List the critical points for which the Second Derivative Test indicates the point is a relative maximum.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$max" width="30"/>
              </p>
              <instruction>
                List the critical points for which the Second Derivative Test indicates the point is a relative minimumm.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$min" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The critical points are <m><var name="$crit"/></m>.
                The critical points for which the Second Derivative Test indicates the point is a relative maximum are <m><var name="$max"/></m>.
                The critical points for which the Second Derivative Test indicates the point is a relative minimum are <m><var name="$min"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-second-test-13">
          <webwork xml:id="webwork-ex-graph-concavity-second-test-13">
            <pg-code>
              $f = Formula("x^2ln(x)");
              $inflecs = List(Compute("1/e^(3/2)"));
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("[1/e^(3/2),inf)"));
              $dn = List(Interval("(0,1/e^(3/2)]"));
              $crit = List(Compute("e^(-1/2)"));
              $max = List(Compute("none"));
              $min = List(Compute("1/sqrt(e)"));
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the critical points, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$crit" width="30"/>
              </p>
              <instruction>
                List the critical points for which the Second Derivative Test indicates the point is a relative maximum.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$max" width="30"/>
              </p>
              <instruction>
                List the critical points for which the Second Derivative Test indicates the point is a relative minimumm.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$min" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The critical points are <m><var name="$crit"/></m>.
                The critical points for which the Second Derivative Test indicates the point is a relative maximum are <m><var name="$max"/></m>.
                The critical points for which the Second Derivative Test indicates the point is a relative minimum are <m><var name="$min"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-second-test-14">
          <webwork xml:id="webwork-ex-graph-concavity-second-test-14">
            <pg-code>
              $f = Formula("e^(-x^2)");
              $inflecs = List(Compute("1/sqrt(2)"),Compute("-1/sqrt(2)"));
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("(-inf,-1/sqrt(2)]"),Interval("[1/sqrt(2),inf)"));
              $dn = List(Interval("[-1/sqrt(2),1/sqrt(2)]"));
              $crit = List(0);
              $max = List(0);
              $min = List(Compute("none"));
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the critical points, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$crit" width="30"/>
              </p>
              <instruction>
                List the critical points for which the Second Derivative Test indicates the point is a relative maximum.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$max" width="30"/>
              </p>
              <instruction>
                List the critical points for which the Second Derivative Test indicates the point is a relative minimumm.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$min" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The critical points are <m><var name="$crit"/></m>.
                The critical points for which the Second Derivative Test indicates the point is a relative maximum are <m><var name="$max"/></m>.
                The critical points for which the Second Derivative Test indicates the point is a relative minimum are <m><var name="$min"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>
      </exercisegroup>

      <exercisegroup cols="2" xml:id="exset-graph-concavity-deriv-crit">
        <introduction>
          <p>
            A function <m>f(x)</m> is given.
            Find the <m>x</m> values where <m>\fp(x)</m> has a relative maximum or minimum.
            (Note: these are the same functions as in <xref ref="exercisegroup-concavity"/>.)
          </p>
        </introduction>

        <exercise label="ex-graph-concavity-deriv-crit-1">
          <webwork xml:id="webwork-ex-graph-concavity-deriv-crit-1">
            <pg-code>
              $r = non_zero_random(-9,9,1);
              if($envir{problemSeed}==1){$r=1;};
              Context()-&gt;noreduce('(-x)-y','(-x)+y');
              $f = Formula("x^2 - 2*$r x + ($r)^2")-&gt;reduce;
              $inflecs = List(Compute("None"));
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("(-inf,inf)"));
              $dn = List(Compute("None"));
              Context("Fraction");
              $crit = List($r);
              $max = List(Compute("none"));
              $min = List($r);
              $fpmax = List(Compute("none"));
              $fpmin = List(Compute("none"));
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the points where <m>\fp(x)</m> has a relative maximum, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$fpmax" width="30"/>
              </p>
              <instruction>
                Enter the points where <m>\fp(x)</m> has a relative minimum, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$fpmin" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The points where <m>\fp(x)</m> has a relative maximum are <m><var name="$fpmax"/></m>.
                The points where <m>\fp(x)</m> has a relative maximum are <m><var name="$fpmin"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-deriv-crit-2">
          <webwork xml:id="webwork-ex-graph-concavity-deriv-crit-2">
            <pg-code>
              ($a,$b) = (-9..-1,1..9)[NchooseK(18,2)];
              if($envir{problemSeed}==1){$a=-5; $b=7};
              Context()-&gt;noreduce('(-x)-y','(-x)+y');
              $f = Formula("-x^2 + $a x + $b")-&gt;reduce;
              $inflecs = List(Compute("None"));
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Compute("None"));
              $dn = List(Interval("(-inf,inf)"));
              Context("Fraction");
              $m = Fraction($a,2);
              $crit = List($m);
              $max = List($m);
              $min = List(Compute("none"));
              $fpmax = List(Compute("none"));
              $fpmin = List(Compute("none"));
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the points where <m>\fp(x)</m> has a relative maximum, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$fpmax" width="30"/>
              </p>
              <instruction>
                Enter the points where <m>\fp(x)</m> has a relative minimum, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$fpmin" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The points where <m>\fp(x)</m> has a relative maximum are <m><var name="$fpmax"/></m>.
                The points where <m>\fp(x)</m> has a relative maximum are <m><var name="$fpmin"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-deriv-crit-3">
          <webwork xml:id="webwork-ex-graph-concavity-deriv-crit-3">
            <pg-code>
              $s = random(1,9,1);
              $c = non_zero_random(-9,9,1);
              if($envir{problemSeed}==1){$s=1; $c=1;};
              Context()-&gt;noreduce('(-x)-y','(-x)+y');
              $f = Formula("x^3 - $s x + $c")-&gt;reduce;
              $inflecs = List(0);
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("[0,inf)"));
              $dn = List(Interval("(-inf,0]"));
              Context("Fraction");
              $rad = 3*$s;
              ($radsquare,$radnonsquare) = (1,$rad);
              for my $p (2,3,5) {
                while ($radnonsquare % ($p**2) == 0) {
                  ($radsquare,$radnonsquare) = ($radsquare * $p**2, $radnonsquare / $p**2);
                }
              }
              $G = gcd(sqrt($radsquare),3);
              $B = sqrt($radsquare)/$G;
              $C = 3/$G;
              if ($discnonsquare == 1) {
                $m = Fraction($B,$C);
                $n = Fraction(-$B,$C);
              } else {
                $m = Formula("($B sqrt($radnonsquare))/$C");
                $n = Formula("(-$B sqrt($radnonsquare))/$C");
              }
              ($m,$n) = num_sort($m,$n);
              $crit = List($m,$n);
              $max = List($m);
              $min = List($n);
              $fpmax = List(Compute("none"));
              $fpmin = List(0);
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the points where <m>\fp(x)</m> has a relative maximum, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$fpmax" width="30"/>
              </p>
              <instruction>
                Enter the points where <m>\fp(x)</m> has a relative minimum, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$fpmin" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The points where <m>\fp(x)</m> has a relative maximum are <m><var name="$fpmax"/></m>.
                The points where <m>\fp(x)</m> has a relative maximum are <m><var name="$fpmin"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-deriv-crit-4">
          <webwork xml:id="webwork-ex-graph-concavity-deriv-crit-4">
            <pg-code>
              $a = non_zero_random(-9,9,1);
              $b = non_zero_random(-9,9,1);
              $c = ($a &gt; 0) ? random(int(($b)**2/(3*$a))+1,int(($b)**2/(3*$a))+9,1) : random(int(($b)**2/(3*$a))-9,int(($b)**2/(3*$a))-1,1);
              $d = non_zero_random(-9,9,1);
              if($envir{problemSeed}==1){$a=2; $b=-3; $c=9; $d=5};
              Context()-&gt;noreduce('(-x)-y','(-x)+y');
              $f = Formula("$a x^3 + $b x^2 + $c x + $d")-&gt;reduce;
              Context("Fraction");
              $i = Fraction(-2*$b,6*$a);
              $inflecs = List($i);
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("[$i,inf)"));
              $dn = List(Interval("(-inf,$i]"));
              ($up,$dn) = ($dn,$up) if ($a &lt; 0);
              $crit = List(Compute("none"));
              $max = List(Compute("none"));
              $min = List(Compute("none"));
              $fpmax = List(Compute("none"));
              $fpmin = List($i);
              ($fpmax,$fpmin) = ($fpmin,$fpmax) if ($a &lt; 0);
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the points where <m>\fp(x)</m> has a relative maximum, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$fpmax" width="30"/>
              </p>
              <instruction>
                Enter the points where <m>\fp(x)</m> has a relative minimum, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$fpmin" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The points where <m>\fp(x)</m> has a relative maximum are <m><var name="$fpmax"/></m>.
                The points where <m>\fp(x)</m> has a relative maximum are <m><var name="$fpmin"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-deriv-crit-5">
          <webwork xml:id="webwork-ex-graph-concavity-deriv-crit-5">
            <pg-code>
              $s = non_zero_random(-9,9,1);
              $k = ($s % 2 == 0) ? non_zero_random(2,8,2) : non_zero_random(1,9,2);
              $d = non_zero_random(-9,9,1);
              if($envir{problemSeed}==1){$s=-1; $k=-1; $d=3;};
              $r = ($s + $k)/-2;
              $t = $k*$s;
              Context("Fraction");
              $b = Fraction(-($r+2*$s),3);
              ($bn,$bd) = $b-&gt;value;
              $c = -$r*(($s)**2+$t);
              Context()-&gt;noreduce('(-x)-y','(-x)+y');
              $f = Formula("x^4/4 + $bn x^3/$bd + $c x + $d")-&gt;reduce;
              $i = Fraction(3*$s-$k,3);
              ($i,$j) = num_sort($i,0);
              $inflecs = List($i,$j);
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("(-inf,$i]"),Interval("[$j,inf)"));
              $dn = List(Interval("[$i,$j]"));
              $crit = List($r);
              $max = ($i &lt;= $r and $r &lt;= $j) ? List($r) : List(Compute("none"));
              $min = ($i &lt;= $r and $r &lt;= $j) ? List(Compute("none")) : List($r);
              $fpmax = List($i);
              $fpmin = List($j);
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the points where <m>\fp(x)</m> has a relative maximum, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$fpmax" width="30"/>
              </p>
              <instruction>
                Enter the points where <m>\fp(x)</m> has a relative minimum, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$fpmin" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The points where <m>\fp(x)</m> has a relative maximum are <m><var name="$fpmax"/></m>.
                The points where <m>\fp(x)</m> has a relative maximum are <m><var name="$fpmin"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-deriv-crit-6">
          <webwork xml:id="webwork-ex-graph-concavity-deriv-crit-6">
            <pg-code>
              ($r,$s,$t) = (-5..-1,1..5)[NchooseK(10,3)];
              $k = list_random(-12,-8,-4,4,8,12);
              if ($k % 3 != 0) {
                do {$t = non_zero_random(-($r+$s) % 3 - 6, -($r+$s) % 3 + 6, 3)} until ($t != $r and $t != $s);
              }
              ($r,$s,$t) = num_sort($r,$s,$t);
              $e = non_zero_random(-9,9,1);
              if($envir{problemSeed}==1){$r=-1; $s=1; $t=2; $k=12;};
              $a = $k/4;
              $b = $k*($r+$s+$t)/3;
              $c = $k*($s*$t+$r*$s+$r*$t)/2;
              $d = $k*$r*$s*$t;
              Context("Fraction");
              Context()-&gt;noreduce('(-x)-y','(-x)+y');
              $f = Formula("$a x^4 + $b x^3 + $c x^2 + $d x + $e")-&gt;reduce;
              $disc = 9*($b)**2 - 24*$a*$c;
              ($discsquare,$discnonsquare) = (1,$disc);
              for my $p (2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251) {
                while ($discnonsquare % ($p**2) == 0) {
                  ($discsquare,$discnonsquare) = ($discsquare * $p**2, $discnonsquare / $p**2);
                }
              }
              $G = gcd(gcd(3*$b,sqrt($discsquare)),12*$a);
              $A = -3*$b/$G;
              $B = sqrt($discsquare)/$G;
              $C = 12*$a/$G;
              if ($discnonsquare == 1) {
                $i = Fraction($A+$B,$C);
                $j = Fraction($A-$B,$C);
              } else {
                $i = Formula("($A+$B sqrt($discnonsquare))/$C");
                $j = Formula("($A-$B sqrt($discnonsquare))/$C");
              }
              ($i,$j) = num_sort($i,$j);
              $inflecs = List($i,$j);
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("(-inf,$i]"),Interval("[$j,inf)"));
              $dn = List(Interval("[$i,$j]"));
              ($up,$dn) = ($dn,$up) if ($a &lt; 0);
              $crit = List($r,$s,$t);
              $max = ($a &gt; 0) ? List($s) : List($r,$t);
              $min = ($a &gt; 0) ? List($r,$t): List($s);
              $fpmax = List($i);
              $fpmin = List($j);
              ($fpmax,$fpmin) = ($fpmin,$fpmax) if ($a &lt; 0);
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the points where <m>\fp(x)</m> has a relative maximum, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$fpmax" width="30"/>
              </p>
              <instruction>
                Enter the points where <m>\fp(x)</m> has a relative minimum, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$fpmin" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The points where <m>\fp(x)</m> has a relative maximum are <m><var name="$fpmax"/></m>.
                The points where <m>\fp(x)</m> has a relative maximum are <m><var name="$fpmin"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-deriv-crit-7">
          <webwork xml:id="webwork-ex-graph-concavity-deriv-crit-7">
            <pg-code>
              $r = non_zero_random(-4,4,1);
              if($envir{problemSeed}==1){$r=1;};
              $a = 1;
              $b = -4*$r;
              $c = 6*($r**2);
              $d = -4*($r**3);
              $e = ($r)**4;
              Context()-&gt;noreduce('(-x)-y','(-x)+y');
              $f = Formula("$a x^4 + $b x^3 + $c x^2 + $d x + $e")-&gt;reduce;
              $inflecs = List($r);
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("(-inf,inf)"));
              $dn = List(Compute("none"));
              $crit = List($r);
              $max = List(Compute("none"));
              $min = List(Compute("none"));
              $fpmax = List(Compute("none"));
              $fpmin = List(Compute("none"));
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the points where <m>\fp(x)</m> has a relative maximum, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$fpmax" width="30"/>
              </p>
              <instruction>
                Enter the points where <m>\fp(x)</m> has a relative minimum, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$fpmin" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The points where <m>\fp(x)</m> has a relative maximum are <m><var name="$fpmax"/></m>.
                The points where <m>\fp(x)</m> has a relative maximum are <m><var name="$fpmin"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-deriv-crit-8">
          <webwork xml:id="webwork-ex-graph-concavity-deriv-crit-8">
            <pg-code>
              $f = Formula("sec(x)");
              $inflecs = List(Compute("none"));
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("(-pi/2,pi/2)"));
              $dn = List(Interval("(-3pi/2,-pi/2)"),Interval("(pi/2,3pi/2)"));
              $crit = List(Compute("-pi"),0,Compute("pi"));
              $max = List(Compute("-pi"),Compute("pi"));
              $min = List(0);
              $fpmax = List(Compute("none"));
              $fpmin = List(Compute("none"));
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m> on <m>(-3\pi/2,3\pi/2)</m>
              </p>
              <instruction>
                Enter the points where <m>\fp(x)</m> has a relative maximum, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$fpmax" width="30"/>
              </p>
              <instruction>
                Enter the points where <m>\fp(x)</m> has a relative minimum, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$fpmin" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The points where <m>\fp(x)</m> has a relative maximum are <m><var name="$fpmax"/></m>.
                The points where <m>\fp(x)</m> has a relative maximum are <m><var name="$fpmin"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-deriv-crit-9">
          <webwork xml:id="webwork-ex-graph-concavity-deriv-crit-9">
            <pg-code>
              $r = random(-9,9,1);
              $s = random(1,9,1);
              if($envir{problemSeed}==1){$r=0; $s = 1;};
              $b = -2*$r;
              $c = ($r**2) + $s;
              Context()-&gt;noreduce('(-x)-y','(-x)+y');
              $f = Formula("1/(x^2 + $b x + $c)")-&gt;reduce;
              $disc = 3*$s;
              ($discsquare,$discnonsquare) = (1,$disc);
              for my $p (2,3,5) {
                while ($discnonsquare % ($p**2) == 0) {
                  ($discsquare,$discnonsquare) = ($discsquare * $p**2, $discnonsquare / $p**2);
                }
              }
              $G = gcd(gcd(3*$3,sqrt($discsquare)),3);
              $A = 3*$r/$G;
              $B = sqrt($discsquare)/$G;
              $C = 3/$G;
              Context("Fraction");
              if ($discnonsquare == 1) {
                $i = Fraction($A+$B,$C);
                $j = Fraction($A-$B,$C);
              } else {
                $i = Formula("($A+$B sqrt($discnonsquare))/$C");
                $j = Formula("($A-$B sqrt($discnonsquare))/$C");
              }
              ($i,$j) = num_sort($i,$j);
              $inflecs = List($i,$j);
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("(-inf,$i]"),Interval("[$j,inf)"));
              $dn = List(Interval("[$i,$j]"));
              $crit = List($r);
              $max = List($r);
              $min = List("none");
              $fpmax = List($i);
              $fpmin = List($j);
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the points where <m>\fp(x)</m> has a relative maximum, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$fpmax" width="30"/>
              </p>
              <instruction>
                Enter the points where <m>\fp(x)</m> has a relative minimum, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$fpmin" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The points where <m>\fp(x)</m> has a relative maximum are <m><var name="$fpmax"/></m>.
                The points where <m>\fp(x)</m> has a relative maximum are <m><var name="$fpmin"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-deriv-crit-10">
          <webwork xml:id="webwork-ex-graph-concavity-deriv-crit-10">
            <pg-code>
              ($r,$s) = num_sort((-9..-1,1..9)[NchooseK(18,2)]);
              if($envir{problemSeed}==1){$r=-1; $s = 1;};
              $b = -$r - $s;
              $c = $r*$s;
              Context()-&gt;noreduce('(-x)-y','(-x)+y');
              $f = Formula("1/(x^2 + $b x + $c)")-&gt;reduce;
              $inflecs = List(Compute("none"));
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("(-inf,$r)"),Interval("($s,inf)"));
              $dn = List(Interval("($r,$s)"));
              Context("Fraction");
              $m = Fraction($r+$s,2);
              $crit = List($m);
              $max = List($m);
              $min = List("none");
              $fpmax = List(Compute("none"));
              $fpmin = List(Compute("none"));
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the points where <m>\fp(x)</m> has a relative maximum, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$fpmax" width="30"/>
              </p>
              <instruction>
                Enter the points where <m>\fp(x)</m> has a relative minimum, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$fpmin" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The points where <m>\fp(x)</m> has a relative maximum are <m><var name="$fpmax"/></m>.
                The points where <m>\fp(x)</m> has a relative maximum are <m><var name="$fpmin"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-deriv-crit-11">
          <webwork xml:id="webwork-ex-graph-concavity-deriv-crit-11">
            <pg-code>
              $f = Formula("sin(x) + cos(x)");
              $inflecs = List(Compute("-pi/4"),Compute("3pi/4"));
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("(-pi,-pi/4]"),Interval("[3pi/4,pi)"));
              $dn = List(Interval("[-pi/4,3pi/4]"));
              $crit = List(Compute("-3pi/4"),Compute("pi/4"));
              $max = List(Compute("pi/4"));
              $min = List(Compute("-3pi/4"));
              $fpmax = List(Compute("-pi/4"));
              $fpmin = List(Compute("3pi/4"));
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m> on <m>(-\pi,\pi)</m>
              </p>
              <instruction>
                Enter the points where <m>\fp(x)</m> has a relative maximum, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$fpmax" width="30"/>
              </p>
              <instruction>
                Enter the points where <m>\fp(x)</m> has a relative minimum, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$fpmin" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The points where <m>\fp(x)</m> has a relative maximum are <m><var name="$fpmax"/></m>.
                The points where <m>\fp(x)</m> has a relative maximum are <m><var name="$fpmin"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-deriv-crit-12">
          <webwork xml:id="webwork-ex-graph-concavity-deriv-crit-12">
            <pg-code>
              $f = Formula("x^2e^x");
              $inflecs = List(Compute("-2+sqrt(2)"),Compute("-2-sqrt(2)"));
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("(-inf,-2-sqrt(2)]"),Interval("[-2+sqrt(2),inf)"));
              $dn = List(Interval("[-2-sqrt(2),-2+sqrt(2)]"));
              $crit = List(-2,0);
              $max = List(-2);
              $min = List(0);
              $fpmax = List(Compute("-2-sqrt(2)"));
              $fpmin = List(Compute("-2+sqrt(2)"));
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the points where <m>\fp(x)</m> has a relative maximum, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$fpmax" width="30"/>
              </p>
              <instruction>
                Enter the points where <m>\fp(x)</m> has a relative minimum, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$fpmin" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The points where <m>\fp(x)</m> has a relative maximum are <m><var name="$fpmax"/></m>.
                The points where <m>\fp(x)</m> has a relative maximum are <m><var name="$fpmin"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-deriv-crit-13">
          <webwork xml:id="webwork-ex-graph-concavity-deriv-crit-13">
            <pg-code>
              $f = Formula("x^2ln(x)");
              $inflecs = List(Compute("1/e^(3/2)"));
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("[1/e^(3/2),inf)"));
              $dn = List(Interval("(0,1/e^(3/2)]"));
              $crit = List(Compute("e^(-1/2)"));
              $max = List(Compute("none"));
              $min = List(Compute("1/sqrt(e)"));
              $fpmax = List(Compute("none"));
              $fpmin = List(Compute("1/e^(3/2)"));
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the points where <m>\fp(x)</m> has a relative maximum, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$fpmax" width="30"/>
              </p>
              <instruction>
                Enter the points where <m>\fp(x)</m> has a relative minimum, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$fpmin" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The points where <m>\fp(x)</m> has a relative maximum are <m><var name="$fpmax"/></m>.
                The points where <m>\fp(x)</m> has a relative maximum are <m><var name="$fpmin"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>

        <exercise label="ex-graph-concavity-deriv-crit-14">
          <webwork xml:id="webwork-ex-graph-concavity-deriv-crit-14">
            <pg-code>
              $f = Formula("e^(-x^2)");
              $inflecs = List(Compute("1/sqrt(2)"),Compute("-1/sqrt(2)"));
              Context("Interval");
              Context()-&gt;flags-&gt;set(ignoreEndpointTypes =&gt; 1);
              $up = List(Interval("(-inf,-1/sqrt(2)]"),Interval("[1/sqrt(2),inf)"));
              $dn = List(Interval("[-1/sqrt(2),1/sqrt(2)]"));
              $crit = List(0);
              $max = List(0);
              $min = List(Compute("none"));
              $fpmax = List(Compute("-1/sqrt(2)"));
              $fpmin = List(Compute("1/sqrt(2)"));
            </pg-code>
            <statement>
              <p>
                <m>f(x)=<var name="$f"/></m>
              </p>
              <instruction>
                Enter the points where <m>\fp(x)</m> has a relative maximum, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$fpmax" width="30"/>
              </p>
              <instruction>
                Enter the points where <m>\fp(x)</m> has a relative minimum, separating with commas if needed.
                If there are none,
                enter <c>none</c>.
              </instruction>
              <p>
                <var name="$fpmin" width="30"/>
              </p>
            </statement>
            <!-- A "solution" should walk through *how* to find answers, not just state answers.
            That is what "answer" is for, which we get auotmatically from WeBWorK. -->
            <!-- <solution>
              <p>
                The points where <m>\fp(x)</m> has a relative maximum are <m><var name="$fpmax"/></m>.
                The points where <m>\fp(x)</m> has a relative maximum are <m><var name="$fpmin"/></m>.
              </p>
            </solution> -->
          </webwork>
        </exercise>
      </exercisegroup>
    <!-- </subexercises> -->
  </exercises>
</section>
