<?xml version="1.0" encoding="UTF-8"?>
<section xml:id="sec_prod_quot_rules" label="sec_prod_quot_rules">
  <title>The Product and Quotient Rules</title>
  <p>
    <xref ref="sec_basic_diff_rules"/> showed that,
    in some ways, derivatives behave nicely.
    The <xref ref="constant-multiple-derivative-rule" text="title"/> and <xref ref="sum-difference-derivative-rule" text="title"/> established that the derivative of <m>f(x) = 5x^2+\sin(x)</m> was not complicated.
    We neglected computing the derivative of things like
    <m>g(x) = 5x^2\sin(x)</m> and <m>h(x) = \frac{5x^2}{\sin(x) }</m> on purpose;
    their derivatives are <em>not</em> as straightforward.
    (If you had to guess what their respective derivatives are,
    you would probably guess wrong.)
    For these, we need the Product and Quotient Rules, respectively,
    which are defined in this section.
    We begin with the Product Rule.
  </p>

  <figure xml:id="vid_deriv_prod_quot_prod_intro" component="video" vshift="3">
    <caption>Video introduction to <xref ref="sec_prod_quot_rules"/></caption>
    <video youtube="1X3PTrkMsJ8" label="vid_deriv_prod_quot_prod_intro"/>
  </figure>


  <theorem xml:id="thm_ProductRule">
    <title>Product Rule</title>
    <statement>
      <p>
        Let <m>f</m> and <m>g</m> be differentiable functions on an open interval <m>I</m>.
            <idx><h>Power Rule</h><h>differentiation</h></idx>
            <idx><h>derivative</h><h>Product Rule</h></idx>
        Then <m>fg</m> is a differentiable function on <m>I</m>, and
        <me>
          \lzoo{x}{f(x)g(x)} = \fp(x)g(x) + f(x)g'(x)
        </me>.
      </p>
    </statement>
  </theorem>

  <warning>
    <p>
      <m>\lzoo{x}{f(x)g(x)}\neq \fp(x)g'(x)</m>!
      While this would be simpler than the <xref ref="thm_ProductRule" text="title"/>, it is wrong.
    </p>
  </warning>

  <p>
    We practice using this new rule in an example,
    followed by an example that demonstrates why this theorem is true.
  </p>

  <example xml:id="ex_prod1">
    <title>Using the Product Rule</title>
    <statement>
      <p>
        Use the Product Rule to compute the derivative of <m>y=5x^2\sin(x)</m>.
        Evaluate the derivative at <m>x=\pi/2</m>.
      </p>
    </statement>
    <solution>
      <p>
        To make our use of the <xref ref="thm_ProductRule" text="title"/> explicit,
        let's set <m>f(x) = 5x^2</m> and <m>g(x) = \sin(x)</m>.
        We easily compute/recall that
        <m>\fp(x) = 10x</m> and <m>g'(x) = \cos(x)</m>.
        Employing the rule, we have
        <md>
          <mrow>\lzoo{x}{5x^2\sin(x)} \amp= \lzoo{x}{5x^2}\sin(x) + 5x^2\lzoo{x}{\sin(x)}</mrow>
          <mrow>\amp= 10x\sin(x) + 5x^2\cos(x)</mrow>
        </md>.
      </p>

      <p>
        At <m>x=\pi/2</m>, we have
        <me>
            y'(\pi/2) = 10\cdot\frac{\pi}2 \sin\left(\frac{\pi}{2}\right) + 5\left(\frac{\pi}{2}\right)^2\cos\left(\frac{\pi}2\right) = 5\pi
        </me>.
      </p>

      <p>
        We graph <m>y</m> and its tangent line at <m>x=\pi/2</m>,
        which has a slope of <m>5\pi</m>,
        in <xref ref="fig_5xsquaredsinx"/>.
        While this does not <em>prove</em>
        that the Product Rule is the correct way to handle derivatives of products,
        it helps validate its truth.
      </p>

      <figure xml:id="fig_5xsquaredsinx" vshift="10">
        <caption>A graph of <m>y = 5x^2\sin(x)</m> and its tangent line at <m>x=\pi/2</m></caption>
          <!-- START figures/fig_5xsquaredsinx.tex -->
        <image width="47%">
          <shortdescription>The graph of the function used in this example, along with its tangent line at pi/2</shortdescription>
          <description>
            <p>
              The graph of <m>f(x)=5x^2\sin(x)</m> is shown, beginning at <m>(0,0)</m>,
              and ending at <m>(\pi,0)</m>.
              From <m>(0,0)</m> the graph moves upward with a slope that initially increases,
              and then becomes steady around the point on the graph where <m>x=\pi/2</m>.
              The slope then decreases until approximately <m>x=3\pi/4</m>, where the graph reaches its peak.
              It then descends steeply toward the point <m>(\pi,0)</m>.
            </p>
          </description>
          <latex-image label="img_5xsquaredsinx">
            \begin{tikzpicture}
              \begin{axis}[
                  xmin=-0.1,
                  xmax=3.5,
                  ymin=-1.1,
                  ymax=21,
                  xtick={1.57,3.14},
                  xticklabels={$\frac{\pi}2$,$\pi$},
                ]
                \addplot+[infinite,domain=0:3.14,samples=101] {5*(x^2)*sin(x*180/3.14)};
                \addplot [tangentline,domain=0.75:2] {15.7*(x-1.57)+12.34};
                \addplot[soliddot] coordinates{(1.57,12.34)};
              \end{axis}
            \end{tikzpicture}
          </latex-image>
        </image>
          <!-- figures/fig_5xsquaredsinx.tex END -->
      </figure>
    </solution>
    <solution component="video" vshift="4">
      <title>Video solution</title>
      <video width="98%" youtube="37efDywkDyE" label="vid_deriv_prod_quot_prod_ex" component="video"/>
    </solution>
  </example>

  <exercise label="APEX-PROTEUS-deriv-prodquot-1-v1" component="proteus">
    <title>PROTEUS EXERCISE: Product Rule Match </title>
  
    <statement>
      <p>
        The product rule is given by the formula
        <me>\frac{d}{dx}(f\cdot g) = f\frac{dg}{dx} + g\frac{df}{dx}</me>.
        Match two functions on the left with the correct derivative on the right,
        according to the product rule.
      </p>
    </statement>
  	<cardsort>
      <match>
        <premise><me>x^2</me></premise>
        <premise><me>\tan x</me></premise>
        <response><me>2x\tan x + x^2 \sec^2 x</me></response>
      </match>
      <match>
        <premise><me>\ln x</me></premise>
        <premise><me>\sin x</me></premise>
        <response><me>\frac{\sin x}{x} + \cos x \ln x</me></response>
      </match>
      <match>
        <premise><me>\sin x</me></premise>
        <premise><me>\csc x</me></premise>
        <response><me>-\cos x \csc x + \sin x \csc x \cot x</me></response>
      </match>
      <match>
        <premise><me>\sfrac{1}{x}</me></premise>
        <premise><me>2x</me></premise>
        <premise><me>\cos x</me></premise>
      </match>
    </cardsort>
  </exercise>

  <p>
    We now investigate why the <xref ref="thm_ProductRule" text="title"/> is true.
  </p>

  <proof>
    <title>Proof of Product Rule</title>
    <figure xml:id="vid_deriv_prod_quot_proof_prod_rule" component="video" vshift="-1">
      <caption>Video proof of product rule</caption>
      <video width="98%" youtube="i791Y97O5hI" label="vid_deriv_prod_quot_proof_prod_rule"/>
    </figure>

    <p>
      We can use the definition of the derivative to prove <xref ref="thm_ProductRule"/>.
    </p>

    <p>
      By the limit definition, we have
      <me>
        \lzoo{x}{f(x)g(x)} =\lim_{h\to0} \frac{f(x+h)g(x+h)-f(x)g(x)}{h}
      </me>.
    </p>

    <p>
      We now do something a bit unexpected;
      add <m>0</m> to the numerator
      (so that nothing is changed)
      in the form of <m>{}-f(x)g(x+h)+f(x)g(x+h)</m>,
      then do some regrouping as shown.
    </p>

    <aside xml:id="aside-derivative-add-zero" vshift="0">
      <p>
        Adding <m>0</m> in some clever form is a common mathematical proof technique.
      </p>
    </aside>
    
    <p>
      <md>
        <mrow>\amp\lzoo{x}{f(x)g(x)} = \lim_{h\to0} \frac{f(x+h)g(x+h)-f(x)g(x)}{h}</mrow>
        <mrow>\amp \text{ (now add 0 to the numerator) }</mrow>
        <mrow>\amp = \lim_{h\to0} \frac{f(x+h)g(x+h)-f(x)g(x+h)+f(x)g(x+h)-f(x)g(x)}{h}</mrow>
        <mrow>\amp \text{ (regroup) }</mrow>
        <mrow>\amp = \lim_{h\to0} \frac{\left[f(x+h)g(x+h)-f(x)g(x+h)\right]+\left[f(x)g(x+h)-f(x)g(x)\right]}{h}</mrow>
        <mrow>\amp \text{ (split fraction)}</mrow>
        <mrow>\amp = \lim_{h\to0} \frac{f(x+h)g(x+h)-f(x)g(x+h)}{h}+\lim_{h\to0}\frac{f(x)g(x+h)-f(x)g(x)}{h}</mrow>
        <mrow>\amp \text{ (factor) }</mrow>
        <mrow>\amp = \lim_{h\to0} \left(\frac{f(x+h)-f(x)}{h}g(x+h)\right)+\lim_{h\to0}\left(f(x)\frac{g(x+h)-g(x)}{h}\right)</mrow>
        <mrow>\amp \text{ (apply limit properties) }</mrow>
        <mrow>\amp = \lim_{h\to0} \frac{f(x+h)-f(x)}{h}\cdot \lim_{h\to0}g(x+h)+f(x)\cdot\lim_{h\to0}\frac{g(x+h)-g(x)}{h}</mrow>
        <mrow>\amp \text{ (apply limits) }</mrow>
        <mrow>\amp =\fp(x)g(x) + f(x)g'(x)</mrow>
        <mrow>\amp \text{ (by definition of the derivative)}</mrow>
      </md>.
      We have proven the product rule as desired. (In the last step,
      we also relied on the fact that since <m>g</m> is differentiable,
      it is also continuous, which guarantees that <m>\lim_{h\to0}g(x+h)=g(x)</m>.)
    </p>
  </proof>

  <p>
    It is often true that we can recognize that a theorem is true through its proof yet somehow doubt its applicability to real problems.
    In the following example,
    we compute the derivative of a product of functions in two ways to verify that the <xref ref="thm_ProductRule" text="title"/> is indeed <q>right.</q>
  </p>

  <example xml:id="ex_prod2">
    <title>Exploring alternate derivative methods</title>
    <statement>
      <p>
        Let <m>y = (x^2+3x+1)(2x^2-3x+1)</m>.
        Find <m>y'</m> two ways: first,
        by expanding the given product and then taking the derivative,
        and second,
        by applying the <xref ref="thm_ProductRule" text="title"/>.
        Verify that both methods give the same answer.
      </p>
    </statement>
    <solution>
      <p>
        We first expand the expression for <m>y</m>;
        a little algebra shows that <m>y = 2x^4+3x^3-6x^2+1</m>.
        It is easy to compute <m>y'</m>:
        <me>
          y' = 8x^3+9x^2-12x
        </me>.
      </p>

      <p>
        Instead, let's apply the <xref ref="thm_ProductRule" text="title"/> to the original factored form:
        <md>
          <mrow>y' \amp = \lzoo{x}{x^2+3x+1}(2x^2-3x+1)+(x^2+3x+1)\lzoo{x}{2x^2-3x+1}</mrow>
          <mrow>\amp = (2x+3)(2x^2-3x+1)+(x^2+3x+1)(4x-3)</mrow>
          <mrow>\amp = \left(4x^3-7x+3\right)+\left(4x^3+9x^2-5x-3\right)</mrow>
          <mrow>\amp  = 8x^3+9x^2-12x</mrow>
        </md>.
      </p>

      <p>
        The uninformed usually assume that
        <q>the derivative of the product is the product of the derivatives.</q>
        Thus we are tempted to say that <m>y' = (2x+3)(4x-3) = 8x^2+6x-9</m>.
        Obviously this is not correct.
      </p>
    </solution>
    <solution component="video"  vshift="0">
      <title>Video solution</title>
      <video width="98%" youtube="-plvLFQ21Ig" label="vid_deriv_prod_quot_ex_1" component="video"/>
    </solution>
  </example>

  <example xml:id="ex_prod10">
    <title>Using the Product Rule with a product of three functions</title>
    <statement>
      <p>
        Let <m>y = x^3\ln(x) \cos(x)</m>.
        Find <m>y'</m>.
      </p>
    </statement>
    <solution>
      <p>
        We have a product of three functions while the <xref ref="thm_ProductRule" text="title"/> only specifies how to handle a product of two functions.
        Our method of handling this problem is to simply group the latter two functions together,
        and consider <m>y = x^3\cdot\left[\ln(x) \cos(x) \right]</m>.
        Following the <xref ref="thm_ProductRule" text="title"/>, we have
        <md>
          <mrow>\yp \amp = \lzoo{x}{x^3}\ln(x) \cos(x) + (x^3)\lzoo{x}{\ln(x) \cos(x)}</mrow>
          <intertext>To evaluate <m>\lzoo{x}{\ln(x) \cos(x)}</m>, we apply the Product Rule again:</intertext>
          <mrow>\yp \amp = 3x^2\left[\ln(x) \cos(x) \right] + (x^3)\left[\frac1x\cos(x) + \ln(x) (-\sin(x) )\right]</mrow>
          <mrow>\amp = 3x^2\ln(x) \cos(x) + x^3\frac{1}{x}\cos(x) + x^3\ln(x) (-\sin(x) )</mrow>
        </md>.
      </p>

      <p>
        Recognize the pattern in our answer above:
        when applying the <xref ref="thm_ProductRule" text="title"/> to a product of three functions,
        there are three terms added together in the final derivative.
        Each term contains only one derivative of one of the original functions,
        and each function's derivative shows up in only one term.
        It is straightforward to extend this pattern to finding the derivative of a product of four or more functions.
      </p>

      <p>
        Ultimately though, we would simplify our final computation to:
        <me>
          \yp=3x^2\ln(x)\cos(x) + x^2\cos(x) + -x^3\ln(x)\sin(x)
        </me>
        If you check this answer with a <init>CAS</init>,
        it may factor and give the answer:
        <me>
          \yp=-x^2\left[x\ln(x)\sin(x) + \cos(x) + 3\ln(x)\cos(x)\right]
        </me>
      </p>
    </solution>
    <solution component="video" vshift="6">
      <title>Video solution</title>
      <video width="98%" youtube="PYK64WB4JUg" label="vid_deriv_prod_quot_ex_3_func" component="video"/>
    </solution>
  </example>

  <p xml:id="vidint_deriv_prod_quite_ex_4_func" component="video">
    Now that we have the hang of the product rule pattern,
    it's not much more difficult to move on to products of four or more functions,
    as the video in <xref ref="vid_deriv_prod_quot_ex_4_func"/> demonstrates.
  </p>
  <figure xml:id="vid_deriv_prod_quot_ex_4_func" component="video" vshift="0">
    <caption>Taking the derivative of a product of four functions</caption>
    <video youtube="QdQ14efmlMg" label="vid_deriv_prod_quot_ex_4_func"/>
  </figure>

  <p>
    We consider one more example before discussing another derivative rule.
  </p>

  <example xml:id="ex_deriv_ln">
    <title>Using the Product Rule</title>
    <statement>
      <p>
        Find the derivatives of the following functions.
        <ol>
          <li><m>f(x) = x\ln(x)</m></li>
          <li><m>g(x) = x\ln(x) - x</m></li>
        </ol>
      </p>
    </statement>
    <solution>
      <p>
        Recalling that the derivative of <m>\ln(x)</m> is <m>1/x</m>,
        we use the <xref ref="thm_ProductRule" text="title"/> to find our answers.
      </p>

      <p>
        <ol>
          <li>
            <p>
              Applying the <xref ref="thm_ProductRule" text="title"/>:
              <md>
                <mrow>\lzoo{x}{x\ln(x)}\amp= 1\cdot \ln(x) + x\cdot 1/x</mrow>
                <mrow>\amp = \ln(x) + 1</mrow>
              </md>.
            </p>
          </li>
          <li>
            <p>
              Using the result from above, we compute
              <md>
                <mrow>\lzoo{x}{x\ln(x) -x}\amp= \ln(x) + 1 - 1</mrow>
                <mrow>\amp= \ln(x)</mrow>
              </md>.
            </p>
          </li>
        </ol>
      </p>

      <p>
        This seems significant;
        if the natural log function <m>\ln(x)</m> is an important function
        (it is),
        it seems worthwhile to know a function whose derivative is <m>\ln(x)</m>.
        We have found one.
        (We leave it to the reader to find another;
        a correct answer will be <em>very</em> similar to this one.)
      </p>
    </solution>
  </example>

  <p>
    We have learned how to compute the derivatives of sums,
    differences, and products of functions.
    We now learn how to find the derivative of a quotient of functions.
  </p>

  <theorem xml:id="thm_QuotientRule">
    <title>Quotient Rule</title>
    <statement>
      <p>
        Let <m>f</m> and <m>g</m> be differentiable functions defined on an open interval <m>I</m>,
        where <m>g(x) \neq 0</m> on <m>I</m>.
            <idx><h>derivative</h><h>Quotient Rule</h></idx>
            <idx><h>Quotient Rule</h></idx>
        Then <m>f/g</m> is differentiable on <m>I</m>, and
        <me>
          \lzoo{x}{\frac{f(x)}{g(x)}} = \frac{g(x)\fp(x) - f(x)g'(x)}{g(x)^2}
        </me>.
      </p>
    </statement>
  </theorem>

  <figure xml:id="vid_deriv_prod_quot_quot_rule" component="video" vshift="0">
    <caption>Video presentation of <xref ref="thm_QuotientRule"/></caption>
    <video youtube="IlsA8342GvQ" label="vid_deriv_prod_quot_quot_rule"/>
  </figure>

  <p>
    The <xref ref="thm_QuotientRule" text="title"/> is not hard to use,
    although it might be a bit tricky to remember.
    A useful mnemonic works as follows.
    Consider a fraction's numerator and denominator as <q>HI</q>
    and <q>LO</q>, respectively.
    Then
    <me>
      \lzoo{x}{\frac{\text{ HI } }{\text{ LO } }} = \frac{\text{ LO}\cdot\text{dHI}-\text{HI}\cdot\text{dLO }}{\text{ LOLO } }
    </me>,
    read <q>low dee high minus high dee low,
    over low low.</q> Said fast,
    that phrase can roll off the tongue,
    making it easy to memorize.
    The <q>dee high</q> and <q>dee low</q>
    parts refer to the derivatives of the numerator and denominator,
    respectively.
  </p>

  <p>
    Let's practice using the Quotient Rule.
  </p>

  <example xml:id="ex_quot1">
    <title>Using the Quotient Rule</title>
    <statement>
      <p>
        Let <m>f(x) = \frac{5x^2}{\sin(x) }</m>.
        Find <m>\fp(x)</m>.
      </p>
    </statement>
    <solution>
      <p>
        Directly applying the <xref ref="thm_QuotientRule" text="title"/> gives:
        <md>
          <mrow>\lzoo{x}{\frac{5x^2}{\sin(x) }} \amp = \frac{\sin(x) \cdot \lzoo{x}{5x^2} - 5x^2\cdot \lzoo{x}{\sin(x)} }{\sin^2(x) }</mrow>
          <mrow>\amp =    \frac{10x\sin(x) - 5x^2\cos(x) }{\sin^2(x) }</mrow>
        </md>.
      </p>
    </solution>
    <solution component="video" vshift="2">
      <title>Video solution</title>
      <video width="98%" youtube="Hr4bt6yFwPg" label="vid_deriv_prod_quot_example_2" component="video"/>
    </solution>
  </example>

  <p>
    The <xref ref="thm_QuotientRule" text="title"/> allows us to fill in holes in our understanding of derivatives of the common trigonometric functions.
    We start with finding the derivative of the tangent function.
  </p>

  <example xml:id="ex_der_tan">
    <title>Using the Quotient Rule to find <m>\lzoo{x}{\tan(x)}</m></title>
    <statement>
      <p>
        Find the derivative of <m>y=\tan(x)</m>.
      </p>
    </statement>
    <solution>
      <p>
        At first, one might feel unequipped to answer this question.
        But recall that <m>\tan(x) = \sin(x) /\cos(x)</m>,
        so we can apply the <xref ref="thm_QuotientRule" text="title"/>.
        <md>
          <mrow>\lzoo{x}{\tan(x)}\amp = \lzoo{x}{\frac{\sin(x) }{\cos(x) }}</mrow>
          <mrow>\amp = \frac{\cos(x) \lzoo{x}{\sin(x)} - \sin(x)\lzoo{x}{\cos(x)}}{\cos^2(x) }</mrow>
          <mrow>\amp = \frac{\cos(x) \cos(x) - \sin(x) (-\sin(x) )}{\cos^2(x) }</mrow>
          <mrow>\amp = \frac{\cos^2(x) +\sin^2(x) }{\cos^2(x) }</mrow>
          <mrow>\amp = \frac{1}{\cos^2(x) }</mrow>
          <mrow>\amp = \sec^2(x)</mrow>
        </md>.
      </p>

      <p>
        This is a beautiful result.
        To confirm its truth,
        we can find the equation of the tangent line to <m>y=\tan(x)</m> at <m>x=\pi/4</m>.
        The slope is <m>\sec^2(\pi/4) = 2</m>;
        <m>y=\tan(x)</m>, along with its tangent line,
        is graphed in <xref ref="fig_tanx"/>.
      </p>

      <figure xml:id="fig_tanx" vshift="0">
        <caption>A graph of <m>y=\tan(x)</m> along with its tangent line at <m>x=\pi/4</m></caption>
        <!-- START figures/fig_tanx.tex -->
        <image width="47%">
          <shortdescription>A graph of the tangent function between its vertical asymptotes at -pi/2 and pi/2, along with a tangent line at pi/4.</shortdescription>
          <description>
            <p>
              A graph of <m>y=\tan(x)</m> between the vertical asymptotes <m>x=-\pi/2</m> and <m>x=\pi/2</m>.
              As <m>x</m> approaches <m>-\pi/2</m> from the right, <m>\tan(x)</m> approaches <m>-\infty</m>.
              Moving right from the <m>x=-\pi/2</m> asymptote, the graph initialy climbs steeply,
              and then levels off, continuing to climb with a much smaller slope from <m>-\pi/4</m> to <m>\pi/4</m>,
              and passing through the origin. Past <m>x=\pi/4</m>, the graph again climbs steeply toward the vertical asymptote at <m>x=\pi/2</m>.
            </p>

            <p>
              A tangent line to the graph at the point <m>(\pi/4,1)</m> is also shown.
            </p>
          </description>
          <latex-image label="img_tanx">
            \begin{tikzpicture}
              \begin{axis}[
                  xmin=-1.65,
                  xmax=1.7,
                  ymin=-11,
                  ymax=11,
                  xtick={-1.57,-.785,.785,1.57},
                  xticklabels={$-\frac{\pi}{2}$,$-\frac{\pi}{4}$,$\frac{\pi}{4}$,$\frac{\pi}{2}$},
                ]
                \addplot+[infinite,samples=101,domain=-11:11] ({atan(x)*pi/180},{x});
                \addplot [tangentline,domain=-1.0:1.5] {2*(x-pi/4)+1};
                \addplot [soliddot] coordinates{(0.785,1)};
              \end{axis}
            \end{tikzpicture}
          </latex-image>
        </image>
        <!-- figures/fig_tanx.tex END -->
      </figure>
    </solution>
    <solution component="video" vshift="6">
      <title>Video solution</title>
      <video width="98%" youtube="wslbADxDg4c" label="vid_deriv_prod_quot_tanx" component="video"/>
    </solution>
  </example>

  <p>
    We include this result in the following theorem about the derivatives of the trigonometric functions.
    Recall we found the derivative of
    <m>y=\sin(x)</m> in <xref ref="ex_deriv_sinx"/>
    and stated the derivative of the cosine function in <xref ref="thm_deriv_common"/>.
    The derivatives of the cotangent,
    cosecant and secant functions can all be computed directly using <xref ref="thm_deriv_common"/>
    and the <xref ref="thm_QuotientRule" text="title"/>.
  </p>

  <theorem xml:id="thm_deriv_trig">
    <title>Derivatives of Trigonometric Functions</title>
    <idx><h>derivative</h><h>trigonometric functions</h></idx>
    <statement>
      <p>
        <ol cols="2">
          <li><m> \lzoo{x}{\sin(x)} = \cos(x)</m></li>
          <li><m> \lzoo{x}{\cos(x)} = -\sin(x)</m></li>
          <li><m> \lzoo{x}{\tan(x)} = \sec^2(x)</m></li>
          <li><m> \lzoo{x}{\cot(x)} = -\csc^2(x)</m></li>
          <li><m> \lzoo{x}{\sec(x)} = \sec(x) \tan(x)</m></li>
          <li><m> \lzoo{x}{\csc(x)} = -\csc(x) \cot(x)</m></li>
        </ol>
      </p>
    </statement>
  </theorem>

  <p>
    To remember the above,
    it may be helpful to keep in mind that the derivatives of the trigonometric functions that start with <q>c</q>
    have a minus sign in them.
  </p>

  <example xml:id="ex_prod_quot">
    <title>Exploring alternate derivative methods</title>
    <statement>
      <p>
        In <xref ref="ex_quot1"/>
        the derivative of <m>f(x) = \frac{5x^2}{\sin(x) }</m> was found using the <xref ref="thm_QuotientRule" text="title"/>.
        Rewriting <m>f</m> as <m>f(x) = 5x^2\csc(x)</m>,
        find <m>\fp</m> using <xref ref="thm_deriv_trig"/>
        and verify the two answers are the same.
      </p>
    </statement>
    <solution>
      <p>
        We found in <xref ref="ex_quot1"/>
        that <m>\fp(x) = \frac{10x\sin(x) - 5x^2\cos(x) }{\sin^2(x) }</m>.
        We now find <m>\fp</m> using the <xref ref="thm_ProductRule" text="title"/>, considering <m>f</m> as <m>f(x) = 5x^2\csc(x)</m>.
        <md>
          <mrow>\fp(x) \amp = \lzoo{x}{5x^2\csc(x)}</mrow>
          <mrow>\amp = 5x^2\lzoo{x}{\csc(x)} + \lzoo{x}{5x^2}\csc(x)</mrow>
          <mrow>\amp = 5x^2\left(-\csc(x) \cot(x) \right) + 10x\csc(x) \amp\amp\text{ (now rewrite trig functions) }</mrow>
          <mrow>\amp = 5x^2\cdot \frac{-1}{\sin(x) }\cdot \frac{\cos(x) }{\sin(x) } + \frac{10x}{\sin(x) }</mrow>
          <mrow>\amp = \frac{-5x^2\cos(x) }{\sin^2(x) }+\frac{10x}{\sin(x) } \amp\amp\text{ (get common denominator) }</mrow>
          <mrow>\amp = \frac{10x\sin(x) - 5x^2\cos(x) }{\sin^2(x) }</mrow>
        </md>.
      </p>

      <p>
        Finding <m>\fp</m> using either method returned the same result.
        At first, the answers looked different,
        but some algebra verified they are the same.
        In general, there is not one final form that we seek;
        the immediate result from the Product Rule is fine.
        Work to <q>simplify</q> your results into a form that is most readable and useful to you.
      </p>
    </solution>
  </example>

  <p>
    The <xref ref="thm_QuotientRule" text="title"/> gives other useful results,
    as shown in the next example.
  </p>

  <example xml:id="ex_deriv_power">
    <title>Using the Quotient Rule to expand the Power Rule</title>
    <statement>
      <p>
        Find the derivatives of the following functions.
        <ol>
          <li>
            <p>
              <m>f(x) = \dfrac{1}{x}</m>
            </p>
          </li>
          <li>
            <p>
              <m>f(x)= \dfrac{1}{x^n}</m>, where <m>n \gt 0</m> is an integer.
            </p>
          </li>
        </ol>
      </p>
    </statement>
    <solution>
      <p>
        We employ the <xref ref="thm_QuotientRule" text="title"/>.
        <ol>
          <li>
            <p>
              <md>
                <mrow>\fp(x)\amp = \frac{x\cdot 0 - 1\cdot 1}{x^2}</mrow>
                <mrow>\amp = -\frac{1}{x^2}</mrow>
              </md>
            </p>
          </li>
          <li>
            <p>
              <md>
                <mrow>\fp(x)\amp = \frac{x^n\cdot 0 - 1\cdot nx^{n-1}}{(x^n)^2}</mrow>
                <mrow>\amp = -\frac{nx^{n-1}}{x^{2n}}</mrow>
                <mrow>\amp = -\frac{n}{x^{n+1}}</mrow>
              </md>.
            </p>
          </li>
        </ol>
      </p>
    </solution>
    <solution component="video" vshift="3">
      <title>Video solution</title>
      <video width="98%" youtube="jPqqK-ObPm4" label="vid_deriv_prod_quot_neg_power" component="video"/>
    </solution>
  </example>

  <p>
    The derivative of <m>y=\frac{1}{x^n}</m> turned out to be rather nice.
    It gets better.
    Consider:
    <md>
      <mrow>\lzoo{x}{\frac{1}{x^n}} \amp = \lzoo{x}{x^{-n}} \amp\amp\text{ (apply result from } <xref ref="ex_deriv_power"/>\text{)}</mrow>
      <mrow>\amp = -\frac{n}{x^{n+1}} \amp\amp \text{ (rewrite algebraically) }</mrow>
      <mrow>\amp = -nx^{-(n+1)}\amp</mrow>
      <mrow>\amp = -nx^{-n-1}\amp</mrow>
    </md>.
  </p>

  <p>
    This is reminiscent of the <xref ref="power-derivative-rule" text="title"/>:
    multiply by the power, then subtract <m>1</m> from the power.
    We now add to our previous Power Rule,
    which had the restriction of <m>n \gt 0</m>.
  </p>

  <theorem xml:id="thm_PowerRule">
    <title>Power Rule with Integer Exponents</title>
    <statement>
      <p>
        Let <m>f(x) = x^n</m>, where <m>n\neq 0</m> is an integer.
            <idx><h>derivative</h><h>Power Rule</h></idx>
            <idx><h>Power Rule</h><h>differentiation</h></idx>
        Then
        <me>
          \fp(x) = n\cdot x^{n-1}
        </me>.
      </p>
    </statement>
  </theorem>

  <p>
    Taking the derivative of many functions is relatively straightforward.
    It is clear
    (with practice)
    what rules apply and in what order they should be applied.
    Other functions present multiple paths;
    different rules may be applied depending on how the function is treated.
    One of the beautiful things about calculus is that there is not <q>the</q> right way;
    each path, when applied correctly,
    leads to the same result, the derivative.
    We demonstrate this concept in an example.
  </p>

  <example xml:id="ex_multiple_deriv">
    <title>Exploring alternate derivative methods</title>
    <statement>
      <p>
        Let <m>f(x) = \frac{x^2-3x+1}{x}</m>.
        Find <m>\fp(x)</m> in each of the following ways:
        <ol>
          <li>
            <p>
              By applying the <xref ref="thm_QuotientRule" text="title"/>,
            </p>
          </li>
          <li>
            <p>
              by viewing <m>f</m> as <m>f(x) = \left(x^2-3x+1\right)\cdot x^{-1}</m> and applying the <xref ref="thm_ProductRule" text="title"/> and <xref ref="thm_PowerRule" text="title"/>, and
            </p>
          </li>
          <li>
            <p>
              by <q>simplifying</q> first through division.
            </p>
          </li>
        </ol>
        Verify that all three methods give the same result.
      </p>
    </statement>
    <solution>
      <p>
        <ol>
          <li>
            <p>
              Applying the <xref ref="thm_QuotientRule" text="title"/> gives:
              <md>
                <mrow>\fp(x) \amp =\frac{x\cdot\lzoo{x}{x^2-3x+1}-\left(x^2-3x+1\right)\lzoo{x}{x}}{x^2}</mrow>
                <mrow>\amp = \frac{x\cdot(2x-3)-\left(x^2-3x+1\right)\cdot 1}{x^2}</mrow>
                <mrow>\amp = \frac{x^2-1}{x^2}</mrow>
                <mrow>\amp = 1-\frac{1}{x^2}</mrow>
              </md>.
            </p>
          </li>
          <li>
            <p>
              By rewriting <m>f</m>,
              we can apply the <xref ref="thm_ProductRule" text="title"/> and <xref ref="thm_PowerRule" text="title"/> as follows:
              <md>
                <mrow>\fp(x) \amp = \left(x^2-3x+1\right)\lzoo{x}{x^{-1}} + \lzoo{x}{x^2-3x+1} x^{-1}</mrow>
                <mrow>\amp = \left(x^2-3x+1\right)\cdot (-1)x^{-2} + (2x-3)\cdot x^{-1}</mrow>
                <mrow>\amp = -\frac{x^2-3x+1}{x^2}+\frac{2x-3}{x}</mrow>
                <mrow>\amp = -\frac{x^2-3x+1}{x^2}+\frac{2x^2-3x}{x^2}</mrow>
                <mrow>\amp = \frac{x^2-1}{x^2} = 1-\frac{1}{x^2}</mrow>
              </md>,
              the same result as above.
            </p>
          </li>
          <li>
            <p>
              As <m>x\neq 0</m>, we can divide through by <m>x</m> first,
              giving <m>f(x) = x-3+x^{-1}</m>.
              Now apply the <xref ref="thm_PowerRule" text="title"/>.
              <me>
                \fp(x) = 1-\frac{1}{x^2}
              </me>,
              the same result as before.
            </p>
          </li>
        </ol>
      </p>
    </solution>
    <solution component="video" vshift="3">
      <title>Video solution</title>
      <video width="98%" youtube="ESYjxNMNvh8" label="vid_deriv_prod_quot_ex_simp_first" component="video"/>
    </solution>
  </example>

  <p>
    <xref ref="ex_multiple_deriv"/>
    demonstrates three methods of finding <m>\fp</m>.
    One is hard pressed to argue for a <q>best method</q>
    as all three gave the same result without too much difficulty,
    although it is clear that using the <xref ref="thm_ProductRule" text="title"/> required more steps.
    Ultimately, the important principle to take away from this is:
    reduce the answer to a form that seems
    <q>simple</q> and easy to interpret.
    In that example,
    we saw different expressions for <m>\fp</m>, including:
    <md>
      <mrow>\amp 1-\frac{1}{x^2}</mrow>
      <mrow>\amp \frac{x\cdot(2x-3)-\left(x^2-3x+1\right)\cdot 1}{x^2}</mrow>
      <mrow>\amp \left(x^2-3x+1\right)\cdot (-1)x^{-2} + (2x-3)\cdot x^{-1}</mrow>
    </md>.
  </p>

  <p>
    They are equal; they are all correct;
    only the first is <q>simple.</q>
    Work to make answers simple.
  </p>

  <p>
    In the next section we continue to learn rules that allow us to more easily compute derivatives than using the limit definition directly.
    We have to memorize the derivatives of a certain set of functions,
    such as <q>the derivative of <m>\sin(x)</m> is <m>\cos(x)</m>.</q>
    The <xref ref="sum-difference-derivative-rule" text="title"/>,
    <xref ref="constant-multiple-derivative-rule" text="title"/>,
    <xref ref="thm_PowerRule" text="title"/>,
    <xref ref="thm_ProductRule" text="title"/> and <xref ref="thm_QuotientRule" text="title"/> show us how to find the derivatives of certain combinations of these functions.
    The next section shows how to find the derivatives when we <em>compose</em>
    these functions together.
  </p>

  <exercises>
    <subexercises xml:id="TaC-deriv-prodquot">
      <title>Terms and Concepts</title>
    
      <exercise label="TaC-deriv-prodquot-1">
        <!-- <webwork xml:id="webwork-TaC-deriv-prodquot-1">
          <pg-code>
            $t=DropDown(['True','False'],0,showInStatic=&gt;0);
            $f=DropDown(['True','False'],1,showInStatic=&gt;0);
          </pg-code> -->
          <statement correct="no">
            <p>
              <!-- <var name="$f" form="popup"/> -->
              The Product Rule states that <m>\lzoo{x}{x^2\sin(x)}= 2x\cos(x)</m>.
            </p>
          </statement>
          <feedback>
            <p>
              The product rule results in something more complicated than the product of the derivatives.
              Double-check the statement of <xref ref="thm_ProductRule"/>.
            </p>
          </feedback>
        <!-- </webwork> -->
      </exercise>

      <exercise label="TaC-deriv-prodquot-2">
        <!-- <webwork xml:id="webwork-TaC-deriv-prodquot-2">
          <pg-code>
            $t=DropDown(['True','False'],0,showInStatic=&gt;0);
            $f=DropDown(['True','False'],1,showInStatic=&gt;0);
          </pg-code> -->
          <statement correct="no">
            <p>
              <!-- <var name="$f" form="popup"/> -->
              The Quotient Rule states that <m>\lzoo{x}{\frac{x^2}{\sin(x) }} = \frac{\cos(x) }{2x}</m>.
            </p>
          </statement>
          <feedback>
            <p>
              The quotient rule results in something more complicated than the quotient of the derivatives.
              Double-check the statement of <xref ref="thm_QuotientRule"/>.
            </p>
          </feedback>
        <!-- </webwork> -->
      </exercise>

      <exercise label="TaC-deriv-prodquot-3">
        <!-- <webwork xml:id="webwork-TaC-deriv-prodquot-3">
          <pg-code>
            $t=DropDown(['True','False'],0,showInStatic=&gt;0);
            $f=DropDown(['True','False'],1,showInStatic=&gt;0);
          </pg-code> -->
          <statement correct="yes">
            <p>
              <!-- <var name="$t" form="popup"/> -->
              The derivatives of the trigonometric functions that start with <q>c</q>
              have minus signs in them.
            </p>
          </statement>
          <feedback>
            <p>
              We could even go so far as to say this is true of the trig functions starting with <q>co</q>!
            </p>
          </feedback>
        <!-- </webwork> -->
      </exercise>

      <exercise label="TaC-deriv-prodquot-4">
        <!-- <webwork xml:id="webwork-TaC-deriv-prodquot-4">
          <pg-code>
            Context()-&gt;strings-&gt;add('the quotient rule'=&gt;{});
            Context()-&gt;strings-&gt;add(
              'quotient rule' =&gt; {alias =&gt; 'quotient rule'},
              'quotient' =&gt; {alias =&gt; 'quotient rule'}
            );
            $ans=Compute("the quotient rule");
          </pg-code> -->
          <statement>
            <p>
              What derivative rule is used to extend the Power Rule to include negative integer exponents?
            </p>
            <p>
              <!-- <var name="$ans" width="80"/> -->
              <fillin width="30" answer="the quotient rule"/>
            </p>
          </statement>
          <evaluation>
            <evaluate>

              <test correct="yes">
                <strcmp case="insensitive">quotient|quotient rule|the quotient rule</strcmp>
              </test>

            </evaluate>
          </evaluation>
        <!-- </webwork> -->
      </exercise>

      <exercise label="TaC-deriv-prodquot-5">
        <!-- <webwork xml:id="webwork-TaC-deriv-prodquot-5">
          <pg-code>
            $t=DropDown(['True','False'],0,showInStatic=&gt;0);
            $f=DropDown(['True','False'],1,showInStatic=&gt;0);
          </pg-code> -->
          <statement correct="no">
            <p>
              <!-- <var name="$f" form="popup"/> -->
              Regardless of the function,
              there is always exactly one right way of computing its derivative.
            </p>
          </statement>
          <feedback>
            <p>
              Sometimes you have options!
            </p>
          </feedback>
        <!-- </webwork> -->
      </exercise>

      <exercise label="TaC-deriv-prodquot-6">
        <!-- <webwork xml:id="webwork-TaC-deriv-prodquot-6"> -->
          <statement>
            <p>
              In your own words,
              explain what it means to make your answers <q>clear.</q>
            </p>
            <!-- <p>
              <var form="essay"/>
            </p> -->
          </statement>
          <response />
          
        <!-- </webwork> -->
      </exercise>      
    </subexercises>
    
    <subexercises>
      <title>Problems</title>

      <exercisegroup cols="2" xml:id="exset-deriv-product-compare">
        <introduction>
          <p>
            <ol marker="(a)">
              <li>
                Use the Product Rule to differentiate the function.
              </li>
              <li>
                Manipulate the function algebraically and differentiate without using the Product Rule.
              </li>
              <li>
                Show that the two derivatives are equivalent.
              </li>
            </ol>
          </p>
        </introduction>

        <exercise label="ex-deriv-product-compare-1">
          <webwork xml:id="webwork-ex-deriv-product-compare-1">
            <pg-code>
              $x = 'x';
              Context()-&gt;variables-&gt;are($x=&gt;'Real');
              $f = Formula("$x($x^2+3$x)");
              $d = $f-&gt;D($x);
            </pg-code>
            <statement>
              <p>
                <m>f(<var name="$x"/>) = <var name="$f"/></m>
              </p>
              <p>
                <var form="essay"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-product-compare-2">
          <webwork xml:id="webwork-ex-deriv-product-compare-2">
            <pg-code>
              $x = 'x';
              Context()-&gt;variables-&gt;are($x=&gt;'Real');
              $f = Formula("2$x^2(5$x^3)");
              $d = $f-&gt;D($x);
            </pg-code>
            <statement>
              <p>
                <m>f(<var name="$x"/>) = <var name="$f"/></m>
              </p>
              <p>
                <var form="essay"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-product-compare-3">
          <webwork xml:id="webwork-ex-deriv-product-compare-3">
            <pg-code>
              $x = 's';
              Context()-&gt;variables-&gt;are($x=&gt;'Real');
              $f = Formula("(2$x-1)($x+4)");
              $d = $f-&gt;D($x);
            </pg-code>
            <statement>
              <p>
                <m>f(<var name="$x"/>) = <var name="$f"/></m>
              </p>
              <p>
                <var form="essay"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-product-compare-4">
          <webwork xml:id="webwork-ex-deriv-product-compare-4">
            <pg-code>
              $x = 'x';
              Context()-&gt;variables-&gt;are($x=&gt;'Real');
              $f = Formula("($x^2+5)(3-$x^3)");
              $d = $f-&gt;D($x);
            </pg-code>
            <statement>
              <p>
                <m>f(<var name="$x"/>) = <var name="$f"/></m>
              </p>
              <p>
                <var form="essay"/>
              </p>
            </statement>
          </webwork>
        </exercise>
      </exercisegroup>

      <exercisegroup cols="2" xml:id="exset-deriv-quotient-compare">
        <introduction>
          <p>
            <ol marker="(a)">
              <li>
                Use the Quotient Rule to differentiate the function.
              </li>
              <li>
                Manipulate the function algebraically and differentiate without using the Quotient Rule.
              </li>
              <li>
                Show that the two derivatives are equivalent.
              </li>
            </ol>
          </p>
        </introduction>

        <exercise label="ex-deriv-quotient-compare-1">
          <webwork xml:id="webwork-ex-deriv-quotient-compare-1">
            <pg-code>
              $x = 'x';
              Context()-&gt;variables-&gt;are($x=&gt;'Real');
              $f = Formula("($x^2+3)/$x");
              $d = $f-&gt;D($x);
            </pg-code>
            <statement>
              <p>
                <m>f(x) = <var name="$f"/></m>
              </p>
              <p>
                <var form="essay"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-quotient-compare-2">
          <webwork xml:id="webwork-ex-deriv-quotient-compare-2">
            <pg-code>
              $x = 'x';
              Context()-&gt;variables-&gt;are($x=&gt;'Real');
              $f = Formula("($x^3-2$x^2)/(2$x^2)");
              $d = $f-&gt;D($x);
            </pg-code>
            <statement>
              <p>
                <m>f(x) = <var name="$f"/></m>
              </p>
              <p>
                <var form="essay"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-quotient-compare-3">
          <webwork xml:id="webwork-ex-deriv-quotient-compare-3">
            <pg-code>
              $x = 's';
              Context()-&gt;variables-&gt;are($x=&gt;'Real');
              $f = Formula("3/(4$x^3)");
              $d = $f-&gt;D($x);
            </pg-code>
            <statement>
              <p>
                <m>f(x) = <var name="$f"/></m>
              </p>
              <p>
                <var form="essay"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-quotient-compare-4">
          <webwork xml:id="webwork-ex-deriv-quotient-compare-4">
            <pg-code>
              $x = 't';
              Context()-&gt;variables-&gt;are($x=&gt;'Real');
              $f = Formula("($x^2-1)/($x+1)");
              $d = $f-&gt;D($x);
            </pg-code>
            <statement>
              <p>
                <m>f(x) = <var name="$f"/></m>
              </p>
              <p>
                <var form="essay"/>
              </p>
            </statement>
          </webwork>
        </exercise>
      </exercisegroup>

      <exercisegroup cols="2" xml:id="exset-deriv-prodquot-compute">
        <introduction>
          <p>
            Compute the derivative of the given function.
          </p>
        </introduction>

        <exercise label="ex-deriv-prodquot-compute-1">
          <webwork xml:id="webwork-ex-deriv-prodquot-compute-1">
            <pg-code>
              $fname = list_random('f','g','h','j','k','p');
              $x = list_random('q','r','t','x','y','z');
              $trig = list_random('sin','cos');
              if($envir{problemSeed}==1){$fname='f';$x='x';$trig='sin';};
              Context()-&gt;variables-&gt;are($x =&gt; 'Real');
              $f = Formula("$x $trig($x)");
              $df = $f-&gt;D("$x")-&gt;reduce;
            </pg-code>
            <statement>
              <p>
                <m><var name="$fname"/>(<var name="$x"/>) = <var name="$f"/></m>
              </p>
              <p>
                <var name="$df" width="80"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-prodquot-compute-2">
          <webwork xml:id="webwork-ex-deriv-prodquot-compute-2">
            <pg-code>
              $fname = list_random('f','g','h','j','k','p');
              $x = list_random('q','r','t','x','y','z');
              $trig = list_random('sin','cos');
              $n = random(2,9,1);
              if($envir{problemSeed}==1){$fname='f';$x='x';$trig='cos';$n=2;};
              Context()-&gt;variables-&gt;are($x =&gt; 'Real');
              $f = Formula("$x^$n $trig($x)");
              $df = $f-&gt;D("$x")-&gt;reduce;
            </pg-code>
            <statement>
              <p>
                <m><var name="$fname"/>(<var name="$x"/>) = <var name="$f"/></m>
              </p>
              <p>
                <var name="$df" width="80"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-prodquot-compute-3">
          <webwork xml:id="webwork-ex-deriv-prodquot-compute-3">
            <pg-code>
              $fname = list_random('f','g','h','j','k','p');
              $x = list_random('q','r','t','x','y','z');
              if($envir{problemSeed}==1){$fname='f';$x='x';};
              Context()-&gt;variables-&gt;are($x =&gt; 'Real');
              $f = Formula("e^$x ln($x)");
              $df = $f-&gt;D("$x")-&gt;reduce;
            </pg-code>
            <statement>
              <p>
                <m><var name="$fname"/>(<var name="$x"/>) = <var name="$f"/></m>
              </p>
              <p>
                <var name="$df" width="80"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-prodquot-compute-4">
          <webwork xml:id="webwork-ex-deriv-prodquot-compute-4">
            <pg-code>
              $fname = list_random('f','g','h','j','k','p');
              $x = list_random('q','r','t','x','y','z');
              $trig = list_random('sec','csc','tan','cot');
              $n = random(2,9,1);
              $a = non_zero_random(-9,9,1);
              if($envir{problemSeed}==1){$fname='f';$x='t';$trig='csc';$n=2;$a=-4;};
              Context()-&gt;variables-&gt;are($x =&gt; 'Real');
              $f = Formula("1/$x^$n ($trig($x)+$a)")-&gt;reduce;
              $df = $f-&gt;D("$x")-&gt;reduce;
            </pg-code>
            <statement>
              <p>
                <m><var name="$fname"/>(<var name="$x"/>) = <var name="$f"/></m>
              </p>
              <p>
                <var name="$df" width="80"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-prodquot-compute-5">
          <webwork xml:id="webwork-ex-deriv-prodquot-compute-5">
            <pg-code>
              $fname = list_random('f','g','h','j','k','p');
              $x = list_random('q','r','t','x','y','z');
              ($a,$b) = (-9..-1,1..9)[NchooseK(18,2)];
              if($envir{problemSeed}==1){$fname='g';$x='x';$a=7;$b=-5;};
              Context()-&gt;variables-&gt;are($x =&gt; 'Real');
              $f = Formula("($x+$a)/($x+$b)")-&gt;reduce;
              $df = $f-&gt;D("$x")-&gt;reduce;
            </pg-code>
            <statement>
              <p>
                <m><var name="$fname"/>(<var name="$x"/>) = <var name="$f"/></m>
              </p>
              <p>
                <var name="$df" width="80"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-prodquot-compute-6">
          <webwork xml:id="webwork-ex-deriv-prodquot-compute-6">
            <pg-code>
              $fname = list_random('f','g','h','j','k','p');
              $x = list_random('q','r','t','x','y','z');
              $trig = list_random('sin','cos');
              $m = random(2,9,1);
              $n = random(2,9,1);
              $a = non_zero_random(-9,9,1);
              if($envir{problemSeed}==1){$fname='g';$x='t';$trig='cos';$m=2;$n=5;$a=-2;};
              Context()-&gt;variables-&gt;are($x =&gt; 'Real');
              $f = Formula("$x^$n/($trig($x)+$a $x^$m)")-&gt;reduce;
              $df = $f-&gt;D("$x")-&gt;reduce;
            </pg-code>
            <statement>
              <p>
                <m><var name="$fname"/>(<var name="$x"/>) = <var name="$f"/></m>
              </p>
              <p>
                <var name="$df" width="80"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-prodquot-compute-7">
          <webwork xml:id="webwork-ex-deriv-prodquot-compute-7">
            <pg-code>
              $fname = list_random('f','g','h','j','k','p');
              $x = list_random('q','r','t','x','y','z');
              $trig = list_random('cot','sec','csc');
              Context()-&gt;variables-&gt;are($x =&gt; 'Real');
              $pm = list_random('+','-');
              if($envir{problemSeed}==1){$fname='h';$x='x';$trig='cot';$pm='-';};
              Context()-&gt;variables-&gt;are($x =&gt; 'Real');
              $formula = Formula("$trig($x) $pm e^$x");
              $df = $formula-&gt;D("$x")-&gt;reduce;
            </pg-code>
            <statement>
              <p>
                <m><var name="$fname"/>(<var name="$x"/>) = <var name="$formula"/></m>
              </p>
              <p>
                <var name="$df" width="80"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-prodquot-compute-8">
          <webwork xml:id="webwork-ex-deriv-prodquot-compute-8">
            <pg-code>
              $fname = list_random('f','g','h','j','k','p');
              $x = list_random('q','r','t','x','y','z');
              $trig = list_random('tan','cot','sec','csc');
              if($envir{problemSeed}==1){$fname='f';$x='x';$trig='tan';};
              Context()-&gt;variables-&gt;are($x =&gt; 'Real');
              $formula = Formula("$trig($x) ln($x)");
              $df = $formula-&gt;D("$x")-&gt;reduce;
            </pg-code>
            <statement>
              <p>
                <m><var name="$fname"/>(<var name="$x"/>) = <var name="$formula"/></m>
              </p>
              <p>
                <var name="$df" width="80"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-prodquot-compute-9">
          <webwork xml:id="webwork-ex-deriv-prodquot-compute-9">
            <pg-code>
              $fname = list_random('f','g','h','j','k','p');
              $x = list_random('q','r','t','x','y','z');
              $a = random(3,9,1);
              $b = non_zero_random(-9,9,1);
              $c = non_zero_random(-9,9,1);
              if($envir{problemSeed}==1){$fname='h';$x='t';$a=7;$b=6;$c=-2;};
              Context()-&gt;variables-&gt;are($x =&gt; 'Real');
              $formula = Formula("$a $x^2+$b$x+$c")-&gt;reduce;
              $df = $formula-&gt;D("$x")-&gt;reduce;
            </pg-code>
            <statement>
              <p>
                <m><var name="$fname"/>(<var name="$x"/>) = <var name="$formula"/></m>
              </p>
              <p>
                <var name="$df" width="80"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-prodquot-compute-10">
          <webwork xml:id="webwork-ex-deriv-prodquot-compute-10">
            <pg-code>
              $fname = list_random('f','g','h','j','k','p');
              $x = list_random('q','r','t','x','y','z');
              $a = list_random(-9..-2,2..9);
              $n = random(2,5,1);
              if($envir{problemSeed}==1){$fname='f';$x='x';$a=2;$n=3;};
              Context()-&gt;variables-&gt;are($x =&gt; 'Real');
              $formula = Formula("($x^($n+1)+$a $x^($n))/($x+$a)")-&gt;reduce;
              $df = Formula("$n $x^($n-1)")-&gt;reduce;
            </pg-code>
            <statement>
              <p>
                <m><var name="$fname"/>(<var name="$x"/>) = <var name="$formula"/></m>
              </p>
              <p>
                <var name="$df" width="80"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-prodquot-compute-11">
          <webwork xml:id="webwork-ex-deriv-prodquot-compute-11">
            <pg-code>
              $fname = list_random('f','g','h','j','k','p');
              $x = list_random('q','r','t','x','y','z');
              ($a,$b,$c) = (3..9)[NchooseK(7,3)];
              if($envir{problemSeed}==1){$fname='f';$x='x';$a=3;$b=8;$c=7;};
              Context()-&gt;variables-&gt;are($x =&gt; 'Real');
              $formula = Formula("($a $x^2 + $b $x + $c) e^($x)")-&gt;reduce;
              $df = Formula("($a $x^2 + ($b+2*$a) $x + ($c+$b)) e^($x)")-&gt;reduce;
            </pg-code>
            <statement>
              <p>
                <m><var name="$fname"/>(<var name="$x"/>) = <var name="$formula"/></m>
              </p>
              <p>
                <var name="$df" width="80"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-prodquot-compute-12">
          <webwork xml:id="webwork-ex-deriv-prodquot-compute-12">
            <pg-code>
              $fname = list_random('f','g','h','j','k','p');
              $x = list_random('q','r','t','x','y','z');
              ($a,$b) = (3,5,7,9)[NchooseK(4,2)];
              $pm = list_random('+','-');
              if($envir{problemSeed}==1){$fname='g';$x='t';$a=5;$b=3;$pm='-';};
              Context()-&gt;variables-&gt;are($x =&gt; 'Real');
              $formula = Formula("($x^$a $pm $x^$b) / e^($x)")-&gt;reduce;
              $df = Formula("(-$x^$a + $a $x^($a-1) - $pm $x^$b $pm $b $x^($b-1)) / e^($x)")-&gt;reduce;
            </pg-code>
            <statement>
              <p>
                <m><var name="$fname"/>(<var name="$x"/>) = <var name="$formula"/></m>
              </p>
              <p>
                <var name="$df" width="80"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-prodquot-compute-13">
          <webwork xml:id="webwork-ex-deriv-prodquot-compute-13">
            <pg-code>
              $fname = list_random('f','g','h','j','k','p');
              $x = list_random('q','r','t','x','y','z');
              ($a,$d) = (1..30)[NchooseK(30,2)];
              ($b,$c,$e) = (-30..-1,1..30)[NchooseK(60,3)];
              if($envir{problemSeed}==1){$fname='f';$x='x';$a=16;$b=24;$c=3;$d=7;$e=-1;};
              Context()-&gt;variables-&gt;are($x =&gt; 'Real');
              $formula = Formula("($a $x^3+$b $x^2 + $c $x) (($d $x + $e)/($a $x^3+$b $x^2 + $c $x))")-&gt;reduce;
              $df = Formula("$d")-&gt;reduce;
            </pg-code>
            <statement>
              <p>
                <m><var name="$fname"/>(<var name="$x"/>) = <var name="$formula"/></m>
              </p>
              <p>
                <var name="$df" width="80"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-prodquot-compute-14">
          <webwork xml:id="webwork-ex-deriv-prodquot-compute-14">
            <pg-code>
              $fname = list_random('f','g','h','j','k','p');
              $x = list_random('q','r','t','x','y','z');
              $n = random(4,6,1);
              $trig = list_random('cos','sin','sec','csc','tan','cot');
              if($envir{problemSeed}==1){$fname='f';$x='t';$n=5;$trig='sec';};
              Context()-&gt;variables-&gt;are($x =&gt; 'Real');
              $formula = Formula("$x^$n($trig($x) + e^$x)");
              $df = $formula-&gt;D("$x")-&gt;reduce;
            </pg-code>
            <statement>
              <p>
                <m><var name="$fname"/>(<var name="$x"/>) = <var name="$formula"/></m>
              </p>
              <p>
                <var name="$df" width="80"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-prodquot-compute-15">
          <webwork xml:id="webwork-ex-deriv-prodquot-compute-15">
            <pg-code>
              $fname = list_random('f','g','h','j','k','p');
              $x = list_random('q','r','t','x','y','z');
              $a = random(2,9,1);
              ($triga,$trigb) = ('cos','sin','sec','csc','tan','cot')[NchooseK(6,2)];
              if($envir{problemSeed}==1){$fname='f';$x='x';$a=3;$triga='sin';$trigb='cos';};
              Context()-&gt;variables-&gt;are($x =&gt; 'Real');
              $formula = Formula("$triga($x)/($trigb($x) + $a)");
              $df = $formula-&gt;D("$x")-&gt;reduce;
            </pg-code>
            <statement>
              <p>
                <m><var name="$fname"/>(<var name="$x"/>) = <var name="$formula"/></m>
              </p>
              <p>
                <var name="$df" width="80"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-prodquot-compute-16">
          <webwork xml:id="webwork-ex-deriv-prodquot-compute-16">
            <pg-code>
              $fname = list_random('f','g','h','j','k','p');
              Context()-&gt;variables-&gt;are(theta=&gt;['Real',TeX=&gt;'\theta']);
              $x = Formula('theta');
              $n = random(2,6,1);
              $trig = list_random('cos','sin','sec','csc','tan','cot');
              if($envir{problemSeed}==1){$fname='f';$n=3;$trig='sin';};
              $formula = Formula("theta^$n $trig(theta) + $trig(theta)/theta^$n");
              $df = $formula-&gt;D("$x");
            </pg-code>
            <statement>
              <p>
                <m><var name="$fname"/>(<var name="$x"/>) = <var name="$formula"/></m>
              </p>
              <instruction>
                To enter <m>\theta</m>, type <c>theta</c>.
              </instruction>
              <p>
                <var name="$df" width="80"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-prodquot-compute-17">
          <webwork xml:id="webwork-ex-deriv-prodquot-compute-17">
            <pg-code>
              $fname = list_random('f','g','h','j','k','p');
              $x = list_random('q','r','t','x','y','z');
              ($triga,$trigb) = ('cos','sin','sec','csc','tan','cot')[NchooseK(6,2)];
              if($envir{problemSeed}==1){$fname='f';$x='x';$triga='cos';$trigb='tan';};
              Context()-&gt;variables-&gt;are($x =&gt; 'Real');
              $formula = Formula("$triga($x)/$x + $x/$trigb($x)");
              $df = $formula-&gt;D("$x");
            </pg-code>
            <statement>
              <p>
                <m><var name="$fname"/>(<var name="$x"/>) = <var name="$formula"/></m>
              </p>
              <p>
                <var name="$df" width="80"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-prodquot-compute-18">
          <webwork xml:id="webwork-ex-deriv-prodquot-compute-18">
            <pg-code>
              $fname = list_random('f','g','h','j','k','p');
              $x = list_random('q','r','t','x','y','z');
              $a = random(2,5,1);
              $b = list_random(3,4,6);
              $c = random(1,5,1);
              $trig = list_random('\cos','\sin','\sec','\csc','\tan','\cot');
              if($envir{problemSeed}==1){$fname='g';$x='x';$a=2;$b=4;$c=1;$trig='sin';};
              Context()-&gt;variables-&gt;are($x =&gt; 'Real');
              $formula = "e^$a($trig(" . '\pi' . "/$b) - $c)";
              $df = Formula("0");
            </pg-code>
            <statement>
              <p>
                <m><var name="$fname"/>(<var name="$x"/>) = <var name="$formula"/></m>
              </p>
              <p>
                <var name="$df" width="80"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-prodquot-compute-19">
          <webwork xml:id="webwork-ex-deriv-prodquot-compute-19">
            <pg-code>
              $fname = list_random('f','g','h','j','k','p');
              $x = list_random('q','r','t','x','y','z');
              ($a,$b) = (2..9)[NchooseK(8,2)];
              $trig = list_random("sin($x)*cos($x)","sec($x)*csc($x)");
              $pm = list_random('+','-');
              if($envir{problemSeed}==1){$fname='g';$x='t';$a=4;$b=3;$trig="sin($x)*cos($x)";$pm='-';};
              Context()-&gt;variables-&gt;are($x =&gt; 'Real');
              $formula = Formula("$a $x^$b e^$x $pm $trig");
              $df = $formula-&gt;D("$x");
            </pg-code>
            <statement>
              <p>
                <m><var name="$fname"/>(<var name="$x"/>) = <var name="$formula"/></m>
              </p>
              <p>
                <var name="$df" width="80"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-prodquot-compute-20">
          <webwork xml:id="webwork-ex-deriv-prodquot-compute-20">
            <pg-code>
              $fname = list_random('f','g','h','j','k','p');
              $x = list_random('q','r','t','x','y','z');
              $n = random(2,3,1);
              ($a,$b) = (-9..-1,1..9)[NchooseK(18,2)];
              ($triga,$trigb) = ('sin','cos')[NchooseK(2,2)];
              if($envir{problemSeed}==1){$fname='h';$x='t';$n=2;$a=3;$b=2;$triga='sin';$trigb='cos';};
              Context()-&gt;variables-&gt;are($x =&gt; 'Real');
              $formula = Formula("($x^$n $triga($x)+$a)/($x^$n $trigb($x)+$b)")-&gt;reduce;
              $df = $formula-&gt;D("$x");
            </pg-code>
            <statement>
              <p>
                <m><var name="$fname"/>(<var name="$x"/>) = <var name="$formula"/></m>
              </p>
              <p>
                <var name="$df" width="80"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-prodquot-compute-21">
          <webwork xml:id="webwork-ex-deriv-prodquot-compute-21">
            <pg-code>
              $fname = list_random('f','g','h','j','k','p');
              $x = list_random('q','r','t','x','y','z');
              $n = random(2,5,1);
              $tran = list_random("e^$x","ln($x)");
              $trig = list_random('cos','sin','sec','csc','tan','cot');
              if($envir{problemSeed}==1){$fname='f';$x='x';$n=2;$tran="e^$x";$trig='tan';};
              Context()-&gt;variables-&gt;are($x =&gt; 'Real');
              $formula = Formula("$x^$n $tran $trig($x)")-&gt;reduce;
              $df = $formula-&gt;D("$x");
            </pg-code>
            <statement>
              <p>
                <m><var name="$fname"/>(<var name="$x"/>) = <var name="$formula"/></m>
              </p>
              <p>
                <var name="$df" width="80"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-prodquot-compute-22">
          <webwork xml:id="webwork-ex-deriv-prodquot-compute-22">
            <pg-code>
              $fname = list_random('f','g','h','j','k','p');
              $x = list_random('q','r','t','x','y','z');
              $a = random(2,9,1);
              $trig = list_random("sin($x) sec($x)","cos($x) csc($x)","cos($x) tan($x)","sin($x) cot($x)");
              if($envir{problemSeed}==1){$fname='g';$x='x';$a=2;$trig="sin($x) sec($x)";};
              Context()-&gt;variables-&gt;are($x =&gt; 'Real');
              $formula = Formula("$a $x $trig")-&gt;reduce;
              $df = $formula-&gt;D("$x");
            </pg-code>
            <statement>
              <p>
                <m><var name="$fname"/>(<var name="$x"/>) = <var name="$formula"/></m>
              </p>
              <p>
                <var name="$df" width="80"/>
              </p>
            </statement>
          </webwork>
        </exercise>
      </exercisegroup>

      <exercisegroup cols="2" xml:id="exset-deriv-prodquot-tangent">
        <introduction>
          <p>
            Find the equations of the tangent and normal lines to the graph of <m>g</m> at the indicated point.
          </p>
        </introduction>

        <exercise label="ex-deriv-prodquot-tangent-1">
          <webwork xml:id="webwork-ex-deriv-prodquot-tangent-1">
            <pg-code>
              $n = random(2,3,1);
              $a = list_random(-9..-1,1..9);
              if($envir{problemSeed}==1){$n=2;$a=2};
              Context("Fraction");
              $formula = Formula("e^x(x^$n+$a)")-&gt;reduce;
              $x0=0;
              $y0=Fraction($formula-&gt;eval(x=&gt;$x0));
              $df=$formula-&gt;D('x');
              $m=Fraction($df-&gt;eval(x=&gt;$x0));
              Context()-&gt;variables-&gt;add(y=&gt;'Real');
              parser::Assignment-&gt;Allow;
              $t=Formula("y=$m x+$y0")-&gt;reduce;
              if ($m == 0) {
                $n=Formula("x=$x0");
              }
              else {
                $mn = Fraction(-1/$m);
                $n=Formula("y=$mn x+$y0")-&gt;reduce;
              }
            </pg-code>
            <statement>
              <p>
                <m>g(x) = <var name="$formula"/></m> at <m>\left(<var name="$x0"/>,<var name="$y0"/>\right)</m>
              </p>
              <instruction>
                Enter the equation of the tangent line here.
              </instruction>
              <p>
                <var name="$t" width="20"/>
              </p>
              <instruction>
                Enter the equation of the normal line here.
              </instruction>
              <p>
                <var name="$n" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-prodquot-tangent-2">
          <webwork xml:id="webwork-ex-deriv-prodquot-tangent-2">
            <pg-code>
              Context()-&gt;flags-&gt;set(reduceConstants=&gt;0);
              $trig = list_random('sin','cos','tan','cot','sec','csc');
              if ($trig eq 'sin' or $trig eq 'csc') {
                $x0 = list_random(Formula("pi/6"),Formula("pi/4"),Formula("pi/3"),Formula("pi/2"),Formula("2pi/3"),Formula("3pi/4"),Formula("5pi/6"),Formula("7pi/6"),Formula("5pi/4"),Formula("4pi/3"),Formula("3pi/2"),Formula("5pi/3"),Formula("7pi/4"),Formula("11pi/6"));
              } else {
                $x0 = list_random(Formula("pi/6"),Formula("pi/4"),Formula("pi/3"),Formula("2pi/3"),Formula("3pi/4"),Formula("5pi/6"),Formula("7pi/6"),Formula("5pi/4"),Formula("4pi/3"),Formula("5pi/3"),Formula("7pi/4"),Formula("11pi/6"));
              }
              if($envir{problemSeed}==1){$trig='sin';$a=Formula("3pi/2")};
              $formula = Formula("x $trig(x)");
              $y0=$formula-&gt;eval(x=&gt;($x0-&gt;eval(x=&gt;0)))-&gt;value;
              $sign = ($y0 &gt; 0) ? '' : '-';
              Context("Fraction");
              $frac = Fraction(($y0/pi)**2);
              ($num,$den)=$frac-&gt;value;
              if ($num == 1 or $num == 4 or $num == 9 or $num == 16) {$N = sqrt($num)} else {$N = "sqrt($num)"};
              if ($den == 1 or $den == 4 or $den == 9 or $den == 16) {$D = sqrt($den)} else {$D = "sqrt($den)"};
              $y0 = Formula("($sign$N pi)/$D");
              $df=$formula-&gt;D('x');
              $m=$df-&gt;eval(x=&gt;($x0-&gt;eval(x=&gt;0)));
              Context()-&gt;variables-&gt;add(y=&gt;'Real');
              parser::Assignment-&gt;Allow;
              $t=Formula("y=$m (x-$x0)+$y0")-&gt;reduce;
              if ($m == 0) {
                $n=Formula("x=$x0");
              }
              else {
                $mn = Fraction(-1/$m);
                $n=Formula("y=$mn (x-$x0)+$y0")-&gt;reduce;
              }
            </pg-code>
            <statement>
              <p>
                <m>g(x) = <var name="$formula"/></m> at <m>\left(<var name="$x0"/>,<var name="$y0"/>\right)</m>
              </p>
              <instruction>
                Enter the equation of the tangent line here.
              </instruction>
              <p>
                <var name="$t" width="20"/>
              </p>
              <instruction>
                Enter the equation of the normal line here.
              </instruction>
              <p>
                <var name="$n" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-prodquot-tangent-3">
          <webwork xml:id="webwork-ex-deriv-prodquot-tangent-3">
            <pg-code>
              $a = list_random(-9..-1,1..9);
              $x0=$a+list_random(-2,-1,1,2);
              if($envir{problemSeed}==1){$a=1;$x0=2;};
              Context("Fraction");
              $formula = Formula("x^2/(x-$a)");
              $y0=Fraction($formula-&gt;eval(x=&gt;$x0));
              $df=$formula-&gt;D('x');
              $m=Fraction($df-&gt;eval(x=&gt;$x0));
              Context()-&gt;variables-&gt;add(y=&gt;'Real');
              parser::Assignment-&gt;Allow;
              $t=Formula("y=$m (x-$x0)+$y0")-&gt;reduce;
              if ($m == 0) {
                $n=Formula("x=$x0");
              }
              else {
                $mn = Fraction(-1/$m);
                $n=Formula("y=$mn (x-$x0)+$y0")-&gt;reduce;
              }
            </pg-code>
            <statement>
              <p>
                <m>g(x) = <var name="$formula"/></m> at <m>\left(<var name="$x0"/>,<var name="$y0"/>\right)</m>
              </p>
              <instruction>
                Enter the equation of the tangent line here.
              </instruction>
              <p>
                <var name="$t" width="20"/>
              </p>
              <instruction>
                Enter the equation of the normal line here.
              </instruction>
              <p>
                <var name="$n" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-prodquot-tangent-4">
          <webwork xml:id="webwork-ex-deriv-prodquot-tangent-4">
            <pg-code>
              ($a,$b) = (-9..-1,1..9)[NchooseK(18,2)];
              $trig = list_random('cos','sin');
              if($envir{problemSeed}==1){$a=-8;$b=1;$trig='cos'};
              Context("Fraction");
              $formula = Formula("($trig(x)+$a x)/(x+$b)")-&gt;reduce;
              $x0=0;
              $y0=Fraction($formula-&gt;eval(x=&gt;$x0));
              $df=$formula-&gt;D('x');
              $m=Fraction($df-&gt;eval(x=&gt;$x0));
              Context()-&gt;variables-&gt;add(y=&gt;'Real');
              parser::Assignment-&gt;Allow;
              $t=Formula("y=$m (x-$x0)+$y0")-&gt;reduce;
              if ($m == 0) {
                $n=Formula("x=$x0");
              }
              else {
                $mn = Fraction(-1/$m);
                $n=Formula("y=$mn (x-$x0)+$y0")-&gt;reduce;
              }
            </pg-code>
            <statement>
              <p>
                <m>g(x) = <var name="$formula"/></m> at <m>\left(<var name="$x0"/>,<var name="$y0"/>\right)</m>
              </p>
              <instruction>
                Enter the equation of the tangent line here.
              </instruction>
              <p>
                <var name="$t" width="20"/>
              </p>
              <instruction>
                Enter the equation of the normal line here.
              </instruction>
              <p>
                <var name="$n" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>
      </exercisegroup>

      <exercisegroup cols="2" xml:id="exset-deriv-prodquot-tangent-horiz">
        <introduction>
          <p>
            Find the <m>x</m>-values where the graph of the function has a horizontal tangent line.
          </p>
        </introduction>

        <exercise label="ex-deriv-prodquot-tangent-horiz-1">
          <webwork xml:id="webwork-ex-deriv-prodquot-tangent-horiz-1">
            <pg-code>
              Context("Fraction");
              Context()-&gt;noreduce('(-x)+y','(-x)-y');
              $a = non_zero_random(-9,9,1);
              ($b,$c) = (-30..-1,1..30)[NchooseK(18,2)];
              if($envir{problemSeed}==1){$a=6;$b=-18;$c=-24;};
              $formula = Formula("$a x^2 + $b x + $c")-&gt;reduce;
              @x = (Fraction(-$b,2*$a));
              $answer = List(@x);
            </pg-code>
            <statement>
              <p>
                <m>f(x) = <var name="$formula"/></m>
              </p>
              <instruction>
                Use commas to separate more than one <m>x</m>-value.
                If there are no such <m>x</m>-values,
                answer with <c>NONE</c>.
              </instruction>
              <p>
                <var name="$answer" width="15"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-prodquot-tangent-horiz-2">
          <webwork xml:id="webwork-ex-deriv-prodquot-tangent-horiz-2">
            <pg-code>
              $points = List("0");
            </pg-code>
            <statement>
              <p>
                <m>f(x) = x\sin(x)</m> on <m>[-1,1]</m>
              </p>
              <instruction>
                Use commas to separate more than one <m>x</m>-value.
                If there are no such <m>x</m>-values,
                answer with <c>NONE</c>.
              </instruction>
              <p>
                <var name="$points" width="15"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-prodquot-tangent-horiz-3">
          <webwork xml:id="webwork-ex-deriv-prodquot-tangent-horiz-3">
            <pg-code>
              Context("Fraction");
              Context()-&gt;noreduce('(-x)+y','(-x)-y');
              ($a,$b,$c) = (-3..-1,1..3)[NchooseK(6,3)];
              if($envir{problemSeed}==1){$a=1;$b=1;$c=1;};
              $formula = Formula("($a x)/($b x + $c)")-&gt;reduce;
              $points = Compute("NONE");
            </pg-code>
            <statement>
              <p>
                <m>f(x) = <var name="$formula"/></m>
              </p>
              <instruction>
                Use commas to separate more than one <m>x</m>-value.
                If there are no such <m>x</m>-values,
                answer with <c>NONE</c>.
              </instruction>
              <p>
                <var name="$points" width="15"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-prodquot-tangent-horiz-4">
          <webwork xml:id="webwork-ex-deriv-prodquot-tangent-horiz-4">
            <pg-code>
              Context("Fraction");
              Context()-&gt;noreduce('(-x)+y','(-x)-y');
              ($a,$b,$c) = (-3..-1,1..3)[NchooseK(6,3)];
              if($envir{problemSeed}==1){$a=1;$b=1;$c=1;};
              $formula = Formula("($a x^2)/($b x + $c)")-&gt;reduce;
              @x = (Fraction(0),Fraction(-(2*$c)/$b));
              $points = List(@x);
            </pg-code>
            <statement>
              <p>
                <m>f(x) = <var name="$formula"/></m>
              </p>
              <instruction>
                Use commas to separate more than one <m>x</m>-value.
                If there are no such <m>x</m>-values,
                answer with <c>NONE</c>.
              </instruction>
              <p>
                <var name="$points" width="15"/>
              </p>
            </statement>
          </webwork>
        </exercise>
      </exercisegroup>

      <exercisegroup cols="2" xml:id="exset-deriv-prodquot-higher">
        <introduction>
          <p>
            Find the requested higher order derivative.
          </p>
        </introduction>

        <exercise label="ex-deriv-prodquot-higher-1">
          <webwork xml:id="webwork-ex-deriv-prodquot-higher-1">
            <pg-code>
              $answer=Formula("2cos(x)-x*sin(x)");
            </pg-code>
            <statement>
              <p>
                <m>\fpp(x)</m>, where <m>f(x) = x\sin(x)</m>
              </p>
              <p>
                <var name="$answer" width="40"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-prodquot-higher-2">
          <webwork xml:id="webwork-ex-deriv-prodquot-higher-2">
            <pg-code>
              $answer=Formula("-4cos(x)+x*sin(x)");
            </pg-code>
            <statement>
              <p>
                <m>f^{(4)}(x)</m>, where <m>f(x) = x\sin(x)</m>
              </p>
              <p>
                <var name="$answer" width="40"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-prodquot-higher-3">
          <webwork xml:id="webwork-ex-deriv-prodquot-higher-3">
            <pg-code>
              $trig = list_random('csc','cot','sec','tan');
              if($envir{problemSeed}==1){$trig = 'csc'};
              $formula = Formula("$trig(x)");
              $answer=$formula-&gt;D('x')-&gt;D('x');
            </pg-code>
            <statement>
              <p>
                <m>f''(x)</m>, where <m>f(x) = <var name="$formula"/></m>
              </p>
              <p>
                <var name="$answer" width="40"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-prodquot-higher-4">
          <webwork xml:id="webwork-ex-deriv-prodquot-higher-4">
            <pg-code>
              ($a,$b,$c,$d) = (-9..-1,1..9)[NchooseK(18,4)];
              $n = random(7,9,1);
              if($envir{problemSeed}==1){$a=-5;$b=2;$c=1;$d=-7;$n=8;};
              $formula = Formula("(x^3+$a x+$b)(x^2+$c x+$d)")-&gt;reduce;
              $answer=Formula("0");
            </pg-code>
            <statement>
              <p>
                <m>f^{(<var name="$n"/>)}(x)</m>, where <m>f(x) = <var name="$formula"/></m>
              </p>
              <p>
                <var name="$answer" width="40"/>
              </p>
            </statement>
          </webwork>
        </exercise>
      </exercisegroup>
    </subexercises>

  </exercises>
</section>
