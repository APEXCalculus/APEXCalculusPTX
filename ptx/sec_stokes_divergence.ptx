<?xml version="1.0" encoding="UTF-8"?>
<section xml:id="sec_stokes_divergence">
  <title>The Divergence Theorem and Stokes' Theorem</title>
  <subsection>
    <title>The Divergence Theorem</title>
    <p>
      <xref ref="thm_divergence1">Theorem</xref>
      gives the Divergence Theorem in the plane,
      which states that the flux of a vector field across a closed <em>curve</em>
      equals the sum of the divergences over the region enclosed by the curve.
      Recall that the flux was measured via a line integral,
      and the sum of the divergences was measured through a double integral.
    </p>

    <p>
      We now consider the three-dimensional version of the Divergence Theorem.
      It states, in words, that the flux across a closed <em>surface</em>
      equals the sum of the divergences over the domain enclosed by the surface.
      Since we are in space
      (versus the plane),
      we measure flux via a surface integral,
      and the sums of divergences will be measured through a triple integral.
    </p>

    <!-- <figure xml:id="vid-veccalc-stokesdiv-divthm">
      <caption>Introducing the Divergenge Theorem</caption>
      <video youtube="Ra6bxrTj5xU"/>
    </figure> -->

    <theorem xml:id="thm_divergence2">
      <title>The Divergence Theorem (in space)</title>
      <statement>
        <p>
          Let <m>D</m> be a closed domain in space whose boundary is an orientable,
          piecewise smooth surface <m>\surfaceS</m> with outer unit normal vector <m>\vec n</m>,
          and let <m>\vec F</m> be a vector field whose components are differentiable on <m>D</m>.
          Then<idx><h>Divergence Theorem</h><h>in space</h></idx>
          <me>
            \iint_\surfaceS \vec F\cdot\vec n\, dS =\iiint_D \divv \vec F\, dV
          </me>.
        </p>
      </statement>
    </theorem>

    <aside>
      <p>
        <em>Note:</em> the term <q>outer unit normal vector</q>
        used in <xref ref="thm_divergence2">Theorem</xref>
        means <m>\vec n</m> points to the outside of <m>\surfaceS</m>.
            <idx><h>outer unit normal vector</h></idx>
      </p>
    </aside>

    <example xml:id="ex_divthm_space2">
      <title>Using the Divergence Theorem in space</title>
      <statement>
        <p>
          Let <m>D</m> be the domain in space bounded by the planes <m>z=0</m> and <m>z=2x</m>,
          along with the cylinder <m>x=1-y^2</m>,
          as graphed in <xref ref="fig_divthm_space2">Figure</xref>,
          let <m>\surfaceS</m> be the boundary of <m>D</m>,
          and let <m>\vec F = \langle x+y,y^2, 2z\rangle</m>.
        </p>

        <figure xml:id="fig_divthm_space2">
          <caption>The surfaces used in  <xref ref="ex_divthm_space2">Example</xref>.</caption>
          <!-- \apexincludemedia{width=145pt,3Dmenu,activate=onclick,deactivate=onclick,
          3Droll=0,
          3Dortho=0.004853160120546818,
          3Dc2c=0.7607786655426025 0.5903141498565674 0.2697128355503082,
          3Dcoo=-4.848384857177734 2.0102698802948 61.921504974365234,
          3Droo=399.9999594035934,
          3Dlights=Headlamp,add3Djscript=asylabels.js} -->
          <image xml:id="img_divthm_space2_3D" width="47%">
            <description></description>
            <asymptote>

              import graph3;

              //ASY file for divthm_space2_3D.asy in Chapter 14

              size(282,282,IgnoreAspect);
              //currentprojection=perspective(7,2,1);
              currentprojection=orthographic(-17,32,12.6);
              defaultrender.merge=true;

              // setup and draw the axes
              real[] myxchoice={1};
              real[] myychoice={-1,1};
              real[] myzchoice={2};
              defaultpen(0.5mm);

              pair xbounds=(-.1,1.2);
              pair ybounds=(-1.3,1.3);
              pair zbounds=(-.1,2.2);

              xaxis3("",xbounds.x,xbounds.y,black,OutTicks(myxchoice),Arrow3(size=3mm));
              yaxis3("",ybounds.x,ybounds.y,black,OutTicks(myychoice),Arrow3(size=3mm));
              zaxis3("",zbounds.x,zbounds.y,black,OutTicks(myzchoice),Arrow3(size=3mm));

              label("$x$",(xbounds.y+0.05*(xbounds.y-xbounds.x),0,0));
              label("$y$",(0,ybounds.y+0.05*(ybounds.y-ybounds.x),0));
              label("$z$",(0,0,zbounds.y+0.05*(zbounds.y-zbounds.x)));

              //Draw the planar parabola
              triple f(pair t) {
                return (t.y*(1-t.x^2),t.x,0);//
              }
              surface s=surface(f,(-1,0),(1,1),8,8,usplinetype=new splinetype[] {notaknot,notaknot,monotonic},vsplinetype=new splinetype[] {notaknot,notaknot,monotonic});
              pen p=rgb(.7,0,0);
              draw(s,rgb(1,.6,.6)+opacity(.7),meshpen=p);

              //Draw plane over parabola
              triple f(pair t) {
                return (t.y*(1-t.x^2),t.x,2*t.y*(1-t.x^2));//
              }
              surface s=surface(f,(-1,0),(1,1),8,8,usplinetype=new splinetype[] {notaknot,notaknot,monotonic},vsplinetype=new splinetype[] {notaknot,notaknot,monotonic});
              pen p=rgb(0,0,.7);
              draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

              //Draw parabolic cylinder side
              triple f(pair t) {
                return ((1-t.x^2),t.x,2*t.y*(1-t.x^2));//
              }
              surface s=surface(f,(-1,0),(1,1),8,8,usplinetype=new splinetype[] {notaknot,notaknot,monotonic},vsplinetype=new splinetype[] {notaknot,notaknot,monotonic});
              pen p=rgb(0,0,.7);
              draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

              pen curvepen=.4mm+blue;
              triple f(real t) {return (1-t^2,t,0);}
              path3 mypath=graph(f,-1,1,operator ..);
              draw(mypath,curvepen);

              triple f(real t) {return (1-t^2,t,2*(1-t^2));}
              path3 mypath=graph(f,-1,1,operator ..);
              draw(mypath,curvepen);

            </asymptote>
          </image>
        </figure>

        <p>
          Verify the Divergence Theorem by finding the total outward flux of <m>\vec F</m> across <m>\surfaceS</m>, and show this is equal to <m>\iiint_D \divv\vec F\, dV</m>.
        </p>
      </statement>
      <solution>
        <p>
          The surface <m>\surfaceS</m> is piecewise smooth,
          comprising surfaces <m>\surfaceS_1</m>,
          which is part of the plane <m>z=2x</m>,
          surface <m>\surfaceS_2</m>, which is part of the cylinder <m>x=1-y^2</m>,
          and surface <m>\surfaceS_3</m>,
          which is part of the plane <m>z=0</m>.
          To find the total outward flux across <m>\surfaceS</m>, we need to compute the outward flux across each of these three surfaces.
        </p>

        <p>
          We leave it to the reader to confirm that surfaces <m>\surfaceS_1</m>,
          <m>\surfaceS_2</m> and <m>\surfaceS_3</m> can be parametrized by <m>\vec r_1</m>,
          <m>\vec r_2</m> and <m>\vec r_3</m> respectively as
          <md>
            <mrow>\vec r_1(u,v) \amp = \la v(1-u^2), u, 2v(1-u^2)\ra,</mrow>
            <mrow>\vec r_2(u,v) \amp = \la (1-u^2), u, 2v(1-u^2)\ra,</mrow>
            <mrow>\vec r_3(u,v) \amp = \la v(1-u^2), u, 0\ra</mrow>
          </md>,
          where <m>-1\leq u\leq 1</m> and
          <m>0\leq v\leq 1</m> for all three functions.
        </p>

        <p>
          We compute a unit normal vector <m>\vec n</m> for each as <m>\frac{\vec r_u\times\vec r_v}{\snorm{\vec r_u\times\vec r_v}}</m>,
          though recall that as we are integrating <m>\vec F\cdot \vec n\, dS</m>,
          we actually only use <m>\vec r_u\times\vec r_v</m>.
          Finally, in previous flux computations,
          it did not matter which direction <m>\vec n</m> pointed as long as we made note of its direction.
          When using the Divergence Theorem,
          we need <m>\vec n</m> to point to the outside of the closed surface,
          so in practice this means we'll either use
          <m>\vec r_u\times\vec r_v</m> or <m>\vec r_v\times\vec r_u</m>,
          depending on which points outside of the closed surface <m>\surfaceS</m>.
        </p>

        <p>
          We leave it to the reader to confirm the following cross products and integrations are correct.
        </p>

        <p>
          For <m>\surfaceS_1</m>,
          we need to use <m>\vec r_{1v}\times\vec r_{1u} = \langle 2(u^2-1),0,1-u^2\rangle</m>.
          (Note the <m>z</m>-component is nonnegative as <m>u\leq 1</m>,
          therefore this vector always points up,
          meaning <em>to the outside</em>, of <m>\surfaceS</m>.)
          The flux across <m>\surfaceS_1</m> is:
          <md>
            <mrow>\text{ Flux across }\surfaceS_1:\,   \amp = \iint_{\surfaceS_1} \vec F\cdot \vec n_1\, dS</mrow>
            <mrow>\amp = \int_0^1\int_{-1}^1 \vec F\big(\vec r_1(u,v)\big)\cdot \big(\vec r_{1v}\times\vec r_{1u}\big)\, du\, dv</mrow>
            <mrow>\amp = \int_0^1\int_{-1}^1 \la v(1-u^2)+u, u^2,4v(1-u^2)\ra \cdot \la 2(u^2-1),0,1-u^2\ra\, du\, dv</mrow>
            <mrow>\amp = \int_0^1\int_{-1}^1 \big(2u^4v+2u^3-4u^2v-2u+2v\big)\, du\, dv</mrow>
            <mrow>\amp = \frac{16}{15}</mrow>
          </md>.
        </p>

        <p>
          For <m>\surfaceS_2</m>,
          we use <m>\vec r_{2u}\times\vec r_{2v} = \langle 2(1-u^2), 4u(1-u^2),0\rangle</m>.
          (Note the <m>x</m>-component is always nonnegative,
          meaning this vector points outside <m>\surfaceS</m>.)
          The flux across <m>\surfaceS_2</m> is:
          <md>
            <mrow>\text{ Flux across } \surfaceS_2:\,  \amp = \iint_{\surfaceS_2} \vec F\cdot \vec n_2\, dS</mrow>
            <mrow>\amp = \int_0^1\int_{-1}^1 \vec F\big(\vec r_2(u,v)\big)\cdot \big(\vec r_{2u}\times\vec r_{2v}\big)\, du\, dv</mrow>
            <mrow>\amp = \int_0^1\int_{-1}^1 \la 1-u^2+u, u^2, 4v(1-u^2)\ra \cdot \la 2(1-u^2), 4u(1-u^2),0\ra\, du\, dv</mrow>
            <mrow>\amp = \int_0^1\int_{-1}^1 \big(4u^5-2u^4-2u^3+4u^2-2u-2\big)\, du\, dv</mrow>
            <mrow>\amp = \frac{32}{15}</mrow>
          </md>.
        </p>

        <p>
          For <m>\surfaceS_3</m>,
          we use <m>\vec r_{3u}\times\vec r_{3v} = \langle 0,0,u^2-1\rangle</m>.
          (Note the <m>z</m>-component is never positive,
          meaning this vector points down, outside of <m>\surfaceS</m>.)
          The flux across <m>\surfaceS_3</m> is:
          <md>
            <mrow>\text{ Flux across } \surfaceS_3:\,  \amp = \iint_{\surfaceS_3} \vec F\cdot \vec n_3\, dS</mrow>
            <mrow>\amp = \int_0^1\int_{-1}^1 \vec F\big(\vec r_3(u,v)\big)\cdot \big(\vec r_{3u}\times\vec r_{3v}\big)\, du\, dv</mrow>
            <mrow>\amp = \int_0^1\int_{-1}^1 \la v(1-u^2)+u,u^2,0\ra \cdot \la 0,0,u^2-1\ra\, du\, dv</mrow>
            <mrow>\amp = \int_0^1\int_{-1}^1 0\, du\, dv</mrow>
            <mrow>\amp = 0</mrow>
          </md>.
        </p>

        <p>
          Thus the total outward flux,
          measured by surface integrals across all three component surfaces of <m>\surfaceS</m>, is <m>16/15+32/15+0 = 48/15 = 16/5 = 3.2</m>.
          We now find the total outward flux by integrating <m>\divv \vec F</m> over <m>D</m>.
        </p>

        <p>
          Following the steps outlined in <xref ref="sec_triple_int">Section</xref>,
          we see the bounds of <m>x</m>,
          <m>y</m> and <m>z</m> can be set as (thinking <q>surface to surface,
          curve to curve, point to point</q>):
          <me>
            0\leq z\leq 2x; 0\leq x\leq 1-y^2; -1\leq y\leq 1
          </me>.
        </p>

        <p>
          With <m>\divv \vec F = 1+2y+2 = 2y+3</m>,
          we find the total outward flux of <m>\vec F</m> over <m>\surfaceS</m> as:
          <me>
            \text{ Flux = }  \iiint_D\divv \vec F\, dV = \int_{-1}^1\int_0^{1-y^2}\int_0^{2x}\big(2y+3\big)\, dz\, dx\, dy = 16/5
          </me>,
          the same result we obtained previously.
        </p>
      </solution>
    </example>

    <p>
      In <xref ref="ex_divthm_space2">Example</xref>
      we see that the total outward flux of a vector field across a closed surface can be found two different ways because of the Divergence Theorem.
      One computation took far less work to obtain.
      In that particular case,
      since <m>\surfaceS</m> was comprised of three separate surfaces,
      it was far simpler to compute one triple integral than three surface integrals
      (each of which required partial derivatives and a cross product).
      In practice, if outward flux needs to be measured,
      one would choose only one method.
      We will use both methods in this section simply to reinforce the truth of the Divergence Theorem.
    </p>

    <p>
      We practice again in the following example.
    </p>

    <example xml:id="ex_divthm_space1">
      <title>Using the Divergence Theorem in space</title>
      <statement>
        <p>
          Let <m>\surfaceS</m> be the surface formed by the paraboloid <m>z=1-x^2-y^2</m>,
          <m>z\geq 0</m>,
          and the unit disk centered at the origin in the <m>xy</m>-plane,
          graphed in <xref ref="fig_divthm_space1">Figure</xref>,
          and let <m>\vec F = \langle 0,0,z\rangle</m>.
          (This surface and vector field were used in <xref ref="ex_surfflux2">Example</xref>.)
        </p>

        <figure xml:id="fig_divthm_space1">
          <caption>The surfaces used in  <xref ref="ex_divthm_space1">Example</xref>.</caption>
          <!-- \apexincludemedia{width=145pt,3Dmenu,activate=onclick,deactivate=onclick,
          3Droll=0,
          3Dortho=0.004853160120546818,
          3Dc2c=0.7607786655426025 0.5903141498565674 0.2697128355503082,
          3Dcoo=-4.848384857177734 2.0102698802948 61.921504974365234,
          3Droo=399.9999594035934,
          3Dlights=Headlamp,add3Djscript=asylabels.js} -->
          <image xml:id="img_divthm_space1_3D" width="47%">
            <description></description>
            <asymptote>

              import graph3;

              //ASY file for figsurfint1_3D.asy in Chapter 14

              size(282,282,IgnoreAspect);
              //currentprojection=perspective(7,2,1);
              currentprojection=orthographic(22.8,20,5.5);
              defaultrender.merge=true;

              // setup and draw the axes
              real[] myxchoice={1};
              real[] myychoice={2};
              real[] myzchoice={3};
              defaultpen(0.5mm);

              pair xbounds=(-1.1,1.1);
              pair ybounds=(-1.1,1.1);
              pair zbounds=(-.1,1.1);

              xaxis3("",xbounds.x,xbounds.y,black,OutTicks(myxchoice),Arrow3(size=3mm));
              yaxis3("",ybounds.x,ybounds.y,black,OutTicks(myychoice),Arrow3(size=3mm));
              zaxis3("",zbounds.x,zbounds.y,black,OutTicks(myzchoice),Arrow3(size=3mm));

              label("$x$",(xbounds.y+0.05*(xbounds.y-xbounds.x),0,0));
              label("$y$",(0,ybounds.y+0.05*(ybounds.y-ybounds.x),0));
              label("$z$",(0,0,zbounds.y+0.05*(zbounds.y-zbounds.x)));

              //Draw the plane unit disk
              triple f(pair t) {
                return (t.y*cos(t.x),t.y*sin(t.x),0);//
              }
              surface s=surface(f,(-pi/2,0),(3pi/2,1),8,8,usplinetype=Spline,vsplinetype=new splinetype[] {notaknot,notaknot,monotonic});
              pen p=rgb(.7,0,0);
              draw(s,rgb(1,.6,.6)+opacity(.7),meshpen=p);

              //Draw paraboloid over unit disk
              triple f(pair t) {
                return (t.y*cos(t.x),t.y*sin(t.x),1-t.y^2);//
              }
              surface s=surface(f,(0,0),(2pi,1),8,8,Spline);
              pen p=rgb(0,0,.7);
              draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

              pen curvepen=.6mm+blue;
              triple f(real t) {return (cos(t),sin(t),0);}
              path3 mypath=graph(f,0,2pi,operator ..);
              draw(mypath,curvepen);

            </asymptote>
          </image>
        </figure>

        <p>
          Verify the Divergence Theorem;
          find the total outward flux across <m>\surfaceS</m> and evaluate the triple integral of <m>\divv \vec F</m>,
          showing that these two quantities are equal.
        </p>
      </statement>
      <solution>
        <p>
          We find the flux across <m>\surfaceS</m> first.
          As <m>\surfaceS</m> is piecewise<ndash/>smooth,
          we decompose it into smooth components <m>\surfaceS_1</m>,
          the disk,
          and <m>\surfaceS_2</m>, the paraboloid,
          and find the flux across each.
        </p>

        <p>
          In <xref ref="ex_surfflux2">Example</xref>,
          we found the flux across <m>\surfaceS_1</m> is 0.
          We also found that the flux across <m>\surfaceS_2</m> is <m>\pi/2</m>.
          (In that example,
          the normal vector had a positive <m>z</m> component hence was an outer normal.)
          Thus the total outward flux is <m>0+\pi/2 = \pi/2</m>.
        </p>

        <p>
          We now compute <m>\iiint_D \divv \vec F\, dV</m>.
          We can describe <m>D</m> as the domain bounded by (think <q>surface to surface,
          curve to curve, point to point</q>):
          <me>
            0\leq z\leq 1-x^2-y^2,  -\sqrt{1-x^2}\leq y\leq \sqrt{1-x^2}, -1\leq x\leq 1
          </me>.
        </p>

        <p>
          This description of <m>D</m> is not very easy to integrate.
          With polar, we can do better.
          Let <m>R</m> represent the unit disk,
          which can be described in polar simply as <m>r</m>,
          where <m>0\leq r\leq 1</m> and <m>0\leq \theta\leq 2\pi</m>.
          With <m>x=r\cos \theta</m> and <m>y=r\sin\theta</m>,
          the surface <m>\surfaceS_2</m> becomes
          <me>
            z=1-x^2-y^2 \Rightarrow 1-(r\cos\theta)^2-(r\sin\theta)^2 \Rightarrow 1-r^2
          </me>.
        </p>

        <p>
          Thus <m>D</m> can be described as the domain bounded by:
          <me>
            0\leq z\leq 1-r^2, 0\leq r\leq 1, 0\leq \theta\leq 2\pi
          </me>.
        </p>

        <p>
          With <m>\divv \vec F = 1</m>,
          we can integrate, recalling that <m>dV = r\, dz\, dr\, d\theta</m>:
          <me>
            \iiint_D\divv \vec F\, dV = \int_0^{2\pi}\int_0^1\int_0^{1-r^2} r\, dz\, dr\, d\theta = \frac{\pi}2
          </me>,
          which matches our flux computation above.
        </p>
      </solution>
    </example>

    <example xml:id="ex_divthm_space3">
      <title>A <q>paradox</q> of the Divergence Theorem and Gauss's Law</title>
      <statement>
        <p>
          The magnitude of many physical quantities
          (such as light intensity or electromagnetic and gravitational forces)
          follow an <q>inverse square law</q>:
          the magnitude of the quantity at a point is inversely proportional to the square of the distance to the source of the quantity.
              <idx><h>Gauss's Law</h></idx>
        </p>

        <p>
          Let a point light source be placed at the origin and let <m>\vec F</m> be the vector field which describes the intensity and direction of the emanating light.
          At a point <m>(x,y,z)</m>,
          the unit vector describing the direction of the light passing through that point is <m>\langle x,y,z\rangle/\sqrt{x^2+y^2+z^2}</m>.
          As the intensity of light follows the inverse square law,
          the magnitude of <m>\vec F</m> at <m>(x,y,z)</m> is
          <m>k/(x^2+y^2+z^2)</m> for some constant <m>k</m>.
          Taken together,
          <me>
            \vec F(x,y,z) = \frac{k}{(x^2+y^2+z^2)^{3/2}}\langle x,y,z\rangle
          </me>.
        </p>

        <p>
          Consider the cube, centered at the origin,
          with sides of length <m>2a</m> for some <m>a \gt 0</m> (hence corners of the cube lie at <m>(a,a,a)</m>,
          <m>(-a,-a,-a)</m>,
          etc., as shown in <xref ref="fig_divthm_space3">Figure</xref>).
          Find the flux across the six faces of the cube and compare this to <m>\iint_D \divv\vec F\, dV</m>.
        </p>

        <figure xml:id="fig_divthm_space3">
          <caption>The cube used in  <xref ref="ex_divthm_space3">Example</xref>.</caption>
          <!-- \apexincludemedia{width=150pt,3Dmenu,activate=onclick,deactivate=onclick,
          3Droll=0,
          3Dortho=0.004477982874959707,
          3Dc2c=0.7997961044311523 0.5269954204559326 0.28740552067756653,
          3Dcoo=9.648120880126953 3.759108543395996 12.013349533081055,
          3Droo=399.9999533297849,
          3Dlights=Headlamp,add3Djscript=asylabels.js} -->
          <image xml:id="img_divthm_space3_3D" width="47%">
            <description></description>
            <asymptote>

              import graph3;

              //ASY file for divthm_space3_3D.asy in Chapter 14

              size(282,282,IgnoreAspect);
              //currentprojection=perspective(7,2,1);
              currentprojection=orthographic(30,20,12);
              defaultrender.merge=true;

              // setup and draw the axes
              real[] myxchoice={};
              real[] myychoice={};
              real[] myzchoice={};
              defaultpen(0.5mm);

              pair xbounds=(-1.2,1.2);
              pair ybounds=(-1.2,1.2);
              pair zbounds=(-1.2,1.2);

              xaxis3("",xbounds.x,xbounds.y,black,OutTicks(myxchoice),Arrow3(size=3mm));
              yaxis3("",ybounds.x,ybounds.y,black,OutTicks(myychoice),Arrow3(size=3mm));
              zaxis3("",zbounds.x,zbounds.y,black,OutTicks(myzchoice),Arrow3(size=3mm));

              label("$x$",(xbounds.y+0.05*(xbounds.y-xbounds.x),0,0));
              label("$y$",(0,ybounds.y+0.05*(ybounds.y-ybounds.x),0));
              label("$z$",(0,0,zbounds.y+0.05*(zbounds.y-zbounds.x)));

              //Draw the faces of the cube
              pen p=rgb(0,0,.7);

              triple f(pair t) {
                return (t.x,t.y,1);//
              }
              surface s=surface(f,(-1,-1),(1,1),1,1,usplinetype=new splinetype[] {notaknot,notaknot,monotonic},vsplinetype=new splinetype[] {notaknot,notaknot,monotonic});
              draw(s,rgb(.6,.6,1)+opacity(.5),meshpen=p);

              triple f(pair t) {
                return (t.x,t.y,-1);//
              }
              surface s=surface(f,(-1,-1),(1,1),1,1,usplinetype=new splinetype[] {notaknot,notaknot,monotonic},vsplinetype=new splinetype[] {notaknot,notaknot,monotonic});
              draw(s,rgb(.6,.6,1)+opacity(.5),meshpen=p);

              triple f(pair t) {
                return (t.x,1,t.y);//
              }
              surface s=surface(f,(-1,-1),(1,1),1,1,usplinetype=new splinetype[] {notaknot,notaknot,monotonic},vsplinetype=new splinetype[] {notaknot,notaknot,monotonic});
              draw(s,rgb(.6,.6,1)+opacity(.5),meshpen=p);

              triple f(pair t) {
                return (t.x,-1,t.y);//
              }
              surface s=surface(f,(-1,-1),(1,1),1,1,usplinetype=new splinetype[] {notaknot,notaknot,monotonic},vsplinetype=new splinetype[] {notaknot,notaknot,monotonic});
              draw(s,rgb(.6,.6,1)+opacity(.5),meshpen=p);

              triple f(pair t) {
                return (1,t.x,t.y);//
              }
              surface s=surface(f,(-1,-1),(1,1),1,1,usplinetype=new splinetype[] {notaknot,notaknot,monotonic},vsplinetype=new splinetype[] {notaknot,notaknot,monotonic});
              draw(s,rgb(.6,.6,1)+opacity(.5),meshpen=p);

              triple f(pair t) {
                return (-1,t.x,t.y);//
              }
              surface s=surface(f,(-1,-1),(1,1),1,1,usplinetype=new splinetype[] {notaknot,notaknot,monotonic},vsplinetype=new splinetype[] {notaknot,notaknot,monotonic});
              draw(s,rgb(.6,.6,1)+opacity(.5),meshpen=p);

              label("$(a,a,a)$",(1.05,1.05,1.1));
              label("$(-a,-a,-a)$",(-1.05,-1.05,-1.1));
              dot((1,1,1),black+1mm);

              dot((-1,-1,-1),black+1mm);

            </asymptote>
          </image>
        </figure>
      </statement>
      <solution>
        <p>
          Let <m>\surfaceS_1</m> be the <q>top</q> face of the cube,
          which can be parametrized by <m>\vec r(u,v) = \langle u,v,a\rangle</m> for
          <m>-a\leq u\leq a</m>, <m>-a\leq v\leq a</m>.
          We leave it to the reader to confirm that <m>\vec r_u\times \vec r_v = \langle 0,0,1\rangle</m>,
          which points outside of the cube.
        </p>

        <p>
          The flux across this face is:
          <md>
            <mrow>\text{ Flux }  \amp = \iint_{\surfaceS_1} \vec F\cdot \vec n\, dS</mrow>
            <mrow>\amp = \int_{-a}^a\int_{-a}^a \vec F\big(\vec r(u,v)\big)\cdot \big(\vec r_u\times \vec r_v\big)\, du\, dv</mrow>
            <mrow>\amp = \int_{-a}^a\int_{-a}^a \frac{k\ a}{(u^2+v^2+a^2)^{3/2}}\, du\, dv.</mrow>
            <intertext>This double integral is <em>not</em> trivial to compute, requiring multiple trigonometric substitutions. This example is not meant to stress integration techniques, so we leave it to the reader to confirm the result is</intertext>
            <mrow>\amp = \frac{2k\pi}3</mrow>
          </md>.
        </p>

        <p>
          Note how the result is independent of <m>a</m>;
          no matter the size of the cube,
          the flux through the top surface is always <m>2k\pi/3</m>.
        </p>

        <p>
          An argument of symmetry shows that the flux through each of the six faces is <m>2k\pi/3</m>,
          thus the total flux through the faces of the cube is <m>6\times2k\pi/3 = 4k\pi</m>.
        </p>

        <p>
          It takes a bit of algebra, but we can show that <m>\divv\vec F = 0</m>.
          Thus the Divergence Theorem would seem to imply that the total flux through the faces of the cube should be
          <me>
            \text{ Flux } =\iiint_D \divv \vec F\, dV = \iiint_D 0\, dV = 0
          </me>,
          but clearly this does not match the result from above.
          What went wrong?
        </p>

        <p>
          Revisit the statement of the Divergence Theorem.
          One of the conditions is that the components of <m>\vec F</m> must be differentiable on the domain enclosed by the surface.
          In our case, <m>\vec F</m> is <em>not</em>
          differentiable at the origin <mdash/> it is not even defined!
          As <m>\vec F</m> does not satisfy the conditions of the Divergence Theorem,
          it does not apply,
          and we cannot expect <m>\iint_\surfaceS \vec F\cdot\vec n\, dA = \iiint_D \divv\vec F\, dV</m>.
        </p>

        <p>
          Since <m>\vec F</m> is differentiable everywhere except the origin,
          the Divergence Theorem does apply over any domain that does not include the origin.
          Let <m>\surfaceS_2</m> be any surface that encloses the cube used before,
          and let <m>\hat D</m> be the domain <em>between</em>
          the cube and <m>\surfaceS_2</m>;
          note how <m>\hat D</m> does not include the origin and so the Divergence Theorem does apply over this domain.
          The total outward flux over <m>\hat D</m> is thus <m>\iint_{\hat D}\divv \vec F\, dV = 0</m>,
          which means the amount of flux coming out of
          <m>\surfaceS_2</m> is the same as the amount of flux coming out of the cube.
          The conclusion: the flux across <em>any</em>
          surface enclosing the origin will be <m>4k\pi</m>.
        </p>

        <p>
          This has an important consequence in electrodynamics.
          Let <m>q</m> be a point charge at the origin.
          The electric field generated by this point charge is
          <me>
            \vec E = \frac{q}{4\pi \epsilon_0}\frac{\la x,y,z\ra}{(x^2+y^2+z^2)^{3/2}}
          </me>,
          <ie/>, it is <m>\vec F</m> with <m>k = q/(4\pi \epsilon_0)</m>,
          where <m>\epsilon_0</m> is a physical constant
          (the <q>permittivity of free space</q>).
          Gauss's Law states that the outward flux of <m>\vec E</m> across any surface enclosing the origin is <m>q/\epsilon_0</m>.
        </p>
      </solution>
    </example>

    <!-- <figure xml:id="vid-veccalc-stokesdiv-gauss">
      <caption>Exploring Gauss's Law</caption>
      <video youtube="Zc_OAF_CRIQ"/>
    </figure> -->

    <p>
      Our interest in the Divergence Theorem is twofold.
      First, its truth alone is interesting:
      to study the behavior of a vector field across a closed surface,
      one can examine properties of that field within the surface.
      Secondly, it offers an alternative way of computing flux.
      When there are multiple methods of computing a desired quantity,
      one has power to select the easiest computation as illustrated next.
    </p>

    <example xml:id="ex_divthm_space4">
      <title>Using the Divergence Theorem to compute flux</title>
      <statement>
        <p>
          Let <m>\surfaceS</m> be the cube bounded by the planes <m>x=\pm 1</m>,
          <m>y=\pm 1</m>, <m>z=\pm 1</m>,
          and let <m>\vec F = \langle x^2y,2yz,x^2z^3\rangle</m>.
          Compute the outward flux of <m>\vec F</m> over <m>\surfaceS</m>.
        </p>
      </statement>
      <solution>
        <p>
          We compute <m>\divv \vec F = 2xy+2z+3x^2z^2</m>.
          By the Divergence Theorem,
          the outward flux is the triple integral over the domain <m>D</m> enclosed by <m>\surfaceS</m>:
          <me>
            \text{ Outward flux: }  \int_{-1}^1\int_{-1}^1\int_{-1}^1(2xy+2z+3x^2z^2)\, dz\, dy\, dx = \frac83
          </me>.
        </p>

        <p>
          The direct flux computation requires six surface integrals,
          one for each face of the cube.
          The Divergence Theorem offers a much more simple computation.
        </p>
      </solution>
    </example>
  </subsection>

  <subsection>
    <title>Stokes' Theorem</title>
    <p>
      Just as the spatial Divergence Theorem of this section is an extension of the planar Divergence Theorem, Stokes' Theorem is the spatial extension of Green's Theorem.
      Recall that Green's Theorem states that the circulation of a vector field around a closed curve in the plane is equal to the sum of the curl of the field over the region enclosed by the curve.
      Stokes' Theorem effectively makes the same statement:
      given a closed curve that lies on a surface <m>\surfaceS</m>, the circulation of a vector field around that curve is the same as the sum of
      <q>the curl of the field</q>
      across the enclosed surface.
      We use quotes around <q>the curl of the field</q>
      to signify that this statement is not quite correct,
      as we do not sum <m>\curl \vec F</m>,
      but <m>\curl \vec F\cdot\vec n</m>,
      where <m>\vec n</m> is a unit vector normal to <m>\surfaceS</m>. That is,
      we sum the portion of <m>\curl \vec F</m> that is orthogonal to <m>\surfaceS</m> at a point.
    </p>

    <!-- <figure xml:id="vid-veccalc-stokesdiv-stokes-thm">
      <caption>Introducing Stokes' Theorem</caption>
      <video youtube="WzrQbtC7ZiU"/>
    </figure> -->

    <p>
      Green's Theorem dictated that the curve was to be traversed counterclockwise when measuring circulation.
      Stokes' Theorem will follow a right hand rule:
      when the thumb of one's right hand points in the direction of <m>\vec n</m>,
      the path <m>C</m> will be traversed in the direction of the curling fingers of the hand
      (this is equivalent to traversing counterclockwise in the plane).
    </p>

    <theorem xml:id="thm_stokes_thm">
      <title>Stokes' Theorem</title>
      <statement>
        <p>
          Let <m>\surfaceS</m> be a piecewise smooth,
          orientable surface whose boundary is a piecewise smooth curve <m>C</m>,
          let <m>\vec n</m> be a unit vector normal to <m>\surfaceS</m>, let <m>C</m> be traversed with respect to <m>\vec n</m> according to the right hand rule,
          and let the components of <m>\vec F</m> have continuous first partial derivatives over <m>\surfaceS</m>. Then
              <idx><h>Stokes' Theorem</h></idx>
          <me>
            \oint_C \vec F\cdot \, d\vec r = \iint_\surfaceS (\curl\vec F)\cdot \vec n\, dS
          </me>.
        </p>
      </statement>
    </theorem>

    <p>
      In general, the best approach to evaluating the surface integral in Stokes' Theorem is to parametrize the surface <m>\surfaceS</m> with a function <m>\vec r(u,v)</m>.
      We can find a unit normal vector <m>\vec n</m> as
      <me>
        \vec n = \frac{\vec r_u\times\vec r_v}{\snorm{\vec r_u\times\vec r_v}}
      </me>.
    </p>

    <p>
      Since <m>dS = \snorm{\vec r_u\times\vec r_v}\, dA</m>,
      the surface integral in practice is evaluated as
      <me>
        \iint_\surfaceS (\curl \vec F)\cdot (\vec r_u\times\vec r_v)\, dA
      </me>,
      where <m>\vec r_u\times\vec r_v</m> may be replaced by
      <m>\vec r_v\times\vec r_u</m> to properly match the direction of this vector with the orientation of the parametrization of <m>C</m>.
    </p>

    <example xml:id="ex_stokes1">
      <title>Verifying Stokes' Theorem</title>
      <statement>
        <p>
          Considering the planar surface <m>f(x,y) = 7-2x-2y</m>,
          let <m>C</m> be the curve in space that lies on this surface above the circle of radius 1 and centered at <m>(1,1)</m> in the <m>xy</m>-plane,
          let <m>\surfaceS</m> be the planar region enclosed by <m>C</m>,
          as illustrated in <xref ref="fig_stokes1">Figure</xref>,
          and let <m>\vec F = \langle x+y,2y, y^2\rangle</m>.
          Verify Stoke's Theorem by showing <m>\oint_C \vec F\cdot \, d\vec r = \iint_\surfaceS (\curl\vec F)\cdot \vec n\, dS</m>.
        </p>

        <figure xml:id="fig_stokes1">
          <caption>As given in <xref ref="ex_stokes1">Example</xref>, the surface <m>\surfaceS</m><nbsp/>is the portion of the plane bounded by the curve.</caption>
          <!-- \apexincludemedia{width=145pt,3Dmenu,activate=onclick,deactivate=onclick,
          3Droll=0,
          3Dortho=0.004444748163223267,
          3Dc2c=0.5374560356140137 0.806864321231842 0.24517536163330078,
          3Dcoo=45.07202911376953 32.75735855102539 55.02788543701172,
          3Droo=399.9999566444115,
          3Dlights=Headlamp,add3Djscript=asylabels.js} -->
          <image xml:id="fig_stokes1_3D" width="47%">
            <description></description>
            <asymptote>

              import graph3;

              //ASY file for figstokes1_3D.asy in Chapter 13

              size(282,282,IgnoreAspect);
              //currentprojection=perspective(7,2,1);
              currentprojection=orthographic(11,19,27);
              defaultrender.merge=true;

              // setup and draw the axes
              real[] myxchoice={1,2};
              real[] myychoice={1,2};
              real[] myzchoice={2,4,6,8};
              defaultpen(0.5mm);

              pair xbounds=(-.1,2.5);
              pair ybounds=(-.1,2.5);
              pair zbounds=(-.1,9);

              xaxis3("",xbounds.x,xbounds.y,black,OutTicks(myxchoice),Arrow3(size=3mm));
              yaxis3("",ybounds.x,ybounds.y,black,OutTicks(myychoice),Arrow3(size=3mm));
              zaxis3("",zbounds.x,zbounds.y,black,OutTicks(myzchoice),Arrow3(size=3mm));

              label("$x$",(xbounds.y+0.05*(xbounds.y-xbounds.x),0,0));
              label("$y$",(0,ybounds.y+0.05*(ybounds.y-ybounds.x),0));
              label("$z$",(0,0,zbounds.y+0.05*(zbounds.y-zbounds.x)));

              //Draw the plane  z=7-2x-2y
              triple f(pair t) {
                return (t.x,t.y,-2t.x-2t.y+7);//
              }
              surface s=surface(f,(-.1,-.1),(2.2,2.2),8,8,usplinetype=new splinetype[] {notaknot,notaknot,monotonic},vsplinetype=new splinetype[] {notaknot,notaknot,monotonic});
              pen p=rgb(0,0,.7);
              draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

              triple g(real t) {return (cos(t)+1,sin(t)+1,7-2(cos(t)+1)-2(sin(t)+1));}
              path3 mypath=graph(g,0,2pi,operator ..);
              draw(mypath,blue+linewidth(2));

              triple g(real t) {return (cos(t)+1,sin(t)+1,0);}
              path3 mypath=graph(g,0,2pi,operator ..);
              draw(mypath,blue+dashed+linewidth(1));

              label("$\mathcal{S}$",(1,1,4));
              //draw((0,1,0)--(0,3,0)--(3,1,0)--cycle,curvepen);

              // ////////////////////////////////////
              //    SAMPLE CODE

              // defaultpen(fontsize(10pt));

              //real f(pair z) {return -z.x^4+2*z.x^2-z.y^4+2*z.y^2;}
              //surface s=surface(f,(-1.5,-1.5),(1.5,1.5),Spline);
              //pen p=rgb(0,0,.7);
              //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

              //triple f(pair t) {
              //  return (cos(t.x)*1.5*cos(t.y),sin(t.x)*cos(t.y),sin(t.y));
              //}
              //surface s=surface(f,(0,0),(pi,2*pi),8,8,Spline);
              //pen p=rgb(0,0,.7);
              //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

              //draw(s,paleblue);
              //draw(s,lightblue,meshpen=black+thick(),nolight,render(merge=true));
              //draw(mypath,2bp+blue);

              //triple g(real t) {return (t,t,-2*t^4+4*t^2);}
              //path3 mypath=graph(g,-1,1,operator ..);
              //draw(mypath,blue+dashed+linewidth(2));

              //pen p=rgb(0,0,1);
              //draw(s,paleblue+opacity(.5),meshpen=p,render(merge=true));

            </asymptote>
          </image>
        </figure>
      </statement>
      <solution>
        <p>
          We begin by parametrizing <m>C</m> and then find the circulation.
          A unit circle centered at <m>(1,1)</m> can be parametrized with <m>x=\cos t+1</m>,
          <m>y=\sin t+1</m> on <m>0\leq t\leq 2\pi</m>;
          to put this curve on the surface <m>f</m>,
          make the <m>z</m> component equal <m>f(x,y)</m>:
          <m>z = 7-2(\cos t+1)-2(\sin t+1) = 3-2\cos t - 2\sin t</m>.
          All together,
          we parametrize <m>C</m> with <m>\vec r(t) = \la \cos t+1, \sin t+1, 3-2\cos t-2\sin t\ra</m>.
        </p>

        <p>
          The circulation of <m>\vec F</m> around <m>C</m> is
          <md>
            <mrow>\oint_C\vec F\cdot \, d\vec r \amp = \int_0^{2\pi}\vec F\big(\vec r(t)\big)\cdot \vrp(t)\, dt</mrow>
            <mrow>\amp = \int_0^{2\pi}\big(2\sin^3t-2\cos t\sin^2t+3\sin^2t-3\cos t\sin t\big)\, dt</mrow>
            <mrow>\amp = 3\pi</mrow>
          </md>.
        </p>

        <p>
          We now parametrize <m>\surfaceS</m>. (We reuse the letter <q>r</q>
          for our surface as this is our custom.) Based on the parametrization of <m>C</m> above,
          we describe <m>\surfaceS</m> with <m>\vec r(u,v) = \la v\cos u+1, v\sin u+1, 3-2v\cos u-2v\sin u\ra</m>,
          where <m>0\leq u\leq 2\pi</m> and <m>0\leq v\leq 1</m>.
        </p>

        <p>
          We leave it to the reader to confirm that <m>\vec r_u\times \vec r_v = \langle 2v,2v,v\rangle</m>.
          As <m>0\leq v\leq 1</m>,
          this vector always has a non-negative <m>z</m>-component,
          which the right<ndash/>hand rule requires given the orientation of <m>C</m> used above.
          We also leave it to the reader to confirm <m>\curl\vec F = \langle 2y,0,-1\rangle</m>.
        </p>

        <p>
          The surface integral of Stokes' Theorem is thus
          <md>
            <mrow>\iint_\surfaceS (\curl\vec F)\cdot \vec n\, dS \amp = \iint_\surfaceS (\curl\vec F)\cdot (\vec r_u\times \vec r_v)\, dA</mrow>
            <mrow>\amp = \int_0^1\int_0^{2\pi} \langle 2v\sin u+2,0,-1\rangle\cdot\langle 2v,2v,v\rangle\, du\, dv</mrow>
            <mrow>\amp = 3\pi</mrow>
          </md>,
          which matches our previous result.
        </p>
      </solution>
    </example>

    <!-- <figure xml:id="vid-veccalc-stokesdiv-stokes-eg1">
      <caption>An example with Stokes' Theorem</caption>
      <video youtube="IxDa_2_Eric"/>
    </figure> -->
    <p>
      One of the interesting results of Stokes' Theorem is that if two surfaces <m>\surfaceS_1</m> and
      <m>\surfaceS_2</m> share the same boundary,
      then <m>\iint_{\surfaceS_1} (\curl \vec F)\cdot \vec n\, dS = \iint_{\surfaceS_2} (\curl \vec F)\cdot \vec n\, dS</m>.
      That is, the value of these two surface integrals is somehow independent of the interior of the surface.
      We demonstrate this principle in the next example.
    </p>

    <example xml:id="ex_stokes2">
      <title>Stokes' Theorem and surfaces that share a boundary</title>
      <statement>
        <p>
          Let <m>C</m> be the curve given in <xref ref="ex_stokes1">Example</xref>
          and note that it lies on the surface <m>z = 6-x^2-y^2</m>.
          Let <m>\surfaceS</m> be the region of this surface bounded by <m>C</m>,
          and let <m>\vec F = \langle x+y,2y,y^2\rangle</m> as in the previous example.
          Compute <m>\iint_\surfaceS (\curl\vec F)\cdot \vec n\, dS</m> to show it equals the result found in the previous example.
        </p>

        <figure xml:id="fig_stokes2">
          <caption>As given in <xref ref="ex_stokes2">Example</xref>, the surface \surfaceS<nbsp/>is the portion of the plane bounded by the curve.</caption>
          <sidebyside widths="47% 47%">
            <figure xml:id="fig_stokes2a_3D">
              <caption/>
              <!-- \apexincludemedia{width=145pt,3Dmenu,activate=onclick,deactivate=onclick,
              3Droll=0,
              3Dortho=0.004444750025868416,
              3Dc2c=0.5374560356140137 0.806864321231842 0.24517536163330078,
              3Dcoo=48.335105895996094 37.655845642089844 31.75312042236328,
              3Droo=399.9999566444115,
              3Dlights=Headlamp,add3Djscript=asylabels.js} -->
              <image xml:id="img_stokes2a_3D">
                <description></description>
                <asymptote>

                  import graph3;

                  //ASY file for figstokes2_3D.asy in Chapter 13

                  size(282,282,IgnoreAspect);
                  //currentprojection=perspective(7,2,1);
                  currentprojection=orthographic(11,19,27);
                  defaultrender.merge=true;

                  // setup and draw the axes
                  real[] myxchoice={1,2};
                  real[] myychoice={1,2};
                  real[] myzchoice={2,4,6,8};
                  defaultpen(0.5mm);

                  pair xbounds=(-.1,2.5);
                  pair ybounds=(-.1,2.5);
                  pair zbounds=(-.1,9);

                  xaxis3("",xbounds.x,xbounds.y,black,OutTicks(myxchoice),Arrow3(size=3mm));
                  yaxis3("",ybounds.x,ybounds.y,black,OutTicks(myychoice),Arrow3(size=3mm));
                  zaxis3("",zbounds.x,zbounds.y,black,OutTicks(myzchoice),Arrow3(size=3mm));

                  label("$x$",(xbounds.y+0.05*(xbounds.y-xbounds.x),0,0));
                  label("$y$",(0,ybounds.y+0.05*(ybounds.y-ybounds.x),0));
                  label("$z$",(0,0,zbounds.y+0.05*(zbounds.y-zbounds.x)));

                  //Draw the plane  z=6-x^2-y^2
                  triple f(pair t) {
                    return (t.x,t.y,6-t.x^2-t.y^2);//
                  }
                  surface s=surface(f,(-.1,-.1),(2.2,2.2),16,16,usplinetype=new splinetype[] {notaknot,notaknot,monotonic},vsplinetype=new splinetype[] {notaknot,notaknot,monotonic});
                  pen p=rgb(0,0,.7);
                  draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                  triple g(real t) {return (cos(t)+1,sin(t)+1,6-(cos(t)+1)^2-(sin(t)+1)^2);}
                  path3 mypath=graph(g,0,2pi,operator ..);
                  draw(mypath,blue+linewidth(2));

                  triple g(real t) {return (cos(t)+1,sin(t)+1,0);}
                  path3 mypath=graph(g,0,2pi,operator ..);
                  draw(mypath,blue+dashed+linewidth(1));

                  label("$\mathcal{S}$",(1,1,5));
                  //draw((0,1,0)--(0,3,0)--(3,1,0)--cycle,curvepen);

                  // ////////////////////////////////////
                  //    SAMPLE CODE

                  // defaultpen(fontsize(10pt));

                  //real f(pair z) {return -z.x^4+2*z.x^2-z.y^4+2*z.y^2;}
                  //surface s=surface(f,(-1.5,-1.5),(1.5,1.5),Spline);
                  //pen p=rgb(0,0,.7);
                  //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                  //triple f(pair t) {
                  //  return (cos(t.x)*1.5*cos(t.y),sin(t.x)*cos(t.y),sin(t.y));
                  //}
                  //surface s=surface(f,(0,0),(pi,2*pi),8,8,Spline);
                  //pen p=rgb(0,0,.7);
                  //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                  //draw(s,paleblue);
                  //draw(s,lightblue,meshpen=black+thick(),nolight,render(merge=true));
                  //draw(mypath,2bp+blue);

                  //triple g(real t) {return (t,t,-2*t^4+4*t^2);}
                  //path3 mypath=graph(g,-1,1,operator ..);
                  //draw(mypath,blue+dashed+linewidth(2));

                  //pen p=rgb(0,0,1);
                  //draw(s,paleblue+opacity(.5),meshpen=p,render(merge=true));

                </asymptote>
              </image>
            </figure>

            <figure xml:id="fig_stokes2b_3D">
              <caption/>
              <!-- \apexincludemedia{width=145pt,3Dmenu,activate=onclick,deactivate=onclick,
              3Droll=0,
              3Dortho=0.004444750025868416,
              3Dc2c=0.5374560356140137 0.806864321231842 0.24517536163330078,
              3Dcoo=48.335105895996094 37.655845642089844 31.75312042236328,
              3Droo=399.9999566444115,
              3Dlights=Headlamp,add3Djscript=asylabels.js} -->
              <image xml:id="img_stokes2b_3D">
                <description></description>
                <asymptote>

                  import graph3;

                  //ASY file for figstokes2_3D.asy in Chapter 13

                  size(282,282,IgnoreAspect);
                  //currentprojection=perspective(7,2,1);
                  currentprojection=orthographic(11,19,27);
                  defaultrender.merge=true;

                  // setup and draw the axes
                  real[] myxchoice={1,2};
                  real[] myychoice={1,2};
                  real[] myzchoice={2,4,6,8};
                  defaultpen(0.5mm);

                  pair xbounds=(-.1,2.5);
                  pair ybounds=(-.1,2.5);
                  pair zbounds=(-.1,9);

                  xaxis3("",xbounds.x,xbounds.y,black,OutTicks(myxchoice),Arrow3(size=3mm));
                  yaxis3("",ybounds.x,ybounds.y,black,OutTicks(myychoice),Arrow3(size=3mm));
                  zaxis3("",zbounds.x,zbounds.y,black,OutTicks(myzchoice),Arrow3(size=3mm));

                  label("$x$",(xbounds.y+0.05*(xbounds.y-xbounds.x),0,0));
                  label("$y$",(0,ybounds.y+0.05*(ybounds.y-ybounds.x),0));
                  label("$z$",(0,0,zbounds.y+0.05*(zbounds.y-zbounds.x)));

                  //Draw the plane  z=7-2x-2y
                  triple f(pair t) {
                    return (t.x,t.y,-2t.x-2t.y+7);//
                  }
                  surface s=surface(f,(-.1,-.1),(2.2,2.2),8,8,usplinetype=new splinetype[] {notaknot,notaknot,monotonic},vsplinetype=new splinetype[] {notaknot,notaknot,monotonic});
                  pen p=rgb(0.7,0,0);
                  draw(s,rgb(1,.6,.6)+opacity(.7),meshpen=p);

                  //Draw the plane  z=6-x^2-y^2
                  triple f(pair t) {
                    return (t.x,t.y,6-t.x^2-t.y^2);//
                  }
                  surface s=surface(f,(-.1,-.1),(2.2,2.2),16,16,usplinetype=new splinetype[] {notaknot,notaknot,monotonic},vsplinetype=new splinetype[] {notaknot,notaknot,monotonic});
                  pen p=rgb(0,0,.7);
                  draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                  triple g(real t) {return (cos(t)+1,sin(t)+1,6-(cos(t)+1)^2-(sin(t)+1)^2);}
                  path3 mypath=graph(g,0,2pi,operator ..);
                  draw(mypath,blue+linewidth(2));

                  triple g(real t) {return (cos(t)+1,sin(t)+1,0);}
                  path3 mypath=graph(g,0,2pi,operator ..);
                  draw(mypath,blue+dashed+linewidth(1));

                  //label("$\mathcal{S}$",(1,1,5));
                  //draw((0,1,0)--(0,3,0)--(3,1,0)--cycle,curvepen);

                  // ////////////////////////////////////
                  //    SAMPLE CODE

                  // defaultpen(fontsize(10pt));

                  //real f(pair z) {return -z.x^4+2*z.x^2-z.y^4+2*z.y^2;}
                  //surface s=surface(f,(-1.5,-1.5),(1.5,1.5),Spline);
                  //pen p=rgb(0,0,.7);
                  //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                  //triple f(pair t) {
                  //  return (cos(t.x)*1.5*cos(t.y),sin(t.x)*cos(t.y),sin(t.y));
                  //}
                  //surface s=surface(f,(0,0),(pi,2*pi),8,8,Spline);
                  //pen p=rgb(0,0,.7);
                  //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                  //draw(s,paleblue);
                  //draw(s,lightblue,meshpen=black+thick(),nolight,render(merge=true));
                  //draw(mypath,2bp+blue);

                  //triple g(real t) {return (t,t,-2*t^4+4*t^2);}
                  //path3 mypath=graph(g,-1,1,operator ..);
                  //draw(mypath,blue+dashed+linewidth(2));

                  //pen p=rgb(0,0,1);
                  //draw(s,paleblue+opacity(.5),meshpen=p,render(merge=true));

                </asymptote>
              </image>
            </figure>
          </sidebyside>

        </figure>
      </statement>
      <solution>
        <p>
          We begin by demonstrating that <m>C</m> lies on the surface <m>z=6-x^2-y^2</m>.
          We can parametrize the <m>x</m> and <m>y</m> components of <m>C</m> with <m>x=\cos t+1</m>,
          <m>y=\sin t+1</m> as before.
          Lifting these components to the surface <m>f</m> gives the <m>z</m> component as <m>z = 6-x^2-y^2 = 6-(\cos t+1)^2-(\sin t+1)^2 = 3-2\cos t-2\sin t</m>,
          which is the same <m>z</m> component as found in <xref ref="ex_stokes1">Example</xref>.
          Thus the curve <m>C</m> lies on the surface <m>z=6-x^2-y^2</m>,
          as illustrated in <xref ref="fig_stokes2">Figure</xref>.
        </p>

        <p>
          Since <m>C</m> and <m>\vec F</m> are the same as in the previous example,
          we already know that <m>\oint_C\vec F\cdot\, d\vec r = 3\pi</m>.
          We confirm that this is also the value of <m>\iint_\surfaceS (\curl\vec F)\cdot \vec n\, dS</m>.
        </p>

        <p>
          We parametrize <m>\surfaceS</m> with
          <me>
            \vec r(u,v) = \langle v\cos u+1,v\sin u+1, 6-(v\cos u+1)^2-(v\sin u+1)^2\rangle
          </me>,
          where <m>0\leq u\leq 2\pi</m> and <m>0\leq v\leq 1</m>,
          and leave it to the reader to confirm that
          <me>
            \vec r_u\times \vec r_v = \la 2v\big(v\cos u+1\big), 2v\big(v\sin u+1\big),v\ra
          </me>,
          which also conforms to the right<ndash/>hand rule with regard to the orientation of <m>C</m>.
          With <m>\curl \vec F = \langle 2y,0,-1\rangle</m> as before, we have
          <md>
            <mrow>\amp\iint_\surfaceS (\curl\vec F)\cdot \vec n\, dS</mrow>
            <mrow>\quad\quad\amp = \int_0^1\int_0^{2\pi} \la 2v\sin u+2,0,-1\ra\cdot \la 2v\big(v\cos u+1\big), 2v\big(v\sin u+1\big),v\ra\, du\, dv </mrow>
            <mrow>\quad\quad\amp =3\pi</mrow>
          </md>.
        </p>

        <p>
          Even though the surfaces used in this example and in <xref ref="ex_stokes1">Example</xref> are very different,
          because they share the same boundary, Stokes' Theorem guarantees they have equal <q>sum of curls</q>
          across their respective surfaces.
        </p>
      </solution>
    </example>

    <!-- <figure xml:id="vid-veccalc-stokesdiv-stokes-eg2">
      <caption>Another example with Stokes' Theorem</caption>
      <video youtube="sIqNIkmYPiE"/>
    </figure> -->
  </subsection>

  <subsection>
    <title>A Common Thread of Calculus</title>
    <p>
      We have threefold interest in each of the major theorems of this chapter:
      the Fundamental Theorem of Line Integrals, Green's, Stokes' and the Divergence Theorems.
      First, we find the beauty of their truth interesting.
      Second, each provides two methods of computing a desired quantity,
      sometimes offering a simpler method of computation.
    </p>

    <p>
      There is yet one more reason of interest in the major theorems of this chapter.
      These important theorems also all share an important principle with the Fundamental Theorem of Calculus,
      introduced in <xref ref="chapter_integration">Chapter</xref>.
    </p>

    <p>
      Revisit this fundamental theorem,
      adopting the notation used heavily in this chapter.
      Let <m>I</m> be the interval <m>[a,b]</m> and let <m>y=F(x)</m> be differentiable on <m>I</m>,
      with <m>F\,'(x) = f(x)</m>.
      The Fundamental Theorem of Calculus states that
      <me>
        \int_I f(x)\, dx = F(b) - F(a)
      </me>.
    </p>

    <p>
      That is, the sum of the rates of change of a function <m>F</m> over an interval <m>I</m> can also be calculated with a certain sum of <m>F</m> itself on the boundary of <m>I</m>
      (in this case, at the points <m>x=a</m> and <m>x=b</m>).
    </p>

    <p>
      Each of the named theorems above can be expressed in similar terms.
      Consider the Fundamental Theorem of Line Integrals:
      given a function <m>f(x,y)</m>,
      the gradient <m>\nabla f</m> is a type of rate of change of <m>f</m>.
      Given a curve <m>C</m> with initial and terminal points <m>A</m> and <m>B</m>,
      respectively,
      this fundamental theorem states that
      <me>
        \int_C \nabla f\, ds = f(B) - f(A)
      </me>,
      where again the sum of a rate of change of <m>f</m> along a curve <m>C</m> can also be evaluated by a certain sum of <m>f</m> at the boundary of <m>C</m> (<ie/>, the points <m>A</m> and <m>B</m>).
    </p>

    <p>
      Green's Theorem is essentially a special case of Stokes' Theorem,
      so we consider just Stokes' Theorem here.
      Recalling that the curl of a vector field <m>\vec F</m> is a measure of a rate of change of <m>\vec F</m>, Stokes' Theorem states that over a surface <m>\surfaceS</m> bounded by a closed curve <m>C</m>,
      <me>
        \iint_\surfaceS \big(\curl \vec F\big)\cdot \vec n\, dS = \oint_C \vec F\cdot d\vec r
      </me>,
      <ie/>, the sum of a rate of change of <m>\vec F</m> can be calculated with a certain sum of <m>\vec F</m> itself over the boundary of <m>\surfaceS</m>. In this case,
      the latter sum is also an infinite sum, requiring an integral.
    </p>

    <p>
      Finally, the Divergence Theorems state that the sum of divergences of a vector field
      (another measure of a rate of change of <m>\vec F</m>)
      over a region can also be computed with a certain sum of <m>\vec F</m> over the boundary of that region.
      When the region is planar, the latter sum of <m>\vec F</m> is an integral;
      when the region is spatial,
      the latter sum of <m>\vec F</m> is a double integral.
    </p>

    <p>
      The common thread among these theorems:
      the sum of a rate of change of a function over a region can be computed as another sum of the function itself on the boundary of the region.
      While very general, this is a very powerful and important statement.
    </p>
  </subsection>

  <exercises>
    <exercisegroup>
      <introduction>
        <p>
          Terms and Concepts
        </p>
      </introduction>

      <exercise>
        <statement>
          <p>
            What are the differences between the Divergence Theorems of <xref ref="sec_greensthm">Section</xref> and this section?
          </p>
        </statement>
        <answer>
          <p>
            Answers will vary; in <xref ref="sec_greensthm">Section</xref>,
            the Divergence Theorem connects outward flux over a closed curve in the plane to the divergence of the vector field,
            whereas in this section the Divergence Theorem connects outward flux over a closed surface in space to the divergence of the vector field.
          </p>
        </answer>
      </exercise>

      <exercise>
        <statement>
          <p>
            What property of a vector field does the Divergence Theorem relate to flux?
          </p>
        </statement>
        <answer>
          <p>
            Divergence.
          </p>
        </answer>
      </exercise>

      <exercise>
        <statement>
          <p>
            What property of a vector field does Stokes' Theorem relate to circulation?
          </p>
        </statement>
        <answer>
          <p>
            Curl.
          </p>
        </answer>
      </exercise>

      <exercise>
        <statement>
          <p>
            Stokes' Theorem is the spatial version of what other theorem?
          </p>
        </statement>
        <answer>
          <p>
            Green's Theorem.
          </p>
        </answer>
      </exercise>
    </exercisegroup>

    <exercisegroup>
      <introduction>
        <p>
          In the following exercises,
          a closed surface <m>\surfaceS</m> enclosing a domain <m>D</m> and a vector field <m>\vec F</m> are given.
          Verify the Divergence Theorem on <m>\surfaceS</m>; that is,
          show <m>\iint_\surfaceS \vec F\cdot \vec n\, dS = \iiint_D\divv \vec F\, dV</m>.
        </p>
      </introduction>

      <exercise>
        <statement>
          <p>
            <m>\surfaceS</m> is the surface bounding the domain <m>D</m> enclosed by the plane
            <m>z=2-x/2-2y/3</m> and the coordinate planes in the first octant;
            <m>\vec F = \langle x^2,y^2,x\rangle</m>.
          </p>

          <sidebyside width="47%">
            <!-- \apexincludemedia{width=90pt,3Dmenu,activate=onclick,deactivate=onclick,
            3Droll=0,
            3Dortho=0.004999519791454077,
            3Dc2c=0.7375360131263733 -0.6143473982810974 0.2803889811038971,
            3Dcoo=32.48771286010742 72.419189453125 49.87675094604492,
            3Droo=200.00000360071368,
            3Dlights=Headlamp,
            add3Djscript=asylabels.js} -->
            <image xml:id="img_14_07_ex_05_3D">
              <description></description>
              <asymptote>

                import graph3;

                //ASY file for fig14_07_ex_05_3D.asy in Chapter 13

                size(282,282,IgnoreAspect);
                //currentprojection=perspective(7,2,1);
                currentprojection=orthographic(12,12,10);
                defaultrender.merge=true;

                // setup and draw the axes
                real[] myxchoice={4};
                real[] myychoice={3};
                real[] myzchoice={2};
                defaultpen(0.5mm);

                pair xbounds=(-.5,4.5);
                pair ybounds=(-.5,4.5);
                pair zbounds=(-0.25,3);

                xaxis3("",xbounds.x,xbounds.y,black,OutTicks(myxchoice),Arrow3(size=3mm));
                yaxis3("",ybounds.x,ybounds.y,black,OutTicks(myychoice),Arrow3(size=3mm));
                zaxis3("",zbounds.x,zbounds.y,black,OutTicks(myzchoice),Arrow3(size=3mm));

                label("$x$",(xbounds.y+0.05*(xbounds.y-xbounds.x),0,0));
                label("$y$",(0,ybounds.y+0.05*(ybounds.y-ybounds.x),0));
                label("$z$",(0,0,zbounds.y+0.05*(zbounds.y-zbounds.x)));

                //parabola in plane
                //triple g(real t) {return (2cos(t),2sin(t),0);}
                //path3 mypath=graph(g,0,2pi,operator ..);draw(mypath,blue+linewidth(2));
                //triple g(real t) {return (t,4-t^2,2*(4-t^2));}
                //path3 mypath=graph(g,-2,2,operator ..);
                draw((4,0,0)--(0,3,0)--(0,0,2)--cycle,blue+linewidth(2));
                draw((4,0,0)--(0,0,0),blue+linewidth(2));
                draw((0,3,0)--(0,0,0),blue+linewidth(2));
                draw((0,0,2)--(0,0,0),blue+linewidth(2));

                //Draw paraboloid over unit disk
                triple f(pair t) {
                  return (t.x,t.y*(3-3t.x/4),2-t.x/2-2t.y*(3-3t.x/4)/3);//
                }
                surface s=surface(f,(0,0),(4,1),1,1,usplinetype=new splinetype[] {notaknot,notaknot,monotonic});
                pen p=rgb(0,0,.7);
                draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //Draw paraboloid over unit disk
                triple f(pair t) {
                  return (t.x,t.y*(3-3t.x/4),0);//
                }
                surface s=surface(f,(0,0),(4,1),1,1,usplinetype=new splinetype[] {notaknot,notaknot,monotonic});
                pen p=rgb(0,0,.7);
                draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //Draw paraboloid over unit disk
                triple f(pair t) {
                  return (t.x,0,t.y*(2-t.x/2));//
                }
                surface s=surface(f,(0,0),(4,1),1,1,usplinetype=new splinetype[] {notaknot,notaknot,monotonic});
                pen p=rgb(0,0,.7);
                draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //Draw paraboloid over unit disk
                triple f(pair t) {
                  return (0,t.x,t.y*(2-2t.x/3));//
                }
                surface s=surface(f,(0,0),(3,1),1,1,usplinetype=new splinetype[] {notaknot,notaknot,monotonic});
                pen p=rgb(0,0,.7);
                draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //label and arrow
                //label("$z=2y$",(-2,2,7));
                //draw((-1.8,2,6.8)--(-1,2,4.1),Arrow3(size=2mm));
                //label("$y=4-x^2$",(2.5,2,0));
                //draw((2.3,2.5,0.2)--(1.55,2.25,2.5),Arrow3(size=2mm));

                // ////////////////////////////////////
                //    SAMPLE CODE

                // defaultpen(fontsize(10pt));

                //real f(pair z) {return -z.x^4+2*z.x^2-z.y^4+2*z.y^2;}
                //surface s=surface(f,(-1.5,-1.5),(1.5,1.5),Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //triple f(pair t) {
                //  return (cos(t.x)*1.5*cos(t.y),sin(t.x)*cos(t.y),sin(t.y));
                //}
                //surface s=surface(f,(0,0),(pi,2*pi),8,8,Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //draw(s,paleblue);
                //draw(s,lightblue,meshpen=black+thick(),nolight,render(merge=true));
                //draw(mypath,2bp+blue);

                //triple g(real t) {return (t,t,-2*t^4+4*t^2);}
                //path3 mypath=graph(g,-1,1,operator ..);
                //draw(mypath,blue+dashed+linewidth(2));

                //pen p=rgb(0,0,1);
                //draw(s,paleblue+opacity(.5),meshpen=p,render(merge=true));

              </asymptote>
            </image>
          </sidebyside>
        </statement>
        <answer>
          <p>
            Outward flux across the plane <m>z=2-x/2-2y/3</m> is 14;
            across the plane <m>z=0</m> the outward flux is <m>-8</m>;
            across the planes <m>x=0</m> and <m>y=0</m> the outward flux is 0.
          </p>

          <p>
            Total outward flux: <m>14</m>.
          </p>

          <p>
            <m>\iint_D\divv\vec F\, dV = \int_0^{4}\int_0^{3-3x/4}\int_0^{2-x/2-2y/3}(2x+2y)\, dz\, dy\, dx = 14</m>.
          </p>
        </answer>
      </exercise>

      <exercise>
        <statement>
          <p>
            <m>\surfaceS</m> is the surface bounding the domain <m>D</m> enclosed by the cylinder
            <m>x^2+y^2=1</m> and the planes <m>z=-3</m> and <m>z=3</m>;
            <m>\vec F = \langle -x,y,z\rangle</m>.
          </p>

          <sidebyside width="47%">
            <!-- \apexincludemedia{width=90pt,3Dmenu,activate=onclick,deactivate=onclick,
            3Droll=0,
            3Dortho=0.004999519791454077,
            3Dc2c=0.7375360131263733 -0.6143473982810974 0.2803889811038971,
            3Dcoo=32.48771286010742 72.419189453125 49.87675094604492,
            3Droo=200.00000360071368,
            3Dlights=Headlamp,
            add3Djscript=asylabels.js} -->
            <image xml:id="img_14_07_ex_06_3D">
              <description></description>
              <asymptote>

                import graph3;

                //ASY file for fig14_07_ex_06_3D.asy in Chapter 13

                size(282,282,IgnoreAspect);
                //currentprojection=perspective(7,2,1);
                currentprojection=orthographic(12,12,10);
                defaultrender.merge=true;

                // setup and draw the axes
                real[] myxchoice={-1,1};
                real[] myychoice={-1,1};
                real[] myzchoice={-3,3};
                defaultpen(0.5mm);

                pair xbounds=(-3.5,3.5);
                pair ybounds=(-3.5,3.5);
                pair zbounds=(-3.5,3.5);

                xaxis3("",xbounds.x,xbounds.y,black,OutTicks(myxchoice),Arrow3(size=3mm));
                yaxis3("",ybounds.x,ybounds.y,black,OutTicks(myychoice),Arrow3(size=3mm));
                zaxis3("",zbounds.x,zbounds.y,black,OutTicks(myzchoice),Arrow3(size=3mm));

                label("$x$",(xbounds.y+0.05*(xbounds.y-xbounds.x),0,0));
                label("$y$",(0,ybounds.y+0.05*(ybounds.y-ybounds.x),0));
                label("$z$",(0,0,zbounds.y+0.05*(zbounds.y-zbounds.x)));

                //parabola in plane
                triple g(real t) {return (cos(t),sin(t),3);}
                path3 mypath=graph(g,0,2pi,operator ..);draw(mypath,blue+linewidth(2));
                triple g(real t) {return (cos(t),sin(t),-3);}
                path3 mypath=graph(g,0,2pi,operator ..);draw(mypath,blue+linewidth(2));

                //Draw paraboloid over unit disk
                triple f(pair t) {
                  return (cos(t.x),sin(t.x),t.y);//
                }
                surface s=surface(f,(0,-3),(2pi,3),16,2,usplinetype=new splinetype[] {notaknot,notaknot,monotonic});
                pen p=rgb(0,0,.7);
                draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //Draw paraboloid over unit disk
                triple f(pair t) {
                  return (t.y*cos(t.x),t.y*sin(t.x),3);//
                }
                surface s=surface(f,(0,0),(2pi,1),8,2,usplinetype=new splinetype[] {notaknot,notaknot,monotonic});
                pen p=rgb(0,0,.7);
                draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //Draw paraboloid over unit disk
                triple f(pair t) {
                  return (t.y*cos(t.x),t.y*sin(t.x),-3);//
                }
                surface s=surface(f,(0,0),(2pi,1),8,2,usplinetype=new splinetype[] {notaknot,notaknot,monotonic});
                pen p=rgb(0,0,.7);
                draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //label and arrow
                //label("$z=2y$",(-2,2,7));
                //draw((-1.8,2,6.8)--(-1,2,4.1),Arrow3(size=2mm));
                //label("$y=4-x^2$",(2.5,2,0));
                //draw((2.3,2.5,0.2)--(1.55,2.25,2.5),Arrow3(size=2mm));

                // ////////////////////////////////////
                //    SAMPLE CODE

                // defaultpen(fontsize(10pt));

                //real f(pair z) {return -z.x^4+2*z.x^2-z.y^4+2*z.y^2;}
                //surface s=surface(f,(-1.5,-1.5),(1.5,1.5),Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //triple f(pair t) {
                //  return (cos(t.x)*1.5*cos(t.y),sin(t.x)*cos(t.y),sin(t.y));
                //}
                //surface s=surface(f,(0,0),(pi,2*pi),8,8,Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //draw(s,paleblue);
                //draw(s,lightblue,meshpen=black+thick(),nolight,render(merge=true));
                //draw(mypath,2bp+blue);

                //triple g(real t) {return (t,t,-2*t^4+4*t^2);}
                //path3 mypath=graph(g,-1,1,operator ..);
                //draw(mypath,blue+dashed+linewidth(2));

                //pen p=rgb(0,0,1);
                //draw(s,paleblue+opacity(.5),meshpen=p,render(merge=true));

              </asymptote>
            </image>
          </sidebyside>
        </statement>
        <answer>
          <p>
            Outward flux across the cylinder <m>x^2+y^2=1</m> is 0;
            across the plane <m>z=3</m> the outward flux is <m>3\pi</m>;
            across the plane <m>z=-3</m> the outward flux is <m>3\pi</m>.
          </p>

          <p>
            Total outward flux: <m>6\pi</m>.
          </p>

          <p>
            <m>\iint_D\divv\vec F\, dV = \int_0^{2\pi}\int_0^{1}\int_{-3}^{3}r\, dz\, dr\, d\theta = 6\pi</m>.
          </p>
        </answer>
      </exercise>

      <exercise>
        <statement>
          <p>
            <m>\surfaceS</m> is the surface bounding the domain <m>D</m> enclosed by
            <m>z=xy(3-x)(3-y)</m> and the plane <m>z=0</m>;
            <m>\vec F = \langle 3x,4y,5z+1\rangle</m>.
          </p>

          <sidebyside width="47%">
            <!-- \apexincludemedia{width=90pt,3Dmenu,activate=onclick,deactivate=onclick,
            3Droll=0,
            3Dortho=0.004999519791454077,
            3Dc2c=0.7375360131263733 -0.6143473982810974 0.2803889811038971,
            3Dcoo=32.48771286010742 72.419189453125 49.87675094604492,
            3Droo=200.00000360071368,
            3Dlights=Headlamp,
            add3Djscript=asylabels.js} -->
            <image xml:id="img_14_07_ex_07_3D">
              <description></description>
              <asymptote>

                import graph3;

                //ASY file for fig14_07_ex_07_3D.asy in Chapter 13

                size(282,282,IgnoreAspect);
                //currentprojection=perspective(7,2,1);
                currentprojection=orthographic(12,12,10);
                defaultrender.merge=true;

                // setup and draw the axes
                real[] myxchoice={3};
                real[] myychoice={3};
                real[] myzchoice={4};
                defaultpen(0.5mm);

                pair xbounds=(-.5,3.5);
                pair ybounds=(-.5,3.5);
                pair zbounds=(-.5,4.5);

                xaxis3("",xbounds.x,xbounds.y,black,OutTicks(myxchoice),Arrow3(size=3mm));
                yaxis3("",ybounds.x,ybounds.y,black,OutTicks(myychoice),Arrow3(size=3mm));
                zaxis3("",zbounds.x,zbounds.y,black,OutTicks(myzchoice),Arrow3(size=3mm));

                label("$x$",(xbounds.y+0.05*(xbounds.y-xbounds.x),0,0));
                label("$y$",(0,ybounds.y+0.05*(ybounds.y-ybounds.x),0));
                label("$z$",(0,0,zbounds.y+0.05*(zbounds.y-zbounds.x)));

                //parabola in plane
                //triple g(real t) {return (cos(t),sin(t),3);}
                //path3 mypath=graph(g,0,2pi,operator ..);draw(mypath,blue+linewidth(2));
                //triple g(real t) {return (cos(t),sin(t),-3);}
                //path3 mypath=graph(g,0,2pi,operator ..);
                draw((0,0,0) -- (3,0,0) -- (3,3,0) -- (0,3,0)--cycle,blue+linewidth(2));

                //Draw paraboloid over unit disk
                triple f(pair t) {
                  return (t.x,t.y,t.x*t.y*(3-t.x)*(3-t.y));//
                }
                surface s=surface(f,(0,0),(3,3),8,8,usplinetype=new splinetype[] {notaknot,notaknot,monotonic});
                pen p=rgb(0,0,.7);
                draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //Draw paraboloid over unit disk
                triple f(pair t) {
                  return (t.x,t.y,0);//
                }
                surface s=surface(f,(0,0),(3,3),1,1,usplinetype=new splinetype[] {notaknot,notaknot,monotonic});
                pen p=rgb(0,0,.7);
                draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //label and arrow
                //label("$z=2y$",(-2,2,7));
                //draw((-1.8,2,6.8)--(-1,2,4.1),Arrow3(size=2mm));
                //label("$y=4-x^2$",(2.5,2,0));
                //draw((2.3,2.5,0.2)--(1.55,2.25,2.5),Arrow3(size=2mm));

                // ////////////////////////////////////
                //    SAMPLE CODE

                // defaultpen(fontsize(10pt));

                //real f(pair z) {return -z.x^4+2*z.x^2-z.y^4+2*z.y^2;}
                //surface s=surface(f,(-1.5,-1.5),(1.5,1.5),Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //triple f(pair t) {
                //  return (cos(t.x)*1.5*cos(t.y),sin(t.x)*cos(t.y),sin(t.y));
                //}
                //surface s=surface(f,(0,0),(pi,2*pi),8,8,Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //draw(s,paleblue);
                //draw(s,lightblue,meshpen=black+thick(),nolight,render(merge=true));
                //draw(mypath,2bp+blue);

                //triple g(real t) {return (t,t,-2*t^4+4*t^2);}
                //path3 mypath=graph(g,-1,1,operator ..);
                //draw(mypath,blue+dashed+linewidth(2));

                //pen p=rgb(0,0,1);
                //draw(s,paleblue+opacity(.5),meshpen=p,render(merge=true));

              </asymptote>
            </image>
          </sidebyside>
        </statement>
        <answer>
          <p>
            Outward flux across the surface <m>z=xy(3-x)(3-y)</m> is 252;
            across the plane <m>z=0</m> the outward flux is <m>-9</m>.
          </p>

          <p>
            Total outward flux: <m>243</m>.
          </p>

          <p>
            <m>\iint_D\divv\vec F\, dV = \int_0^{3}\int_0^{3}\int_{0}^{xy(3-x)(3-y)}12\, dz\, dy\, dx = 243</m>.
          </p>
        </answer>
      </exercise>

      <exercise>
        <statement>
          <p>
            <m>\surfaceS</m> is the surface composed of <m>\surfaceS_1</m>,
            the paraboloid <m>z=4-x^2-y^2</m> for <m>z\geq 0</m>,
            and <m>\surfaceS_2</m>, the disk of radius 2 centered at the origin;
            <m>\vec F = \langle x,y,z^2\rangle</m>.
          </p>

          <sidebyside width="47%">
            <!-- \apexincludemedia{width=90pt,3Dmenu,activate=onclick,deactivate=onclick,
            3Droll=0,
            3Dortho=0.004999519791454077,
            3Dc2c=0.7375360131263733 -0.6143473982810974 0.2803889811038971,
            3Dcoo=32.48771286010742 72.419189453125 49.87675094604492,
            3Droo=200.00000360071368,
            3Dlights=Headlamp,
            add3Djscript=asylabels.js} -->
            <image xml:id="img_14_07_ex_08_3D">
              <description></description>
              <asymptote>

                import graph3;

                //ASY file for fig14_07_ex_08_3D.asy in Chapter 14

                size(282,282,IgnoreAspect);
                //currentprojection=perspective(7,2,1);
                currentprojection=orthographic(12,12,10);
                defaultrender.merge=true;

                // setup and draw the axes
                real[] myxchoice={-2,2};
                real[] myychoice={-2,2};
                real[] myzchoice={4};
                defaultpen(0.5mm);

                pair xbounds=(-2.5,2.5);
                pair ybounds=(-2.5,2.5);
                pair zbounds=(-0.25,5);

                xaxis3("",xbounds.x,xbounds.y,black,OutTicks(myxchoice),Arrow3(size=3mm));
                yaxis3("",ybounds.x,ybounds.y,black,OutTicks(myychoice),Arrow3(size=3mm));
                zaxis3("",zbounds.x,zbounds.y,black,OutTicks(myzchoice),Arrow3(size=3mm));

                label("$x$",(xbounds.y+0.05*(xbounds.y-xbounds.x),0,0));
                label("$y$",(0,ybounds.y+0.05*(ybounds.y-ybounds.x),0));
                label("$z$",(0,0,zbounds.y+0.05*(zbounds.y-zbounds.x)));

                //parabola in plane
                triple g(real t) {return (2cos(t),2sin(t),0);}
                path3 mypath=graph(g,0,2pi,operator ..);draw(mypath,blue+linewidth(2));
                //triple g(real t) {return (t,4-t^2,2*(4-t^2));}
                //path3 mypath=graph(g,-2,2,operator ..);draw(mypath,blue+linewidth(2));

                //Draw paraboloid over unit disk
                triple f(pair t) {
                  return (2*t.y*cos(t.x),t.y*2*sin(t.x),4-4*t.y^2);//
                }
                surface s=surface(f,(0,0),(2pi,1),16,8,usplinetype=new splinetype[] {notaknot,notaknot,monotonic});
                pen p=rgb(0,0,.7);
                draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //Draw paraboloid over unit disk
                triple f(pair t) {
                  return (2*t.y*cos(t.x),2*t.y*sin(t.x),0);//
                }
                surface s=surface(f,(0,0),(2pi,1),8,4,usplinetype=new splinetype[] {notaknot,notaknot,monotonic});
                pen p=rgb(0,0,.7);
                draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //label and arrow
                //label("$z=2y$",(-2,2,7));
                //draw((-1.8,2,6.8)--(-1,2,4.1),Arrow3(size=2mm));
                //label("$y=4-x^2$",(2.5,2,0));
                //draw((2.3,2.5,0.2)--(1.55,2.25,2.5),Arrow3(size=2mm));

                // ////////////////////////////////////
                //    SAMPLE CODE

                // defaultpen(fontsize(10pt));

                //real f(pair z) {return -z.x^4+2*z.x^2-z.y^4+2*z.y^2;}
                //surface s=surface(f,(-1.5,-1.5),(1.5,1.5),Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //triple f(pair t) {
                //  return (cos(t.x)*1.5*cos(t.y),sin(t.x)*cos(t.y),sin(t.y));
                //}
                //surface s=surface(f,(0,0),(pi,2*pi),8,8,Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //draw(s,paleblue);
                //draw(s,lightblue,meshpen=black+thick(),nolight,render(merge=true));
                //draw(mypath,2bp+blue);

                //triple g(real t) {return (t,t,-2*t^4+4*t^2);}
                //path3 mypath=graph(g,-1,1,operator ..);
                //draw(mypath,blue+dashed+linewidth(2));

                //pen p=rgb(0,0,1);
                //draw(s,paleblue+opacity(.5),meshpen=p,render(merge=true));

              </asymptote>
            </image>
          </sidebyside>
        </statement>
        <answer>
          <p>
            Outward flux across the paraboloid is <m>112\pi/3</m>;
            across the disk the outward flux is 0.
          </p>

          <p>
            Total outward flux: <m>112\pi/3</m>.
          </p>

          <p>
            <m>\iint_D\divv\vec F\, dV = \int_0^{2\pi}\int_0^2\int_0^{4-r^2}(2z+2)r\, dz\, dr\, d\theta = 112\pi/3</m>.
          </p>
        </answer>
      </exercise>
    </exercisegroup>

    <exercisegroup>
      <introduction>
        <p>
          In the following exercises,
          a closed curve <m>C</m> that is the boundary of a surface <m>\surfaceS</m> is given along with a vector field <m>\vec F</m>.
          Verify Stokes' Theorem on <m>C</m>;
          that is, show <m>\oint_C \vec F\cdot d\vec r = \iint_\surfaceS\big(\curl \vec F\,\big)\cdot\vec n\, dS</m>.
        </p>
      </introduction>

      <exercise>
        <statement>
          <p>
            <m>C</m> is the curve parametrized by
            <m>\vec r(t) = \langle \cos t, \sin t, 1\rangle</m> and <m>\surfaceS</m> is the portion of
            <m>z=x^2+y^2</m> enclosed by <m>C</m>;
            <m>\vec F = \langle z,-x,y\rangle</m>.
          </p>

          <sidebyside width="47%">
            <!-- \apexincludemedia{width=90pt,3Dmenu,activate=onclick,deactivate=onclick,
            3Droll=0,
            3Dortho=0.004999519791454077,
            3Dc2c=0.7375360131263733 -0.6143473982810974 0.2803889811038971,
            3Dcoo=32.48771286010742 72.419189453125 49.87675094604492,
            3Droo=200.00000360071368,
            3Dlights=Headlamp,
            add3Djscript=asylabels.js} -->
            <image xml:id="img_14_07_ex_09_3D">
              <description></description>
              <asymptote>

                import graph3;

                //ASY file for fig14_07_ex_09_3D.asy in Chapter 14

                size(282,282,IgnoreAspect);
                //currentprojection=perspective(7,2,1);
                currentprojection=orthographic(12,12,10);
                defaultrender.merge=true;

                // setup and draw the axes
                real[] myxchoice={-1,1};
                real[] myychoice={-1,1};
                real[] myzchoice={1};
                defaultpen(0.5mm);

                pair xbounds=(-1.5,1.5);
                pair ybounds=(-1.5,1.5);
                pair zbounds=(-0.25,2);

                xaxis3("",xbounds.x,xbounds.y,black,OutTicks(myxchoice),Arrow3(size=3mm));
                yaxis3("",ybounds.x,ybounds.y,black,OutTicks(myychoice),Arrow3(size=3mm));
                zaxis3("",zbounds.x,zbounds.y,black,OutTicks(myzchoice),Arrow3(size=3mm));

                label("$x$",(xbounds.y+0.05*(xbounds.y-xbounds.x),0,0));
                label("$y$",(0,ybounds.y+0.05*(ybounds.y-ybounds.x),0));
                label("$z$",(0,0,zbounds.y+0.05*(zbounds.y-zbounds.x)));

                //parabola in plane
                triple g(real t) {return (cos(t),sin(t),1);}
                path3 mypath=graph(g,0,2pi,operator ..);draw(mypath,blue+linewidth(2));
                //triple g(real t) {return (t,4-t^2,2*(4-t^2));}
                //path3 mypath=graph(g,-2,2,operator ..);draw(mypath,blue+linewidth(2));

                //Draw paraboloid over unit disk
                triple f(pair t) {
                  return (t.y*cos(t.x),t.y*sin(t.x),t.y^2);//
                }
                surface s=surface(f,(0,0),(2pi,1),16,8,usplinetype=new splinetype[] {notaknot,notaknot,monotonic});
                pen p=rgb(0,0,.7);
                draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //label and arrow
                //label("$z=2y$",(-2,2,7));
                //draw((-1.8,2,6.8)--(-1,2,4.1),Arrow3(size=2mm));
                //label("$y=4-x^2$",(2.5,2,0));
                //draw((2.3,2.5,0.2)--(1.55,2.25,2.5),Arrow3(size=2mm));

                // ////////////////////////////////////
                //    SAMPLE CODE

                // defaultpen(fontsize(10pt));

                //real f(pair z) {return -z.x^4+2*z.x^2-z.y^4+2*z.y^2;}
                //surface s=surface(f,(-1.5,-1.5),(1.5,1.5),Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //triple f(pair t) {
                //  return (cos(t.x)*1.5*cos(t.y),sin(t.x)*cos(t.y),sin(t.y));
                //}
                //surface s=surface(f,(0,0),(pi,2*pi),8,8,Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //draw(s,paleblue);
                //draw(s,lightblue,meshpen=black+thick(),nolight,render(merge=true));
                //draw(mypath,2bp+blue);

                //triple g(real t) {return (t,t,-2*t^4+4*t^2);}
                //path3 mypath=graph(g,-1,1,operator ..);
                //draw(mypath,blue+dashed+linewidth(2));

                //pen p=rgb(0,0,1);
                //draw(s,paleblue+opacity(.5),meshpen=p,render(merge=true));

              </asymptote>
            </image>
          </sidebyside>
        </statement>
        <answer>
          <p>
            Circulation on <m>C</m>: <m>\oint_C \vec F\cdot d\vec r = \pi</m>
          </p>

          <p>
            <m>\iint_\surfaceS\big(\curl \vec F\big)\cdot\vec n\, dS = \pi</m>.
          </p>
        </answer>
      </exercise>

      <exercise>
        <statement>
          <p>
            <m>C</m> is the curve parametrized by
            <m>\vec r(t) = \langle \cos t, \sin t, e^{-1}\rangle</m> and <m>\surfaceS</m> is the portion of
            <m>z=e^{-x^2-y^2}</m> enclosed by <m>C</m>;
            <m>\vec F = \langle -y,x,1\rangle</m>.
          </p>

          <sidebyside width="47%">
            <!-- \apexincludemedia{width=120pt,3Dmenu,activate=onclick,deactivate=onclick,
            3Droll=0,
            3Dortho=0.004999519791454077,
            3Dc2c=0.7375360131263733 -0.6143473982810974 0.2803889811038971,
            3Dcoo=32.48771286010742 72.419189453125 49.87675094604492,
            3Droo=200.00000360071368,
            3Dlights=Headlamp,
            add3Djscript=asylabels.js} -->
            <image xml:id="img_14_07_ex_10_3D">
              <description></description>
              <asymptote>

                import graph3;

                //ASY file for fig14_07_ex_10_3D.asy in Chapter 14

                size(282,282,IgnoreAspect);
                //currentprojection=perspective(7,2,1);
                currentprojection=orthographic(12,12,10);
                defaultrender.merge=true;

                // setup and draw the axes
                real[] myxchoice={-1,1};
                real[] myychoice={-1,1};
                real[] myzchoice={1};
                defaultpen(0.5mm);

                pair xbounds=(-1.5,1.5);
                pair ybounds=(-1.5,1.5);
                pair zbounds=(-0.25,1.5);

                xaxis3("",xbounds.x,xbounds.y,black,OutTicks(myxchoice),Arrow3(size=3mm));
                yaxis3("",ybounds.x,ybounds.y,black,OutTicks(myychoice),Arrow3(size=3mm));
                zaxis3("",zbounds.x,zbounds.y,black,OutTicks(myzchoice),Arrow3(size=3mm));

                label("$x$",(xbounds.y+0.05*(xbounds.y-xbounds.x),0,0));
                label("$y$",(0,ybounds.y+0.05*(ybounds.y-ybounds.x),0));
                label("$z$",(0,0,zbounds.y+0.05*(zbounds.y-zbounds.x)));

                //parabola in plane
                triple g(real t) {return (cos(t),sin(t),exp(-1));}
                path3 mypath=graph(g,0,2pi,operator ..);draw(mypath,blue+linewidth(2));
                //triple g(real t) {return (t,4-t^2,2*(4-t^2));}
                //path3 mypath=graph(g,-2,2,operator ..);draw(mypath,blue+linewidth(2));

                //Draw paraboloid over unit disk
                triple f(pair t) {
                  return (t.y*cos(t.x),t.y*sin(t.x),exp(-t.y^2));//
                }
                surface s=surface(f,(0,0),(2pi,1),16,8,usplinetype=new splinetype[] {notaknot,notaknot,monotonic});
                pen p=rgb(0,0,.7);
                draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //label and arrow
                //label("$z=2y$",(-2,2,7));
                //draw((-1.8,2,6.8)--(-1,2,4.1),Arrow3(size=2mm));
                //label("$y=4-x^2$",(2.5,2,0));
                //draw((2.3,2.5,0.2)--(1.55,2.25,2.5),Arrow3(size=2mm));

                // ////////////////////////////////////
                //    SAMPLE CODE

                // defaultpen(fontsize(10pt));

                //real f(pair z) {return -z.x^4+2*z.x^2-z.y^4+2*z.y^2;}
                //surface s=surface(f,(-1.5,-1.5),(1.5,1.5),Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //triple f(pair t) {
                //  return (cos(t.x)*1.5*cos(t.y),sin(t.x)*cos(t.y),sin(t.y));
                //}
                //surface s=surface(f,(0,0),(pi,2*pi),8,8,Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //draw(s,paleblue);
                //draw(s,lightblue,meshpen=black+thick(),nolight,render(merge=true));
                //draw(mypath,2bp+blue);

                //triple g(real t) {return (t,t,-2*t^4+4*t^2);}
                //path3 mypath=graph(g,-1,1,operator ..);
                //draw(mypath,blue+dashed+linewidth(2));

                //pen p=rgb(0,0,1);
                //draw(s,paleblue+opacity(.5),meshpen=p,render(merge=true));

              </asymptote>
            </image>
          </sidebyside>
        </statement>
        <answer>
          <p>
            Circulation on <m>C</m>: <m>\oint_C \vec F\cdot d\vec r = \pi</m>
          </p>

          <p>
            <m>\iint_\surfaceS\big(\curl \vec F\big)\cdot\vec n\, dS = \pi</m>.
          </p>
        </answer>
      </exercise>

      <exercise>
        <statement>
          <p>
            <m>C</m> is the curve that follows the triangle with vertices at <m>(0,0,2)</m>,
            <m>(4,0,0)</m> and <m>(0,3,0)</m>,
            traversing the the vertices in that order and returning to <m>(0,0,2)</m>,
            and <m>\surfaceS</m> is the portion of the plane
            <m>z=2-x/2-2y/3</m> enclosed by <m>C</m>;
            <m>\vec F = \langle y,-z,y\rangle</m>.
          </p>

          <sidebyside width="47%">
            <!-- \apexincludemedia{width=90pt,3Dmenu,activate=onclick,deactivate=onclick,
            3Droll=0,
            3Dortho=0.004999519791454077,
            3Dc2c=0.7375360131263733 -0.6143473982810974 0.2803889811038971,
            3Dcoo=32.48771286010742 72.419189453125 49.87675094604492,
            3Droo=200.00000360071368,
            3Dlights=Headlamp,
            add3Djscript=asylabels.js} -->
            <image xml:id="img_14_07_ex_11_3D">
              <description></description>
              <asymptote>

                import graph3;

                //ASY file for fig14_07_ex_10_3D.asy in Chapter 14

                size(282,282,IgnoreAspect);
                //currentprojection=perspective(7,2,1);
                currentprojection=orthographic(12,12,10);
                defaultrender.merge=true;

                // setup and draw the axes
                real[] myxchoice={4};
                real[] myychoice={3};
                real[] myzchoice={2};
                defaultpen(0.5mm);

                pair xbounds=(-.5,4.5);
                pair ybounds=(-.5,4.5);
                pair zbounds=(-0.25,2.5);

                xaxis3("",xbounds.x,xbounds.y,black,OutTicks(myxchoice),Arrow3(size=3mm));
                yaxis3("",ybounds.x,ybounds.y,black,OutTicks(myychoice),Arrow3(size=3mm));
                zaxis3("",zbounds.x,zbounds.y,black,OutTicks(myzchoice),Arrow3(size=3mm));

                label("$x$",(xbounds.y+0.05*(xbounds.y-xbounds.x),0,0));
                label("$y$",(0,ybounds.y+0.05*(ybounds.y-ybounds.x),0));
                label("$z$",(0,0,zbounds.y+0.05*(zbounds.y-zbounds.x)));

                //parabola in plane
                //triple g(real t) {return (cos(t),sin(t),exp(-1));}
                //path3 mypath=graph(g,0,2pi,operator ..);
                draw((0,0,2)--(4,0,0)--(0,3,0)--cycle,blue+linewidth(2));
                //triple g(real t) {return (t,4-t^2,2*(4-t^2));}
                //path3 mypath=graph(g,-2,2,operator ..);draw(mypath,blue+linewidth(2));

                //Draw paraboloid over unit disk
                triple f(pair t) {
                  return (t.x,t.y*(3-3t.x/4),2-t.x/2-2*(t.y*(3-3t.x/4))/3);//
                }
                surface s=surface(f,(0,0),(4,1),1,1,usplinetype=new splinetype[] {notaknot,notaknot,monotonic});
                pen p=rgb(0,0,.7);
                draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //label and arrow
                //label("$z=2y$",(-2,2,7));
                //draw((-1.8,2,6.8)--(-1,2,4.1),Arrow3(size=2mm));
                //label("$y=4-x^2$",(2.5,2,0));
                //draw((2.3,2.5,0.2)--(1.55,2.25,2.5),Arrow3(size=2mm));

                // ////////////////////////////////////
                //    SAMPLE CODE

                // defaultpen(fontsize(10pt));

                //real f(pair z) {return -z.x^4+2*z.x^2-z.y^4+2*z.y^2;}
                //surface s=surface(f,(-1.5,-1.5),(1.5,1.5),Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //triple f(pair t) {
                //  return (cos(t.x)*1.5*cos(t.y),sin(t.x)*cos(t.y),sin(t.y));
                //}
                //surface s=surface(f,(0,0),(pi,2*pi),8,8,Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //draw(s,paleblue);
                //draw(s,lightblue,meshpen=black+thick(),nolight,render(merge=true));
                //draw(mypath,2bp+blue);

                //triple g(real t) {return (t,t,-2*t^4+4*t^2);}
                //path3 mypath=graph(g,-1,1,operator ..);
                //draw(mypath,blue+dashed+linewidth(2));

                //pen p=rgb(0,0,1);
                //draw(s,paleblue+opacity(.5),meshpen=p,render(merge=true));

              </asymptote>
            </image>
          </sidebyside>
        </statement>
        <answer>
          <p>
            Circulation on <m>C</m>: The flow along the line from <m>(0,0,2)</m> to <m>(4,0,0)</m> is 0;
            from <m>(4,0,0)</m> to <m>(0,3,0)</m> it is <m>-6</m>,
            and from <m>(0,3,0)</m> to <m>(0,0,2)</m> it is 6.
            The total circulation is <m>0+(-6)+6=0</m>.
          </p>

          <p>
            <m>\iint_\surfaceS\big(\curl \vec F\big)\cdot\vec n\, dS = \iint_\surfaceS 0 \, dS = 0</m>.
          </p>
        </answer>
      </exercise>

      <exercise>
        <statement>
          <p>
            <m>C</m> is the curve whose <m>x</m> and <m>y</m> coordinates follow the parabola <m>y=1-x^2</m> from <m>x=1</m> to <m>x=-1</m>,
            then follow the line from <m>(-1,0)</m> back to <m>(1,0)</m>,
            where the <m>z</m> coordinates of <m>C</m> are determined by <m>f(x,y) = 2x^2+y^2</m>,
            and <m>\surfaceS</m> is the portion of
            <m>z=2x^2+y^2</m> enclosed by <m>C</m>;
            <m>\vec F = \langle y^2+z,x,x^2-y\rangle</m>.
          </p>

          <sidebyside width="47%">
            <!-- \apexincludemedia{width=90pt,3Dmenu,activate=onclick,deactivate=onclick,
            3Droll=0,
            3Dortho=0.004999519791454077,
            3Dc2c=0.7375360131263733 -0.6143473982810974 0.2803889811038971,
            3Dcoo=32.48771286010742 72.419189453125 49.87675094604492,
            3Droo=200.00000360071368,
            3Dlights=Headlamp,
            add3Djscript=asylabels.js} -->
            <image xml:id="img_14_07_ex_12_3D">
              <description></description>
              <asymptote>

                import graph3;

                //ASY file for fig14_07_ex_10_3D.asy in Chapter 14

                size(282,282,IgnoreAspect);
                //currentprojection=perspective(7,2,1);
                currentprojection=orthographic(12,12,10);
                defaultrender.merge=true;

                // setup and draw the axes
                real[] myxchoice={-1,1};
                real[] myychoice={1};
                real[] myzchoice={2};
                defaultpen(0.5mm);

                pair xbounds=(-1.5,1.5);
                pair ybounds=(-1.5,1.5);
                pair zbounds=(-0.25,2.5);

                xaxis3("",xbounds.x,xbounds.y,black,OutTicks(myxchoice),Arrow3(size=3mm));
                yaxis3("",ybounds.x,ybounds.y,black,OutTicks(myychoice),Arrow3(size=3mm));
                zaxis3("",zbounds.x,zbounds.y,black,OutTicks(myzchoice),Arrow3(size=3mm));

                label("$x$",(xbounds.y+0.05*(xbounds.y-xbounds.x),0,0));
                label("$y$",(0,ybounds.y+0.05*(ybounds.y-ybounds.x),0));
                label("$z$",(0,0,zbounds.y+0.05*(zbounds.y-zbounds.x)));

                //parabola in plane
                triple g(real t) {return (t,1-t^2,2t^2+(1-t^2)^2);}
                path3 mypath=graph(g,-1,1,operator ..);draw(mypath,blue+linewidth(2));

                triple g(real t) {return (t,0,2t^2);}
                path3 mypath=graph(g,-1,1,operator ..);draw(mypath,blue+linewidth(2));
                //triple g(real t) {return (t,4-t^2,2*(4-t^2));}
                //path3 mypath=graph(g,-2,2,operator ..);draw(mypath,blue+linewidth(2));

                //Draw paraboloid over unit disk
                triple f(pair t) {
                  return (t.x,t.y*(1-t.x^2),2t.x^2+(t.y*(1-t.x^2))^2);//
                }
                surface s=surface(f,(-1,0),(1,1),8,8,usplinetype=new splinetype[] {notaknot,notaknot,monotonic});
                pen p=rgb(0,0,.7);
                draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //label and arrow
                //label("$z=2y$",(-2,2,7));
                //draw((-1.8,2,6.8)--(-1,2,4.1),Arrow3(size=2mm));
                //label("$y=4-x^2$",(2.5,2,0));
                //draw((2.3,2.5,0.2)--(1.55,2.25,2.5),Arrow3(size=2mm));

                // ////////////////////////////////////
                //    SAMPLE CODE

                // defaultpen(fontsize(10pt));

                //real f(pair z) {return -z.x^4+2*z.x^2-z.y^4+2*z.y^2;}
                //surface s=surface(f,(-1.5,-1.5),(1.5,1.5),Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //triple f(pair t) {
                //  return (cos(t.x)*1.5*cos(t.y),sin(t.x)*cos(t.y),sin(t.y));
                //}
                //surface s=surface(f,(0,0),(pi,2*pi),8,8,Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //draw(s,paleblue);
                //draw(s,lightblue,meshpen=black+thick(),nolight,render(merge=true));
                //draw(mypath,2bp+blue);

                //triple g(real t) {return (t,t,-2*t^4+4*t^2);}
                //path3 mypath=graph(g,-1,1,operator ..);
                //draw(mypath,blue+dashed+linewidth(2));

                //pen p=rgb(0,0,1);
                //draw(s,paleblue+opacity(.5),meshpen=p,render(merge=true));

              </asymptote>
            </image>
          </sidebyside>
        </statement>
        <answer>
          <p>
            Circulation on <m>C</m>: The flow along the parabola is <m>-32/15</m>;
            the flow along the line is <m>4/3</m>.
            The total circulation is <m>4/3-32/15 = -4/5</m>.
          </p>

          <p>
            <m>\iint_\surfaceS\big(\curl \vec F\big)\cdot\vec n\, dS = -4/5</m>.
          </p>
        </answer>
      </exercise>
    </exercisegroup>

    <exercisegroup>
      <introduction>
        <p>
          In the following exercises,
          a closed surface <m>\surfaceS</m> and a vector field <m>\vec F</m> are given.
          Find the outward flux of <m>\vec F</m> over <m>\surfaceS</m> either through direct computation or through the Divergence Theorem.
        </p>
      </introduction>

      <exercise>
        <statement>
          <p>
            <m>\surfaceS</m> is the surface formed by the intersections of <m>z=0</m> and <m>z=(x^2-1)(y^2-1)</m>;
            <m>\vec F = \langle x^2+1,yz,xz^2\rangle</m>.
          </p>

          <sidebyside width="47%">
            <!-- \apexincludemedia{width=90pt,3Dmenu,activate=onclick,deactivate=onclick,
            3Droll=0,
            3Dortho=0.004999519791454077,
            3Dc2c=0.7375360131263733 -0.6143473982810974 0.2803889811038971,
            3Dcoo=32.48771286010742 72.419189453125 49.87675094604492,
            3Droo=200.00000360071368,
            3Dlights=Headlamp,
            add3Djscript=asylabels.js} -->
            <image xml:id="img_14_07_ex_13_3D">
              <description></description>
              <asymptote>

                import graph3;

                //ASY file for fig14_07_ex_13_3D.asy in Chapter 13

                size(282,282,IgnoreAspect);
                //currentprojection=perspective(7,2,1);
                currentprojection=orthographic(12,12,5);
                defaultrender.merge=true;

                // setup and draw the axes
                real[] myxchoice={-1,1};
                real[] myychoice={-1,1};
                real[] myzchoice={-1,1};
                defaultpen(0.5mm);

                pair xbounds=(-1.25,1.25);
                pair ybounds=(-1.25,1.25);
                pair zbounds=(-0.25,1.25);

                xaxis3("",xbounds.x,xbounds.y,black,OutTicks(myxchoice),Arrow3(size=3mm));
                yaxis3("",ybounds.x,ybounds.y,black,OutTicks(myychoice),Arrow3(size=3mm));
                zaxis3("",zbounds.x,zbounds.y,black,OutTicks(myzchoice),Arrow3(size=3mm));

                label("$x$",(xbounds.y+0.05*(xbounds.y-xbounds.x),0,0));
                label("$y$",(0,ybounds.y+0.05*(ybounds.y-ybounds.x),0));
                label("$z$",(0,0,zbounds.y+0.05*(zbounds.y-zbounds.x)));

                //parabola in plane
                //triple g(real t) {return (cos(t),sin(t),3);}
                //path3 mypath=graph(g,0,2pi,operator ..);draw(mypath,blue+linewidth(2));
                //triple g(real t) {return (cos(t),sin(t),-3);}
                //path3 mypath=graph(g,0,2pi,operator ..);
                draw((-1,-1,0) -- (-1,1,0) -- (1,1,0) -- (1,-1,0)--cycle,blue+linewidth(2));

                //Draw paraboloid over unit disk
                triple f(pair t) {
                  return (t.x,t.y,(t.x^2-1)*(t.y^2-1));//
                }
                surface s=surface(f,(-1,-1),(1,1),8,8,usplinetype=new splinetype[] {notaknot,notaknot,monotonic});
                pen p=rgb(0,0,.7);
                draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //Draw paraboloid over unit disk
                triple f(pair t) {
                  return (t.x,t.y,0);//
                }
                surface s=surface(f,(-1,-1),(1,1),1,1,usplinetype=new splinetype[] {notaknot,notaknot,monotonic});
                pen p=rgb(0,0,.7);
                draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //label and arrow
                //label("$z=2y$",(-2,2,7));
                //draw((-1.8,2,6.8)--(-1,2,4.1),Arrow3(size=2mm));
                //label("$y=4-x^2$",(2.5,2,0));
                //draw((2.3,2.5,0.2)--(1.55,2.25,2.5),Arrow3(size=2mm));

                // ////////////////////////////////////
                //    SAMPLE CODE

                // defaultpen(fontsize(10pt));

                //real f(pair z) {return -z.x^4+2*z.x^2-z.y^4+2*z.y^2;}
                //surface s=surface(f,(-1.5,-1.5),(1.5,1.5),Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //triple f(pair t) {
                //  return (cos(t.x)*1.5*cos(t.y),sin(t.x)*cos(t.y),sin(t.y));
                //}
                //surface s=surface(f,(0,0),(pi,2*pi),8,8,Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //draw(s,paleblue);
                //draw(s,lightblue,meshpen=black+thick(),nolight,render(merge=true));
                //draw(mypath,2bp+blue);

                //triple g(real t) {return (t,t,-2*t^4+4*t^2);}
                //path3 mypath=graph(g,-1,1,operator ..);
                //draw(mypath,blue+dashed+linewidth(2));

                //pen p=rgb(0,0,1);
                //draw(s,paleblue+opacity(.5),meshpen=p,render(merge=true));

              </asymptote>
            </image>
          </sidebyside>
        </statement>
        <answer>
          <p>
            <m>128/225</m>
          </p>
        </answer>
      </exercise>

      <exercise>
        <statement>
          <p>
            <m>\surfaceS</m> is the surface formed by the intersections of the planes <m>z=\frac12(3-x)</m>,
            <m>x=1</m>,
            <m>y=0</m>, <m>y=2</m> and <m>z=0</m>;
            <m>\vec F = \langle x,y^2,z\rangle</m>.
          </p>

          <sidebyside width="47%">
            <!-- \apexincludemedia{width=90pt,3Dmenu,activate=onclick,deactivate=onclick,
            3Droll=0,
            3Dortho=0.004999519791454077,
            3Dc2c=0.7375360131263733 -0.6143473982810974 0.2803889811038971,
            3Dcoo=32.48771286010742 72.419189453125 49.87675094604492,
            3Droo=200.00000360071368,
            3Dlights=Headlamp,
            add3Djscript=asylabels.js} -->
            <image xml:id="img_14_07_ex_14_3D">
              <description></description>
              <asymptote>

                import graph3;

                //ASY file for fig13_06_ex_083D.asy in Chapter 13

                size(282,282,IgnoreAspect);
                //currentprojection=perspective(7,2,1);
                currentprojection=orthographic(8.8,7.8,3);
                defaultrender.merge=true;

                // setup and draw the axes
                real[] myxchoice={1,2,3};
                real[] myychoice={1,2,3};
                real[] myzchoice={1};
                defaultpen(0.5mm);

                pair xbounds=(-0.5,3.5);
                pair ybounds=(-0.5,3.5);
                pair zbounds=(-0.5,1.75);

                xaxis3("",xbounds.x,xbounds.y,black,OutTicks(myxchoice),Arrow3(size=3mm));
                yaxis3("",ybounds.x,ybounds.y,black,OutTicks(myychoice),Arrow3(size=3mm));
                zaxis3("",zbounds.x,zbounds.y,black,OutTicks(myzchoice),Arrow3(size=3mm));

                label("$x$",(xbounds.y+0.05*(xbounds.y-xbounds.x),0,0));
                label("$y$",(0,ybounds.y+0.05*(ybounds.y-ybounds.x),0));
                label("$z$",(0,0,zbounds.y+0.05*(zbounds.y-zbounds.x)));

                //edges of object
                draw((1,0,0)--(1,2,0)--(3,2,0)--(3,0,0)--cycle,blue+linewidth(2));
                draw((3,0,0)--(1,0,1)--(1,2,1)--(3,2,0),blue+linewidth(2));
                draw((3,0,0)--(1,0,1),blue+linewidth(2));
                draw((1,0,0)--(1,0,1),blue+linewidth(2));
                draw((1,2,0)--(1,2,1),blue+linewidth(2));

                //shade faces
                import three;
                path3 p=(1,0,0)--(1,2,0)--(3,2,0)--(3,0,0);
                draw(surface(p -- cycle), rgb(.6,.6,1)+opacity(0.7));
                path3 p=(1,0,1)--(1,2,1)--(3,2,0)--(3,0,0);
                draw(surface(p -- cycle), rgb(.6,.6,1)+opacity(0.7));
                path3 p=(1,0,0)--(1,2,0)--(1,2,1)--(1,0,1);
                draw(surface(p -- cycle), rgb(.6,.6,1)+opacity(0.7));
                path3 p=(1,0,0)--(3,0,0)--(1,0,1);
                draw(surface(p -- cycle), rgb(.6,.6,1)+opacity(0.7));
                path3 p=(1,2,0)--(3,2,0)--(1,2,1);
                draw(surface(p -- cycle), rgb(.6,.6,1)+opacity(0.7));

                //labels and arrow
                label("$z=\frac{1}{2}(3-x)$",(3,0,1.1));
                draw((3,0.25,1)--(2,1,0.45),Arrow3(size=2mm));

                // ////////////////////////////////////
                //    SAMPLE CODE

                // defaultpen(fontsize(10pt));

                //real f(pair z) {return -z.x^4+2*z.x^2-z.y^4+2*z.y^2;}
                //surface s=surface(f,(-1.5,-1.5),(1.5,1.5),Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //triple f(pair t) {
                //  return (cos(t.x)*1.5*cos(t.y),sin(t.x)*cos(t.y),sin(t.y));
                //}
                //surface s=surface(f,(0,0),(pi,2*pi),8,8,Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //draw(s,paleblue);
                //draw(s,lightblue,meshpen=black+thick(),nolight,render(merge=true));
                //draw(mypath,2bp+blue);

                //triple g(real t) {return (t,t,-2*t^4+4*t^2);}
                //path3 mypath=graph(g,-1,1,operator ..);
                //draw(mypath,blue+dashed+linewidth(2));

                //pen p=rgb(0,0,1);
                //draw(s,paleblue+opacity(.5),meshpen=p,render(merge=true));

              </asymptote>
            </image>
          </sidebyside>
        </statement>
        <answer>
          <p>
            <m>8</m>
          </p>
        </answer>
      </exercise>

      <exercise>
        <statement>
          <p>
            <m>\surfaceS</m> is the surface formed by the intersections of the planes <m>z=2y</m>,
            <m>y=4-x^2</m> and <m>z=0</m>;
            <m>\vec F = \langle xz,0,xz\rangle</m>.
          </p>

          <sidebyside width="47%">
            <!-- \apexincludemedia{width=90pt,3Dmenu,activate=onclick,deactivate=onclick,
            3Droll=0,
            3Dortho=0.004999519791454077,
            3Dc2c=0.7375360131263733 -0.6143473982810974 0.2803889811038971,
            3Dcoo=32.48771286010742 72.419189453125 49.87675094604492,
            3Droo=200.00000360071368,
            3Dlights=Headlamp,
            add3Djscript=asylabels.js} -->
            <image xml:id="img_14_07_ex_15_3D">
              <description></description>
              <asymptote>

                import graph3;

                //ASY file for fig13_06_ex_123D.asy in Chapter 13

                size(282,282,IgnoreAspect);
                //currentprojection=perspective(7,2,1);
                currentprojection=orthographic(12.1,-7.1,16);
                defaultrender.merge=true;

                // setup and draw the axes
                real[] myxchoice={-2,-1,1,2};
                real[] myychoice={1,2,3,4};
                real[] myzchoice={2,4,6,8};
                defaultpen(0.5mm);

                pair xbounds=(-2.5,2.5);
                pair ybounds=(-0.25,5);
                pair zbounds=(-0.25,10);

                xaxis3("",xbounds.x,xbounds.y,black,OutTicks(myxchoice),Arrow3(size=3mm));
                yaxis3("",ybounds.x,ybounds.y,black,OutTicks(myychoice),Arrow3(size=3mm));
                zaxis3("",zbounds.x,zbounds.y,black,OutTicks(myzchoice),Arrow3(size=3mm));

                label("$x$",(xbounds.y+0.05*(xbounds.y-xbounds.x),0,0));
                label("$y$",(0,ybounds.y+0.05*(ybounds.y-ybounds.x),0));
                label("$z$",(0,0,zbounds.y+0.05*(zbounds.y-zbounds.x)));

                //parabola in plane
                triple g(real t) {return (t,4-t^2,0);}
                path3 mypath=graph(g,-2,2,operator ..);draw(mypath,blue+linewidth(2));
                triple g(real t) {return (t,4-t^2,2*(4-t^2));}
                path3 mypath=graph(g,-2,2,operator ..);draw(mypath,blue+linewidth(2));

                //shade object
                //import three;
                //int k=12;
                //for (int i=-2*k; i&lt;2*k; ++i)
                //{
                //path3 p=(i/k,4-(i/k)^2,0)--((i+1)/k,4-((i+1)/k)^2,0)--((i+1)/k,4-((i+1)/k)^2,2*(4-((i+1)/k)^2))--((i)/k,4-((i)/k)^2,2*(4-((i)/k)^2));
                //draw(surface(p -- cycle), emissive(rgb(1,.6,.6)+opacity(0.7)));
                //path3 p=(i/k,0,0)--(i/k,4-(i/k)^2,2*(4-(i/k)^2))--((i+1)/k,4-((i+1)/k)^2,2*(4-((i+1)/k)^2))--((i+1//)/k,0,0);
                //draw(surface(p -- cycle), emissive(rgb(.6,.6,1)+opacity(0.7)));
                //}

                //Draw paraboloid over unit disk
                triple f(pair t) {
                  return (t.x,t.y*(4-t.x^2),2*t.y*(4-t.x^2));//
                }
                surface s=surface(f,(-2,0),(2,1),16,8,usplinetype=new splinetype[] {notaknot,notaknot,monotonic});
                pen p=rgb(0,0,.7);
                draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //Draw paraboloid over unit disk
                triple f(pair t) {
                  return (t.x,(4-t.x^2),2*t.y*(4-t.x^2));//
                }
                surface s=surface(f,(-2,0),(2,1),16,8,usplinetype=new splinetype[] {notaknot,notaknot,monotonic});
                pen p=rgb(0,0,.7);
                draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //Draw paraboloid over unit disk
                triple f(pair t) {
                  return (t.x,t.y*(4-t.x^2),0);//
                }
                surface s=surface(f,(-2,0),(2,1),16,8,usplinetype=new splinetype[] {notaknot,notaknot,monotonic});
                pen p=rgb(0,0,.7);
                draw(s,rgb(.6,.6,1)+opacity(.5),meshpen=p);

                //label and arrow
                label("$z=2y$",(-2,2,7));
                draw((-1.8,2,6.8)--(-1,2,4.1),Arrow3(size=2mm));
                label("$y=4-x^2$",(2.5,2,0));
                draw((2.3,2.5,0.2)--(1.55,2.25,2.5),Arrow3(size=2mm));

                // ////////////////////////////////////
                //    SAMPLE CODE

                // defaultpen(fontsize(10pt));

                //real f(pair z) {return -z.x^4+2*z.x^2-z.y^4+2*z.y^2;}
                //surface s=surface(f,(-1.5,-1.5),(1.5,1.5),Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //triple f(pair t) {
                //  return (cos(t.x)*1.5*cos(t.y),sin(t.x)*cos(t.y),sin(t.y));
                //}
                //surface s=surface(f,(0,0),(pi,2*pi),8,8,Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //draw(s,paleblue);
                //draw(s,lightblue,meshpen=black+thick(),nolight,render(merge=true));
                //draw(mypath,2bp+blue);

                //triple g(real t) {return (t,t,-2*t^4+4*t^2);}
                //path3 mypath=graph(g,-1,1,operator ..);
                //draw(mypath,blue+dashed+linewidth(2));

                //pen p=rgb(0,0,1);
                //draw(s,paleblue+opacity(.5),meshpen=p,render(merge=true));

              </asymptote>
            </image>
          </sidebyside>
        </statement>
        <answer>
          <p>
            <m>8192/105\approx 78.019</m>
          </p>
        </answer>
      </exercise>

      <exercise>
        <statement>
          <p>
            <m>\surfaceS</m> is the surface formed by the intersections of the cylinder <m>z=1-x^2</m> and the planes <m>y=-2</m>,
            <m>y=2</m> and <m>z=0</m>;
            <m>\vec F = \langle 0,y^3,0\rangle</m>.
          </p>

          <sidebyside width="47%">
            <!-- \apexincludemedia{width=90pt,3Dmenu,activate=onclick,deactivate=onclick,
            3Droll=0,
            3Dortho=0.004999519791454077,
            3Dc2c=0.7375360131263733 -0.6143473982810974 0.2803889811038971,
            3Dcoo=32.48771286010742 72.419189453125 49.87675094604492,
            3Droo=200.00000360071368,
            3Dlights=Headlamp,
            add3Djscript=asylabels.js} -->
            <image xml:id="img_14_07_ex_16_3D">
              <description></description>
              <asymptote>

                import graph3;

                //ASY file for fig14_05_ex_23_3D.asy in Chapter 14

                size(282,282,IgnoreAspect);
                //currentprojection=perspective(7,2,1);
                currentprojection=orthographic(14,14,4);
                defaultrender.merge=true;

                // setup and draw the axes
                real[] myxchoice={-1,1};
                real[] myychoice={-2,2};
                real[] myzchoice={1};
                defaultpen(0.5mm);

                pair xbounds=(-2.5,2.5);
                pair ybounds=(-2.5,2.5);
                pair zbounds=(-0.25,1.5);

                xaxis3("",xbounds.x,xbounds.y,black,OutTicks(myxchoice),Arrow3(size=3mm));
                yaxis3("",ybounds.x,ybounds.y,black,OutTicks(myychoice),Arrow3(size=3mm));
                zaxis3("",zbounds.x,zbounds.y,black,OutTicks(myzchoice),Arrow3(size=3mm));

                label("$x$",(xbounds.y+0.05*(xbounds.y-xbounds.x),0,0));
                label("$y$",(0,ybounds.y+0.05*(ybounds.y-ybounds.x),0));
                label("$z$",(0,0,zbounds.y+0.05*(zbounds.y-zbounds.x)));

                //Draw paraboloid over unit disk
                triple f(pair t) {
                  return (t.x,t.y,1-t.x^2);//
                }
                surface s=surface(f,(-1,-2),(1,2),8,8,usplinetype=new splinetype[] {notaknot,notaknot,monotonic});
                pen p=rgb(0,0,.7);
                draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //Draw paraboloid over unit disk
                triple f(pair t) {
                  return (t.x,-2,t.y*(1-t.x^2));//
                }
                surface s=surface(f,(-1,0),(1,1),8,8,usplinetype=new splinetype[] {notaknot,notaknot,monotonic});
                pen p=rgb(0,0,.7);
                draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //Draw paraboloid over unit disk
                triple f(pair t) {
                  return (t.x,2,t.y*(1-t.x^2));//
                }
                surface s=surface(f,(-1,0),(1,1),8,8,usplinetype=new splinetype[] {notaknot,notaknot,monotonic});
                pen p=rgb(0,0,.7);
                draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                triple f(pair t) {
                  return (t.x,t.y,0);//
                }
                surface s=surface(f,(-1,-2),(1,2),2,2,Spline);
                pen p=rgb(0,0,.7);
                draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                triple g(real t) {return (t,-2,1-t^2);}
                path3 mypath=graph(g,-1,1,operator ..);draw(mypath,blue+linewidth(2));

                triple g(real t) {return (t,2,1-t^2);}
                path3 mypath=graph(g,-1,1,operator ..);draw(mypath,blue+linewidth(2));

                draw((1,-2,0)--(1,2,0)--(-1,2,0)--(-1,-2,0)--cycle,blue+linewidth(2));

                //label and arrow
                label("$z=1-x^2$",(0,1,1.55));
                draw((0,.9,1.45)--(0,.5,1.05),Arrow3(size=2mm));

                //triple g(real t) {return (0,t,6-t^2);}
                //path3 mypath=graph(g,-2,2,operator ..);draw(mypath,blue+linewidth(2));

                // ////////////////////////////////////
                //    SAMPLE CODE

                // defaultpen(fontsize(10pt));

                //real f(pair z) {return -z.x^4+2*z.x^2-z.y^4+2*z.y^2;}
                //surface s=surface(f,(-1.5,-1.5),(1.5,1.5),Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //triple f(pair t) {
                //  return (cos(t.x)*1.5*cos(t.y),sin(t.x)*cos(t.y),sin(t.y));
                //}
                //surface s=surface(f,(0,0),(pi,2*pi),8,8,Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //draw(s,paleblue);
                //draw(s,lightblue,meshpen=black+thick(),nolight,render(merge=true));
                //draw(mypath,2bp+blue);

                //triple g(real t) {return (t,t,-2*t^4+4*t^2);}
                //path3 mypath=graph(g,-1,1,operator ..);
                //draw(mypath,blue+dashed+linewidth(2));

                //pen p=rgb(0,0,1);
                //draw(s,paleblue+opacity(.5),meshpen=p,render(merge=true));

              </asymptote>
            </image>
          </sidebyside>
        </statement>
        <answer>
          <p>
            <m>64/3</m>
          </p>
        </answer>
      </exercise>
    </exercisegroup>

    <exercisegroup>
      <introduction>
        <p>
          In the following exercises,
          a closed curve <m>C</m> that is the boundary of a surface <m>\surfaceS</m> is given along with a vector field <m>\vec F</m>.
          Find the circulation of <m>\vec F</m> around <m>C</m> either through direct computation or through Stokes' Theorem.
        </p>
      </introduction>

      <exercise>
        <statement>
          <p>
            <m>C</m> is the curve whose <m>x</m>- and <m>y</m>-values are determined by the three sides of a triangle with vertices at <m>(-1,0)</m>,
            <m>(1,0)</m> and <m>(0,1)</m>, traversed in that order,
            and the <m>z</m>-values are determined by the function <m>z=xy</m>;
            <m>\vec F = \langle z-y^2,x,z\rangle</m>.
          </p>

          <sidebyside width="47%">
            <!-- \apexincludemedia{width=90pt,3Dmenu,activate=onclick,deactivate=onclick,
            3Droll=0,
            3Dortho=0.004999519791454077,
            3Dc2c=0.7375360131263733 -0.6143473982810974 0.2803889811038971,
            3Dcoo=32.48771286010742 72.419189453125 49.87675094604492,
            3Droo=200.00000360071368,
            3Dlights=Headlamp,
            add3Djscript=asylabels.js} -->
            <image xml:id="img_14_07_ex_17_3D">
              <description></description>
              <asymptote>

                import graph3;

                //ASY file for fig14_07_ex_23_3D.asy in Chapter 14

                size(282,282,IgnoreAspect);
                //currentprojection=perspective(7,2,1);
                currentprojection=orthographic(-10,22,1);
                defaultrender.merge=true;

                // setup and draw the axes
                real[] myxchoice={-1,1};
                real[] myychoice={1};
                real[] myzchoice={.25};
                defaultpen(0.5mm);

                pair xbounds=(-1.25,1.25);
                pair ybounds=(-.25,1.25);
                pair zbounds=(-.25,.3);

                xaxis3("",xbounds.x,xbounds.y,black,OutTicks(myxchoice),Arrow3(size=3mm));
                yaxis3("",ybounds.x,ybounds.y,black,OutTicks(myychoice),Arrow3(size=3mm));
                zaxis3("",zbounds.x,zbounds.y,black,OutTicks(myzchoice),Arrow3(size=3mm));

                label("$x$",(xbounds.y+0.05*(xbounds.y-xbounds.x),0,0));
                label("$y$",(0,ybounds.y+0.05*(ybounds.y-ybounds.x),0));
                label("$z$",(0,0,zbounds.y+0.05*(zbounds.y-zbounds.x)));

                //Draw paraboloid over unit disk
                triple f(pair t) {
                  return (t.x-1+t.y*(2-2*t.x),t.x,(t.x-1+t.y*(2-2*t.x))*t.x);//
                }
                surface s=surface(f,(0,0),(1,1),8,8,usplinetype=new splinetype[] {notaknot,notaknot,monotonic});
                pen p=rgb(0,0,.7);
                draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //triple g(real t) {return (t,-2,1-t^2);}
                //path3 mypath=graph(g,-1,1,operator ..);draw(mypath,blue+linewidth(2));

                triple g(real t) {return (t,0,0);}
                path3 mypath=graph(g,-1,1,operator ..);draw(mypath,blue+linewidth(2));

                triple g(real t) {return (t,1-t,t*(1-t));}
                path3 mypath=graph(g,0,1,operator ..);draw(mypath,blue+linewidth(2));

                triple g(real t) {return (t,t+1,t*(t+1));}
                path3 mypath=graph(g,-1,0,operator ..);draw(mypath,blue+linewidth(2));

                //draw((-1,0,0)--(1,0,0)--(0,1,0)--cycle,blue+linewidth(2));

                //label and arrow
                //label("$z=1-x^2$",(0,1,1.55));
                //draw((0,.9,1.45)--(0,.5,1.05),Arrow3(size=2mm));

                //triple g(real t) {return (0,t,6-t^2);}
                //path3 mypath=graph(g,-2,2,operator ..);draw(mypath,blue+linewidth(2));

                // ////////////////////////////////////
                //    SAMPLE CODE

                // defaultpen(fontsize(10pt));

                //real f(pair z) {return -z.x^4+2*z.x^2-z.y^4+2*z.y^2;}
                //surface s=surface(f,(-1.5,-1.5),(1.5,1.5),Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //triple f(pair t) {
                //  return (cos(t.x)*1.5*cos(t.y),sin(t.x)*cos(t.y),sin(t.y));
                //}
                //surface s=surface(f,(0,0),(pi,2*pi),8,8,Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //draw(s,paleblue);
                //draw(s,lightblue,meshpen=black+thick(),nolight,render(merge=true));
                //draw(mypath,2bp+blue);

                //triple g(real t) {return (t,t,-2*t^4+4*t^2);}
                //path3 mypath=graph(g,-1,1,operator ..);
                //draw(mypath,blue+dashed+linewidth(2));

                //pen p=rgb(0,0,1);
                //draw(s,paleblue+opacity(.5),meshpen=p,render(merge=true));

              </asymptote>
            </image>
          </sidebyside>
        </statement>
        <answer>
          <p>
            <m>5/3</m>
          </p>
        </answer>
      </exercise>

      <exercise>
        <statement>
          <p>
            <m>C</m> is the curve whose <m>x</m>- and <m>y</m>-values are given by
            <m>\vec r(t) = \langle 2\cos t,2\sin t\rangle</m> and the <m>z</m>-values are determined by the function <m>z=x^2+y^3-3y+1</m>;
            <m>\vec F = \langle -y,x,z\rangle</m>.
          </p>

          <sidebyside width="47%">
            <!-- \apexincludemedia{width=90pt,3Dmenu,activate=onclick,deactivate=onclick,
            3Droll=0,
            3Dortho=0.004999519791454077,
            3Dc2c=0.7375360131263733 -0.6143473982810974 0.2803889811038971,
            3Dcoo=32.48771286010742 72.419189453125 49.87675094604492,
            3Droo=200.00000360071368,
            3Dlights=Headlamp,
            add3Djscript=asylabels.js} -->
            <image xml:id="img_14_07_ex_18_3D">
              <description></description>
              <asymptote>

                import graph3;

                //ASY file for fig14_07_ex_18_3D.asy in Chapter 14

                size(282,282,IgnoreAspect);
                //currentprojection=perspective(7,2,1);
                currentprojection=orthographic(14,14,10);
                defaultrender.merge=true;

                // setup and draw the axes
                real[] myxchoice={-2,2};
                real[] myychoice={-2,2};
                real[] myzchoice={6};
                defaultpen(0.5mm);

                pair xbounds=(-2.5,2.5);
                pair ybounds=(-2.5,2.5);
                pair zbounds=(-.25,6.5);

                xaxis3("",xbounds.x,xbounds.y,black,OutTicks(myxchoice),Arrow3(size=3mm));
                yaxis3("",ybounds.x,ybounds.y,black,OutTicks(myychoice),Arrow3(size=3mm));
                zaxis3("",zbounds.x,zbounds.y,black,OutTicks(myzchoice),Arrow3(size=3mm));

                label("$x$",(xbounds.y+0.05*(xbounds.y-xbounds.x),0,0));
                label("$y$",(0,ybounds.y+0.05*(ybounds.y-ybounds.x),0));
                label("$z$",(0,0,zbounds.y+0.05*(zbounds.y-zbounds.x)));

                //Draw paraboloid over unit disk
                triple f(pair t) {
                  return (t.y*cos(t.x),t.y*sin(t.x),(t.y*cos(t.x))^2+(t.y*sin(t.x))^3-3t.y*sin(t.x)+1);//
                }
                surface s=surface(f,(0,0),(2pi,2),16,8,Spline);
                pen p=rgb(0,0,.7);
                draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //triple g(real t) {return (t,-2,1-t^2);}
                //path3 mypath=graph(g,-1,1,operator ..);draw(mypath,blue+linewidth(2));

                triple g(real t) {return (2cos(t),2sin(t),4cos(t)^2+8sin(t)^3-6sin(t)+1);}
                path3 mypath=graph(g,0,2pi,operator ..);draw(mypath,blue+linewidth(2));

                //triple g(real t) {return (t,1-t,t*(1-t));}
                //path3 mypath=graph(g,0,1,operator ..);draw(mypath,blue+linewidth(2));

                //triple g(real t) {return (t,t+1,t*(t+1));}
                //path3 mypath=graph(g,-1,0,operator ..);draw(mypath,blue+linewidth(2));

                //draw((-1,0,0)--(1,0,0)--(0,1,0)--cycle,blue+linewidth(2));

                //label and arrow
                //label("$z=1-x^2$",(0,1,1.55));
                //draw((0,.9,1.45)--(0,.5,1.05),Arrow3(size=2mm));

                //triple g(real t) {return (0,t,6-t^2);}
                //path3 mypath=graph(g,-2,2,operator ..);draw(mypath,blue+linewidth(2));

                // ////////////////////////////////////
                //    SAMPLE CODE

                // defaultpen(fontsize(10pt));

                //real f(pair z) {return -z.x^4+2*z.x^2-z.y^4+2*z.y^2;}
                //surface s=surface(f,(-1.5,-1.5),(1.5,1.5),Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //triple f(pair t) {
                //  return (cos(t.x)*1.5*cos(t.y),sin(t.x)*cos(t.y),sin(t.y));
                //}
                //surface s=surface(f,(0,0),(pi,2*pi),8,8,Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //draw(s,paleblue);
                //draw(s,lightblue,meshpen=black+thick(),nolight,render(merge=true));
                //draw(mypath,2bp+blue);

                //triple g(real t) {return (t,t,-2*t^4+4*t^2);}
                //path3 mypath=graph(g,-1,1,operator ..);
                //draw(mypath,blue+dashed+linewidth(2));

                //pen p=rgb(0,0,1);
                //draw(s,paleblue+opacity(.5),meshpen=p,render(merge=true));

              </asymptote>
            </image>
          </sidebyside>
        </statement>
        <answer>
          <p>
            <m>8\pi</m>
          </p>
        </answer>
      </exercise>

      <exercise>
        <statement>
          <p>
            <m>C</m> is the curve whose <m>x</m>- and <m>y</m>-values are given by
            <m>\vec r(t) = \langle \cos t,3\sin t\rangle</m> and the <m>z</m>-values are determined by the function <m>z=5-2x-y</m>;
            <m>\vec F = \langle -\frac13y,3x,\frac23y-3x\rangle</m>.
          </p>

          <sidebyside width="47%">
            <!-- \apexincludemedia{width=90pt,3Dmenu,activate=onclick,deactivate=onclick,
            3Droll=0,
            3Dortho=0.004999519791454077,
            3Dc2c=0.7375360131263733 -0.6143473982810974 0.2803889811038971,
            3Dcoo=32.48771286010742 72.419189453125 49.87675094604492,
            3Droo=200.00000360071368,
            3Dlights=Headlamp,
            add3Djscript=asylabels.js} -->
            <image xml:id="img_14_07_ex_19_3D">
              <description></description>
              <asymptote>

                import graph3;

                //ASY file for fig14_07_ex_18_3D.asy in Chapter 14

                size(282,282,IgnoreAspect);
                //currentprojection=perspective(7,2,1);
                currentprojection=orthographic(14,14,10);
                defaultrender.merge=true;

                // setup and draw the axes
                real[] myxchoice={-2,2};
                real[] myychoice={-2,2};
                real[] myzchoice={10};
                defaultpen(0.5mm);

                pair xbounds=(-2.5,2.5);
                pair ybounds=(-2.5,2.5);
                pair zbounds=(-.25,11);

                xaxis3("",xbounds.x,xbounds.y,black,OutTicks(myxchoice),Arrow3(size=3mm));
                yaxis3("",ybounds.x,ybounds.y,black,OutTicks(myychoice),Arrow3(size=3mm));
                zaxis3("",zbounds.x,zbounds.y,black,OutTicks(myzchoice),Arrow3(size=3mm));

                label("$x$",(xbounds.y+0.05*(xbounds.y-xbounds.x),0,0));
                label("$y$",(0,ybounds.y+0.05*(ybounds.y-ybounds.x),0));
                label("$z$",(0,0,zbounds.y+0.05*(zbounds.y-zbounds.x)));

                //Draw paraboloid over unit disk
                triple f(pair t) {
                  return (t.y*cos(t.x),3*t.y*sin(t.x),-(t.y*cos(t.x))*2-3*(t.y*sin(t.x))+5);//
                }
                surface s=surface(f,(0,0),(2pi,1),16,8,Spline);
                pen p=rgb(0,0,.7);
                draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //triple g(real t) {return (t,-2,1-t^2);}
                //path3 mypath=graph(g,-1,1,operator ..);draw(mypath,blue+linewidth(2));

                triple g(real t) {return (cos(t),3sin(t),-2cos(t)-3sin(t)+5);}
                path3 mypath=graph(g,0,2pi,operator ..);draw(mypath,blue+linewidth(2));

                //triple g(real t) {return (t,1-t,t*(1-t));}
                //path3 mypath=graph(g,0,1,operator ..);draw(mypath,blue+linewidth(2));

                //triple g(real t) {return (t,t+1,t*(t+1));}
                //path3 mypath=graph(g,-1,0,operator ..);draw(mypath,blue+linewidth(2));

                //draw((-1,0,0)--(1,0,0)--(0,1,0)--cycle,blue+linewidth(2));

                //label and arrow
                //label("$z=1-x^2$",(0,1,1.55));
                //draw((0,.9,1.45)--(0,.5,1.05),Arrow3(size=2mm));

                //triple g(real t) {return (0,t,6-t^2);}
                //path3 mypath=graph(g,-2,2,operator ..);draw(mypath,blue+linewidth(2));

                // ////////////////////////////////////
                //    SAMPLE CODE

                // defaultpen(fontsize(10pt));

                //real f(pair z) {return -z.x^4+2*z.x^2-z.y^4+2*z.y^2;}
                //surface s=surface(f,(-1.5,-1.5),(1.5,1.5),Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //triple f(pair t) {
                //  return (cos(t.x)*1.5*cos(t.y),sin(t.x)*cos(t.y),sin(t.y));
                //}
                //surface s=surface(f,(0,0),(pi,2*pi),8,8,Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //draw(s,paleblue);
                //draw(s,lightblue,meshpen=black+thick(),nolight,render(merge=true));
                //draw(mypath,2bp+blue);

                //triple g(real t) {return (t,t,-2*t^4+4*t^2);}
                //path3 mypath=graph(g,-1,1,operator ..);
                //draw(mypath,blue+dashed+linewidth(2));

                //pen p=rgb(0,0,1);
                //draw(s,paleblue+opacity(.5),meshpen=p,render(merge=true));

              </asymptote>
            </image>
          </sidebyside>
        </statement>
        <answer>
          <p>
            <m>23\pi</m>
          </p>
        </answer>
      </exercise>

      <exercise>
        <statement>
          <p>
            <m>C</m> is the curve whose <m>x</m>- and <m>y</m>-values are sides of the square with vertices at <m>(1,1)</m>,
            <m>(-1,1)</m>,
            <m>(-1,-1)</m> and <m>(1,-1)</m>, traversed in that order,
            and the <m>z</m>-values are determined by the function <m>z=10-5x-2y</m>;
            <m>\vec F = \langle 5y^2,2y^2,y^2\rangle</m>.
          </p>

          <sidebyside width="47%">
            <!-- \apexincludemedia{width=90pt,3Dmenu,activate=onclick,deactivate=onclick,
            3Droll=0,
            3Dortho=0.004999519791454077,
            3Dc2c=0.7375360131263733 -0.6143473982810974 0.2803889811038971,
            3Dcoo=32.48771286010742 72.419189453125 49.87675094604492,
            3Droo=200.00000360071368,
            3Dlights=Headlamp,
            add3Djscript=asylabels.js} -->
            <image xml:id="img_14_07_ex_20_3D">
              <description></description>
              <asymptote>

                import graph3;

                //ASY file for fig14_07_ex_20_3D.asy in Chapter 14

                size(282,282,IgnoreAspect);
                //currentprojection=perspective(7,2,1);
                currentprojection=orthographic(11,11,80);
                defaultrender.merge=true;

                // setup and draw the axes
                real[] myxchoice={-1,1};
                real[] myychoice={-1,1};
                real[] myzchoice={5,10,15};
                defaultpen(0.5mm);

                pair xbounds=(-1.25,1.25);
                pair ybounds=(-1.25,1.25);
                pair zbounds=(-.25,18);

                xaxis3("",xbounds.x,xbounds.y,black,OutTicks(myxchoice),Arrow3(size=3mm));
                yaxis3("",ybounds.x,ybounds.y,black,OutTicks(myychoice),Arrow3(size=3mm));
                zaxis3("",zbounds.x,zbounds.y,black,OutTicks(myzchoice),Arrow3(size=3mm));

                label("$x$",(xbounds.y+0.05*(xbounds.y-xbounds.x),0,0));
                label("$y$",(0,ybounds.y+0.05*(ybounds.y-ybounds.x),0));
                label("$z$",(0,0,zbounds.y+0.05*(zbounds.y-zbounds.x)));

                //Draw paraboloid over unit disk
                triple f(pair t) {
                  return (t.x,t.y,10-5t.x-2t.y);//
                }
                surface s=surface(f,(-1,-1),(1,1),3,3,Spline);
                pen p=rgb(0,0,.7);
                draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //triple g(real t) {return (t,-2,1-t^2);}
                //path3 mypath=graph(g,-1,1,operator ..);draw(mypath,blue+linewidth(2));

                //triple g(real t) {return (cos(t),3sin(t),-2cos(t)-3sin(t)+5);}
                //path3 mypath=graph(g,0,2pi,operator ..);draw(mypath,blue+linewidth(2));

                //triple g(real t) {return (t,1-t,t*(1-t));}
                //path3 mypath=graph(g,0,1,operator ..);draw(mypath,blue+linewidth(2));

                //triple g(real t) {return (t,t+1,t*(t+1));}
                //path3 mypath=graph(g,-1,0,operator ..);draw(mypath,blue+linewidth(2));

                draw((1,1,3)--(-1,1,13)--(-1,-1,17)--(1,-1,7)--cycle,blue+linewidth(2));

                //label and arrow
                //label("$z=1-x^2$",(0,1,1.55));
                //draw((0,.9,1.45)--(0,.5,1.05),Arrow3(size=2mm));

                //triple g(real t) {return (0,t,6-t^2);}
                //path3 mypath=graph(g,-2,2,operator ..);draw(mypath,blue+linewidth(2));

                // ////////////////////////////////////
                //    SAMPLE CODE

                // defaultpen(fontsize(10pt));

                //real f(pair z) {return -z.x^4+2*z.x^2-z.y^4+2*z.y^2;}
                //surface s=surface(f,(-1.5,-1.5),(1.5,1.5),Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //triple f(pair t) {
                //  return (cos(t.x)*1.5*cos(t.y),sin(t.x)*cos(t.y),sin(t.y));
                //}
                //surface s=surface(f,(0,0),(pi,2*pi),8,8,Spline);
                //pen p=rgb(0,0,.7);
                //draw(s,rgb(.6,.6,1)+opacity(.7),meshpen=p);

                //draw(s,paleblue);
                //draw(s,lightblue,meshpen=black+thick(),nolight,render(merge=true));
                //draw(mypath,2bp+blue);

                //triple g(real t) {return (t,t,-2*t^4+4*t^2);}
                //path3 mypath=graph(g,-1,1,operator ..);
                //draw(mypath,blue+dashed+linewidth(2));

                //pen p=rgb(0,0,1);
                //draw(s,paleblue+opacity(.5),meshpen=p,render(merge=true));

              </asymptote>
            </image>
          </sidebyside>
        </statement>
        <answer>
          <p>
            <m>0</m>
          </p>
        </answer>
      </exercise>
    </exercisegroup>

    <exercisegroup>
      <introduction>
        <p>
          The following exercises<nbsp/>are designed to challenge your understanding and require no computation.
        </p>
      </introduction>


      <exercise>
        <statement>
          <p>
            Let <m>\surfaceS</m> be any closed surface enclosing a domain <m>D</m>.
            Consider <m>\vec F_1 = \langle x,0,0\rangle</m> and <m>\vec F_2=\langle y,y^2,z-2yz\rangle</m>.
          </p>

          <p>
            These fields are clearly very different.
            Why is it that the total outward flux of each field across <m>\surfaceS</m> is the same?
          </p>
        </statement>
        <answer>
          <p>
            Each field has a divergence of 1;
            by the Divergence Theorem,
            the total outward flux across <m>\surfaceS</m> is <m>\iint_D 1\, dS</m> for each field.
          </p>
        </answer>
      </exercise>

      <exercise>
        <statement>
          <p>
            <ol>
              <li>
                <p>
                  Green's Theorem can be used to find the area of a region enclosed by a curve by evaluating a line integral with the appropriate choice of vector field <m>\vec F</m>.
                  What condition on <m>\vec F</m> makes this possible?
                </p>
              </li>

              <li>
                <p>
                  Likewise, Stokes' Theorem can be used to find the surface area of a region enclosed by a curve in space by evaluating a line integral with the appropriate choice of vector field <m>\vec F</m>.
                  What condition on <m>\vec F</m> makes this possible?
                </p>
              </li>
            </ol>
          </p>
        </statement>
        <answer>
          <p>
            <ol>
              <li>
                <p>
                  <m>\curl\vec F = 1</m>.
                </p>
              </li>

              <li>
                <p>
                  <m>\curl\vec F\cdot \vec n = 1</m>,
                  where <m>\vec n</m> is a unit vector normal to <m>\surfaceS</m>.
                </p>
              </li>
            </ol>
          </p>
        </answer>
      </exercise>

      <exercise>
        <statement>
          <p>
            The Divergence Theorem establishes equality between a particular double integral and a particular triple integral.
            What types of circumstances would lead one to choose to evaluate the triple integral over the double integral?
          </p>
        </statement>
        <answer>
          <p>
            Answers will vary.
            Often the closed surface <m>\surfaceS</m> is composed of several smooth surfaces.
            To measure total outward flux,
            this may require evaluating multiple double integrals.
            Each double integral requires the parametrization of a surface and the computation of the cross product of partial derivatives.
            One triple integral may require less work,
            especially as the divergence of a vector field is generally easy to compute.
          </p>
        </answer>
      </exercise>

      <exercise>
        <statement>
          <p>
            Stokes' Theorem establishes equality between a particular line integral and a particular double integral.
            What types of circumstances would lead one to choose to evaluate the double integral over the line integral?
          </p>
        </statement>
        <answer>
          <p>
            Answers will vary.
            Often the closed curve <m>C</m> is composed of several smooth curves.
            To measure the total circulation,
            one may have to evaluate line integrals along each curve.
            Each line integral requires the parametrization of its curve.
            It may be less work to evaluate one single double (<ie/>, surface) integral.
          </p>
        </answer>
      </exercise>
    </exercisegroup>
  </exercises>
</section>
