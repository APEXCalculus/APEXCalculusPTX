<?xml version="1.0" encoding="UTF-8"?>
<!-- TODO: introduce units tags as appropriate -->
<section xml:id="sec_derivative" label="sec_derivative">
  <title>Instantaneous Rates of Change: The Derivative</title>
  <subsection xml:id="sec-deriv-intro">
    <title>Introduction</title>

    <figure xml:id="vid_deriv_intro_introduction" component="video" vshift="0">
      <caption>Video introduction to <xref ref="sec_derivative"/></caption>
      <video youtube="jRW9d25E_ls" label="vid_deriv_intro_introduction"/>
    </figure>

    <p>
      A common amusement park ride lifts riders to a height then allows them to freefall a certain distance before safely stopping them.
      Suppose such a ride drops riders from a height of <m>150</m> feet.
      Students of physics may recall that the height
      (in feet)
      of the riders, <m>t</m> seconds after freefall
      (and ignoring air resistance, etc.)
      can be accurately modeled by <m>f(t) = -16t^2+150</m>.
    </p>

    <p>
      Using this formula, it is easy to verify that, without intervention,
      the riders will hit the ground when <m>f(t)=0</m> so at <m>t=2.5\sqrt{1.5} \approx 3.06</m> seconds.
      Suppose the designers of the ride decide to begin slowing the riders' fall after <m>2</m>   seconds (corresponding to a height of <m>f(2)=</m>
      <quantity><mag>86</mag><unit base="foot"/></quantity>).
      How fast will the riders be traveling at that time?
    </p>

    <p>
      We have been given a <em>position</em> function,
      but what we want to compute is a velocity at a specific point in time,
      <ie/>, we want an <term>instantaneous velocity</term>.
      We do not currently know how to calculate this.
    </p>

    <p>
      However, we do know from common experience how to calculate an
      <term>average velocity</term>.
      (If we travel <m>60</m> miles in <m>2</m> hours,
      we know we had an average velocity of
      <quantity><mag>30</mag><unit base="mileperhour"/></quantity>.)
      We looked at this concept in <xref ref="sec_limit_intro"/>
      when we introduced the difference quotient.
      We have
      <me>
        \frac{\text{change in distance}}{\text{change in time}} = \frac{\text{“rise”}}{\text{“run”}} = \text{average velocity.}
      </me>
    </p>

    <p>
      We can approximate the instantaneous velocity at <m>t=2</m> by considering the average   velocity over some time period containing <m>t=2</m>.
      If we make the time interval small,
      we will get a good approximation.
      (This fact is commonly used.
      For instance,
      high speed cameras are used to track fast moving objects.
      Distances are measured over a fixed number of frames to generate an accurate approximation of the velocity.)
    </p>

    <p>
      Consider the interval from <m>t=2</m> to <m>t=3</m>
      (just before the riders hit the ground).
      On that interval, the average velocity is
      <me>
        \frac{f(3)-f(2)}{3-2} = \frac{6-86}{1} =-80\,\text{ft/s}
      </me>,
      where the minus sign indicates that the riders are moving <em>down</em>.
      By narrowing the interval we consider,
      we will likely get a better approximation of the instantaneous velocity.
      On <m>[2,2.5]</m> we have
      <me>
        \frac{f(2.5)-f(2)}{2.5-2} = \frac{50-86}{0.5} =-72\,\text{ft/s}
      </me>.
    </p>
    <aside vshift="0">
      <title>Units in Calculations</title>
      <p>
        In the above calculations,
        we left off the units until the end of the problem.
        You should always be sure that you label your answer with the correct units.
        For example, if <m>g(x)</m> gave you the cost
        (in $)
        of producing <m>x</m> widgets,
        the units on the difference quotient would be $/widget.
      </p>
    </aside>
    <p>
      We can do this for smaller and smaller intervals of time.
      For instance, over a time span of one tenth of a second,
      <ie/>, on <m>[2,2.1]</m>, we have
      <me>
        \frac{f(2.1)-f(2)}{2.1-2} = \frac{79.44-86}{0.1} =-65.6\,\text{ft/s}
      </me>.
    </p>

    <p>
      Over a time span of one hundredth of a second,
      on <m>[2,2.01]</m>, the average velocity is
      <me>
        \frac{f(2.01)-f(2)}{2.01-2} = \frac{85.3584-86}{0.01} =-64.16\,\text{ft/s}
      </me>.
    </p>

    <p>
      What we are really computing is the average velocity on the interval <m>[2,2+h]</m> for small values of <m>h</m>.
      That is, we are computing
      <me>
        \frac{f(2+h) - f(2)}{h}
      </me>
      where <m>h</m> is small.
    </p>

    <p>
      We really want to use <m>h=0</m>, but this, of course,
      returns the familiar <q><m>0/0</m></q> indeterminate form.
      So we employ a limit,
      as we did in <xref ref="sec_limit_intro"/>.
    </p>

    <p>
      We can approximate the value of this limit numerically with small values of <m>h</m> as seen in <xref ref="table_falling"/>.
      It looks as though the velocity is approaching
      <quantity><mag>-64</mag><unit base="foot"/><per base="second"/></quantity>.
    </p>

    <figure xml:id="table_falling" vshift="0">
      <caption>Approximating the instantaneous velocity with average velocities over a small time period <m>h</m></caption>
      <tabular>
        <row bottom="medium">
          <cell><m>h</m></cell>
          <cell>Average Velocity (<quantity><mag/><unit base="foot"/><per base="second"/></quantity>)</cell>
        </row>
        <row>
          <cell><m>1</m></cell>
          <cell><m>\phantom{Average}{-80}</m></cell>
        </row>
        <row>
          <cell><m>0.5</m></cell>
          <cell><m>\phantom{Average}{-72}</m></cell>
        </row>
        <row>
          <cell><m>0.1</m></cell>
          <cell><m>\phantom{Average}{-65.6}</m></cell>
        </row>
        <row>
          <cell><m>0.01</m></cell>
          <cell><m>\phantom{Average}{-64.16}</m></cell>
        </row>
        <row>
          <cell><m>0.001</m></cell>
          <cell><m>\phantom{Average}{-64.016}</m></cell>
        </row>
      </tabular>
    </figure>

    <p>
      Computing the limit directly gives
      <md>
        <mrow>\lim_{h\to 0} \frac{f(2+h)-f(2)}{h} \amp = \lim_{h\to 0}\frac{-16(2+h)^2+150 -   (-16(2)^2+150)}{h}</mrow>
        <mrow>\amp = \lim_{h\to 0}\frac{-16(4+4h+h^2)+150 - 86}{h}</mrow>
        <mrow>\amp = \lim_{h\to 0}\frac{-64-64h-16h^2+64}{h}</mrow>
        <mrow>\amp = \lim_{h\to 0}\frac{-64h-16h^2}{h}</mrow>
        <mrow>\amp = \lim_{h\to 0}(-64 -16h)</mrow>
        <mrow>\amp =-64</mrow>
      </md>.
    </p>

    <p>
      Graphically,
      we can view the average velocities we computed numerically as the slopes of secant lines on the graph of <m>f</m> going through the points
      <m>(2,f(2))</m> and <m>(2+h,f(2+h))</m>.
      In <xref first="fig_derivfalling" last="fig_derivfalling3">Figures</xref>,
      the secant line corresponding to <m>h=1</m> is shown in three contexts.
      <xref ref="fig_derivfalling"/> shows a <q>zoomed out</q>
      version of <m>f</m> with its secant line.
      In <xref ref="fig_derivfalling2"/>,
      we zoom in around the points of intersection between <m>f</m> and the secant line.
      Notice how well this secant line approximates <m>f</m> between those two points <mdash/> it is a common practice to approximate functions with straight lines.
    </p>

    <sbsgroup widths="47% 47%" margins="0%">
      <sidebyside>
        <figure xml:id="fig_derivfalling">
        <caption>The function <m>f(t)</m> and its secant line corresponding to <m>t=2</m> and <m>  t=3</m></caption>
          <image>
          <!-- START figures/fig_derivfalling.tex -->
            <shortdescription>
              A downward-curving graph of function f(t) with its secant line corresponding to t=2 and t=3.
            </shortdescription>
            <description>
              <p>
                The graph starts at the origin and is drawn on the first quadrant.
                The horizontal <m>t</m> axis is drawn between <m>0</m> to <m>3</m>,
                and the <m>y</m> axis is drawn between <m>0</m> to <m>150</m>.
                The graph has a decreasing slope, gently declining from points <m>(0, 150)</m> to <m>(3,0)</m>.
                A secant line is drawn on the curve from <m>t=2</m> and <m>t=3</m>.
              </p>
            </description>
            <latex-image label="img_derivfalling">
              \begin{tikzpicture}
                \begin{axis}[
                    xmin=-.5,
                    xmax=3.49,
                    ymin=-20,
                    ymax=180,
                    xlabel={$t$}
                  ]
                  \addplot+[infinite,domain=0:3.06] {-16*x^2+150};
                  \addplot+[secantline,domain=1.5:3.2] {-80*(x-2)+86};
                  \addplot[soliddot] coordinates {(2,86) (3,6)};
                \end{axis}
              \end{tikzpicture}
            </latex-image>
          </image>
          <!-- figures/fig_derivfalling.tex END -->
        </figure>

        <figure xml:id="fig_derivfalling2">
          <caption>The function <m>f(t)</m> and a secant line corresponding to <m>t=2</m> and <m>t=3</m>, zoomed in near <m>t=2</m></caption>
          <image>
          <!-- START figures/fig_derivfalling2.tex -->
            <shortdescription>
              The previous graph of function f(t) that is zoomed in near t=2, with its secant line from t=2 to t=3.
            </shortdescription>
            <description>
              <p>
                The graph appears to start at the point <m>(1.8,0)</m> and is drawn on the first quadrant.
                The horizontal <m>t</m> axis is drawn between <m>1.8</m> to <m>3.4</m>, and the <m>y</m> axis
                is drawn between <m>0</m> to <m>120</m>.
                The curve appears to be coinciding with the secant line.
              </p>
            </description>
            <latex-image label="img_derivfalling2">
              \begin{tikzpicture}
                \begin{axis}[
                    xmin=1.8,
                    xmax=3.4,
                    ymin=0,
                    ymax=129,
                    xlabel={$t$},
                    xdiscontinuity
                  ]
                  \addplot+[infinite,domain=0:3.06] {-16*x^2+150};
                  \addplot+[secantline,domain=1.8:3.4] {-80*(x-2)+86};
                  \addplot[soliddot] coordinates{(2,86) (3,6)};
                \end{axis}
              \end{tikzpicture}
            </latex-image>
          </image>
          <!-- figures/fig_derivfalling2.tex END -->
        </figure>
      </sidebyside>

      <sidebyside>
        <figure xml:id="fig_derivfalling3">
          <caption>The function <m>f(t)</m> with the same secant line, zoomed in further</caption>
          <image>
          <!-- START figures/fig_derivfalling3.tex -->
            <shortdescription>
              The graph of function f(t) that is further zoomed in near t=2.
            </shortdescription>
            <description>
              <p>
                The graph appears to start at the point <m>(1.4,0)</m> and is drawn on the first quadrant.
                The horizontal <m>t</m> axis is drawn between <m>1.4</m> to <m>2.6</m>, and the <m>y</m> axis
                is drawn between <m>0</m> to <m>120</m>.
                The curve appears to be coinciding with the secant line that is drawn on the function at <m>t=2</m>.
                The secant line is above the curve on the left of the point of intersection and is below the curve to its right.
              </p>
            </description>
            <latex-image label="img_derivfalling3">
              \begin{tikzpicture}
                \begin{axis}[
                    xmin=1.4,
                    xmax=2.6,
                    ymin=0,
                    ymax=130,
                    xlabel={$t$},
                    xdiscontinuity
                  ]
                  \addplot+[infinite,domain=0:3.06] {-16*x^2+150};
                  \addplot+[secantline,domain=1.5:2.6] {-80*(x-2)+86};
                  \addplot[soliddot] coordinates{(2,86)};
                \end{axis}
              \end{tikzpicture}
            </latex-image>
          </image>
          <!-- figures/fig_derivfalling3.tex END -->
        </figure>

        <figure xml:id="fig_derivfalling4">
          <caption>The function <m>f(t)</m> with its tangent line at <m>t=2</m></caption>
          <!-- START figures/fig_derivfalling4.tex -->
          <image>
              <shortdescription>
                The graph of function f(t) that is highly zoomed in near t=2.
              </shortdescription>
              <description>
                <p>
                  The graph appears to start at the point <m>(1.4,0)</m> and is drawn on the first quadrant.
                  The horizontal <m>t</m> axis is drawn between <m>1.4</m> to <m>2.6</m>, and the <m>y</m> axis
                  is drawn between <m>0</m> to <m>120</m>.
                  The curve appears to be coinciding with the tangent line at <m>t=2</m>.
                </p>
              </description>
            <latex-image label="img_derivfalling4">
              \begin{tikzpicture}
                \begin{axis}[
                    xmin=1.4,
                    xmax=2.6,
                    ymin=0,
                    ymax=140,
                    xlabel={$t$},
                    xdiscontinuity
                  ]
                  \addplot+[infinite,domain=0:3.06] {-16*x^2+150};
                  \addplot+[tangentline,domain=1.4:2.6] {-64*(x-2)+86};
                  \addplot[soliddot] coordinates{(2,86)};
                \end{axis}
              \end{tikzpicture}
            </latex-image>
          </image>
        </figure>
      </sidebyside>
    </sbsgroup>

    <p>
      As <m>h\to 0</m>, these secant lines approach the
      <term>tangent line</term>,
      a line that goes through the point
      <m>(2,f(2))</m> with the special slope of <m>-64</m>.
      In <xref ref="fig_derivfalling3"/>
      and <xref ref="fig_derivfalling4"/>,
      we zoom in around the point <m>(2,86)</m>.
      We see the secant line, which approximates <m>f</m> well,
      but not as well the tangent line shown in <xref ref="fig_derivfalling4"/>.
    </p>

    <p>
      We have just introduced a number of important concepts that we will flesh out more within this   section.
      First, we formally define two of them.
    </p>

    <definition xml:id="def_derivative_at_a_point">
      <title>Derivative at a Point</title>
      <statement>
        <p>
          Let <m>f</m> be a continuous function on an open interval <m>I</m> and let <m>c</m> be
          in <m>I</m>.

                <idx><h>derivative</h><h>at a point</h></idx>

          The <term>derivative</term> of <m>f</m> at <m>c</m>, denoted <m>\fp(c)</m>, is
          <me>
            \lim_{h\to 0}\frac{f(c+h)-f(c)}{h}
          </me>,
          provided the limit exists.
          If the limit exists, we say that
          <m>f</m> is <term>differentiable</term> at <m>c</m>;
          if the limit does not exist,
          then <m>f</m> is not differentiable at <m>c</m>.
          If <m>f</m> is differentiable at every point in <m>I</m>,
          then <m>f</m> is differentiable on <m>I</m>.

                <idx><h>differentiable</h></idx>

        </p>
      </statement>
    </definition>

    <figure xml:id="vid_deriv_intro_defn" component="video" vshift="-2">
      <caption>Video presentation of <xref ref="def_derivative_at_a_point"/></caption>
      <video youtube="JXFMh21PMx4" label="vid_deriv_intro_defn"/>
    </figure>

    <definition xml:id="def_tangent_line">
      <title>Tangent Line</title>
      <statement>
        <p>
          Let <m>f</m> be continuous on an open interval <m>I</m> and differentiable at <m>c</m>,
          for some <m>c</m> in <m>I</m>.
          The line with equation <m>\ell(x) = \fp(c)(x-c)+f(c)</m> is the <term>tangent line</term>
          to the graph of <m>f</m> at <m>c</m>;
          that is, it is the line through
          <m>(c,f(c))</m> whose slope is the derivative of <m>f</m> at <m>c</m>.

                <idx><h>tangent line</h></idx>
                <idx><h>derivative</h><h>tangent line</h></idx>

        </p>
      </statement>
    </definition>

    <p>
      Some examples will help us understand these definitions.
    </p>

    <example xml:id="ex_derv_point1">
      <title>Finding derivatives and tangent lines</title>
      <statement>
        <p>
          Let <m>f(x) = 3x^2+5x-7</m>.
          Find:
          <ol cols="2" marker="(a)">
            <li>
              <p>
                <m>\fp(1)</m>
              </p>
            </li>
            <li>
              <p>
                The equation of the tangent line to the graph of <m>f</m> at <m>x=1</m>.
              </p>
            </li>
            <li>
              <p>
                <m>\fp(3)</m>
              </p>
            </li>
            <li>
              <p>
                The equation of the tangent line to the graph <m>f</m> at <m>x=3</m>.
              </p>
            </li>
          </ol>
        </p>
      </statement>
      <solution>
        <p>
          <ol marker="(a)">
            <li>
              <p>
                We compute this directly using <xref ref="def_derivative_at_a_point"/>.
                <md>
                  <mrow>\fp(1)\amp = \lim_{h\to 0} \frac{f(1+h)-f(1)}{h}</mrow>
                  <mrow>\amp = \lim_{h\to 0} \frac{3(1+h)^2+5(1+h)-7 - (3(1)^2+5(1)-7)}{h}</mrow>
                  <mrow>\amp = \lim_{h\to 0} \frac{3(1+2h+h^2)+5+5h-7 - 1}{h}</mrow>
                  <mrow>\amp = \lim_{h\to 0} \frac{3+6h+3h^2+5+5h-8}{h}</mrow>
                  <mrow>\amp = \lim_{h\to 0} \frac{3h^2+11h}{h}</mrow>
                  <mrow>\amp = \lim_{h\to 0} (3h+11)</mrow>
                  <mrow>\amp = 11</mrow>
                </md>.
              </p>
            </li>
            <li>
              <p>
                The tangent line at <m>x=1</m> has slope <m>\fp(1)</m> and goes through the point
                <m>(1,f(1)) = (1,1)</m>.
                Thus the tangent line has equation,
                in point-slope form, <m>y = 11(x-1) + 1</m>.
                In slope-intercept form we have <m>y = 11x-10</m>.
              </p>
            </li>
            <li>
              <p>
                Again, using the definition,
                <md>
                  <mrow>\fp(3)\amp = \lim_{h\to 0} \frac{f(3+h)-f(3)}{h}</mrow>
                  <mrow>\amp = \lim_{h\to 0} \frac{3(3+h)^2+5(3+h)-7 - (3(3)^2+5(3)-7)}{h}</mrow>
                  <mrow>\amp = \lim_{h\to 0} \frac{3(9+6h+h^2)+15+3h-7 - 35}{h}</mrow>
                  <mrow>\amp = \lim_{h\to 0} \frac{27+18h+3h^2+15+3h-42}{h}</mrow>
                  <mrow>\amp = \lim_{h\to 0} \frac{3h^2+23h}{h}</mrow>
                  <mrow>\amp = \lim_{h\to 0} 3h+23</mrow>
                  <mrow>\amp = 23</mrow>
                </md>.
              </p>
            </li>
            <li>
              <p>
                The tangent line at <m>x=3</m> has slope <m>23</m> and goes through the point
                <m>(3,f(3)) = (3,35)</m>.
                Thus the tangent line has equation <m>y=23(x-3)+35 = 23x-34</m>.
              </p>
            </li>
          </ol>
        </p>

        <p>
          A graph of <m>f</m> is given in <xref ref="fig_tangent1"/>
          along with the tangent lines at <m>x=1</m> and <m>x=3</m>.
        </p>

        <figure xml:id="fig_tangent1" vshift="3">
          <caption>A graph of <m>f(x) = 3x^2+5x-7</m> and its tangent lines at <m>x=1</m> and <m>x=3</m></caption>
          <!-- START figures/fig_tangent1.tex -->
          <image width="47%">
            <shortdescription>
              A graph of function 3x^2+5x-7 and its tangent line at x =1 and x=3.
            </shortdescription>
            <description>
              <p>
                The graph starts at origin <m>(0,0)</m> the <m>x</m> axis ends at <m>4</m>
                while the <m>y</m> axis ends at <m>60</m>.
                The curve starts in the third quadrant and moves into the first quadrant with an
                <m>x</m> intercept at <m>1</m>, the curve reaches point <m>(4,60)</m> and continues further.
                Two tangents are drawn on the curve at <m>x=1</m> and <m>x=3</m>.
              </p>
            </description>
            <latex-image label="img_tangent1">
              \begin{tikzpicture}
                \begin{axis}[
                    xmin=-1,
                    xmax=4.1,
                    ymin=-11,
                    ymax=66
                  ]
                  \addplot+[infinite,domain=-1:4]{3*x^2+5*x-7};
                  \addplot+[tangentline,domain=0:4] {11*(x-1)+1};
                  \addplot+[tangentline,domain=1.8:3.8] {23*(x-3)+35};
                  \addplot[&lt;-&gt;,soliddot] coordinates{(1,1) (3,35)};
                \end{axis}
              \end{tikzpicture}
            </latex-image>
          </image>
          <!-- figures/fig_tangent1.tex END -->
        </figure>
      </solution>
      <solution component="video" vshift="9">
        <title>Video solution</title>
        <video width="98%" youtube="4OMc0gJWcb0" label="vid_deriv_intro_ex_v1" component="video"/>
      </solution>
    </example>

    <p xml:id="vidint-diff-imp-cont" component="video">
      In <xref ref="def_derivative_at_a_point"/>, we assumed that the function is continuous,
      but this is actually not necessary.
      One can in fact prove that a function has to be continuous at any point where it is differentiable.
      Or, in other words, a function cannot be differentiable at a point of discontinuity.
      This is explained in the video in <xref ref="vid_deriv_intro_diff_imp_cont"/>.
    </p>

    <figure xml:id="vid_deriv_intro_diff_imp_cont" component="video" vshift="-2">
      <caption>Showing that every differentiable function is continuous</caption>
      <video youtube="Ev9hJVbDO1k" label="vid_deriv_intro_diff_imp_cont"/>
    </figure>

    <p>
      Another important line that can be created using information from the derivative is the
      <em>normal line</em>.
      It is perpendicular to the tangent line,
      hence its slope is the negative-reciprocal of the tangent line's slope.
    </p>

    <definition xml:id="def_normal_line">
      <title>Normal Line</title>
      <statement>
        <p>
          Let <m>f</m> be continuous on an open interval <m>I</m> and differentiable at <m>c</m>,
          for some <m>c</m> in <m>I</m>.
          The <term>normal line</term> to the graph of <m>f</m> at <m>c</m> is the line with equation
          <me>
            n(x) =\frac{-1}{\fp(c)}(x-c)+f(c)
          </me>,
          when <m>\fp(c)\neq 0</m>. (When <m>\fp(c)=0</m>,
          the normal line is the vertical line through <m>\left(c,f(c)\right)</m>;
          that is, <m>x=c</m>.)

                <idx><h>derivative</h><h>normal line</h></idx>
                <idx><h>normal line</h></idx>

        </p>
      </statement>
    </definition>

    <example xml:id="ex_normal1">
      <title>Finding equations of normal lines</title>
      <statement>
        <p>
          Let <m>f(x) = 3x^2+5x-7</m>, as in <xref ref="ex_derv_point1"/>.
          Find the equations of the normal lines to the graph of <m>f</m> at <m>x=1</m> and
          <m>x=3</m>.
        </p>
      </statement>
      <solution>
        <p>
          In <xref ref="ex_derv_point1"/>,
          we found that <m>\fp(1)=11</m>.
          Hence at <m>x=1</m>, the normal line will have slope <m>-1/11</m>.
          An equation for the normal line is
          <me>
            n(x) = \frac{-1}{11}(x-1)+1
          </me>.
        </p>

        <p>
          The normal line is plotted with <m>y=f(x)</m> in <xref ref="fig_normal1"/>.
          Note how the line looks perpendicular to <m>f</m>. (A key word here is
          <q>looks.</q> Mathematically,
          we say that the normal line <em>is</em>
          perpendicular to <m>f</m> at <m>x=1</m> as the slope of the normal line is the   negative-reciprocal of the slope of the tangent line.
          However, normal lines may not always
          <em>look</em> perpendicular.
        </p>

        <figure xml:id="fig_normal1" vshift="0">
          <caption>A graph of <m>f(x)=3x^2+5x-7</m>, along with its normal line at <m>x=1</m></caption>
          <!-- START figures/fig_normal1.tex -->
          <image>
            <shortdescription>
              A graph of function 3x^2+5x-7 along with its normal line at x=1.
            </shortdescription>
            <description>
              <p>
                The graph starts at the origin. The <m>x</m> axis ends at <m>4</m> in the diagram while the <m>y</m> axis ends at <m>3</m>.
                The function is a straight line  that rises steeply from points <m>(0.9,0)</m> to point <m>(1.1, 3.2)</m>.
                The normal is drawn on the line at point <m>(1,1)</m>.
              </p>
            </description>
            <latex-image label="img_normal1">
              \begin{tikzpicture}
                \begin{axis}[
                    ymin=-.1,
                    ymax=3.5,
                    xmin=-0.1,
                    xmax=4.3,
                    axis equal
                  ]
                  \addplot+[infinite,domain=0.9:1.2]{3*x^2+5*x-7};
                  \addplot[normalline,domain=0.1:2.5] {(-1/11)*(x-1)+1};
                  \addplot[soliddot] coordinates{(1,1)};
                \end{axis}
              \end{tikzpicture}
            </latex-image>
          </image>
          <!-- figures/fig_normal1.tex END -->
        </figure>

        <p>
          The aspect ratio of the picture of the graph plays a big role in this.
          When using graphing software,
          there is usually an option called <c>Zoom Square</c> that keeps the aspect ratio
          <m>1:1</m>
        </p>

        <p>
          We also found that <m>\fp(3) = 23</m>,
          so the normal line to the graph of <m>f</m> at <m>x=3</m> will have slope <m>-1/23</m>.
          An equation for the normal line is
          <me>
            n(x) = \frac{-1}{23}(x-3)+35
          </me>.
        </p>
      </solution>
    </example>

    <p>
      Linear functions are easy to work with;
      many functions that arise in the course of solving real problems are not easy to work with.
      A common practice in mathematical problem solving is to approximate difficult functions
      with not-so-difficult functions.
      Lines are a common choice.
      It turns out that at any given point on the graph of a differentiable function <m>f</m>,
      the best linear approximation to <m>f</m> is its tangent line.
      That is one reason we'll spend considerable time finding tangent lines to functions.
    </p>

    <p>
      One type of function that does not benefit from a tangent line approximation is a line;
      it is rather simple to recognize that the tangent line to a line is the line itself.
      We look at this in the following example.
    </p>

    <example xml:id="ex_der_line">
      <title>Finding the derivative of a linear function</title>
      <statement>
        <p>
          Consider <m>f(x) = 3x+5</m>.
          Find the equation of the tangent line to <m>f</m> at <m>x=1</m> and <m>x=7</m>.
        </p>
      </statement>
      <solution>
        <p>
          We find the slope of the tangent line by using <xref ref="def_derivative_at_a_point">
          Definition</xref>.
          <md>
            <mrow>\fp(1) \amp =    \lim_{h\to 0}\frac{f(1+h)-f(1)}{h}</mrow>
            <mrow>\amp =    \lim_{h\to 0} \frac{3(1+h)+5 - (3+5)}{h}</mrow>
            <mrow>\amp =    \lim_{h\to 0} \frac{3h}{h}</mrow>
            <mrow>\amp =    \lim_{h\to 0} 3</mrow>
            <mrow>\amp = 3</mrow>
          </md>.
        </p>

        <p>
          We just found that <m>\fp(1) = 3</m>.
          That is, we found the <term>instantaneous rate of change</term>
          of <m>f(x) = 3x+5</m> is <m>3</m>.
          This is not surprising; lines are characterized by being the
          <em>only</em> functions with a
          <em>constant rate of change.</em>
          That rate of change is called the
          <term>slope</term> of the line.
          Since their rates of change are constant,
          their <em>instantaneous</em> rates of change are always the same;
          they are all the slope.
        </p>

        <p>
          So given a line <m>f(x) = ax+b</m>,
          the derivative at any point <m>x</m> will be <m>a</m>;
          that is, <m>\fp(x) = a</m>.
        </p>

        <p>
          It is now easy to see that the tangent line to the graph of <m>f</m> at <m>x=1</m>
          is just <m>f</m>,
          with the same being true at <m>x=7</m>.
        </p>
      </solution>
    </example>

    <p>
      We often desire to find the tangent line to the graph of a function without knowing
      the actual derivative of the function.
      While we will eventually be able to find derivatives of many common functions,
      the algebra and limit calculations on some functions are complex.
      Until we develop further techniques,
      the best we may be able to do is approximate the tangent line.
      We demonstrate this in the next example.
    </p>

    <example xml:id="ex_der_num_approx">
      <title>Numerical approximation of the tangent line</title>
      <statement>
        <p>
          Approximate the equation of the tangent line to the graph of <m>f(x)=\sin(x)</m> at <m>x=0</m>.
        </p>
      </statement>
      <solution>
        <p>
          In order to find the equation of the tangent line,
          we need a slope and a point.
          The point is given to us: <m>(0,\sin(0)) = (0,0)</m>.
          To compute the slope, we need the derivative.
          This is where we will make an approximation.
          Recall that
          <me>
            \fp(0) \approx \frac{\sin(0+h)- \sin(0) }{h}
          </me>
          for a small value of <m>h</m>.
          We choose (somewhat arbitrarily) to let <m>h=0.1</m>.
          Thus
          <me>
            \fp(0) \approx \frac{\sin(0.1)-\sin(0) }{0.1} \approx 0.9983
          </me>.
        </p>

        <p>
          Thus our approximation of the equation of the tangent line is
          <m>y = 0.9983(x-0) +0 = 0.9983x</m>;
          it is graphed in <xref ref="fig_tangentsinx"/>.
          The graph seems to imply the approximation is rather good.
        </p>

        <figure xml:id="fig_tangentsinx" vshift="2">
          <caption><m>f(x) = \sin(x)</m> graphed with an approximation to its tangent line at <m>x=0</m></caption>
          <!-- START figures/fig_tangentsinx.tex -->
          <image>
            <shortdescription>
              A graph of function sin(x) with an approximation to its tangent line at x=0.
            </shortdescription>
            <description>
              <p>
                The <m>y</m> axis of the graph is drawn from <m>-1</m> to <m>1</m>
                and the <m>x</m> axis is drawn from <m>-\pi</m> and <m>\pi</m>.
                The sine graph has an <m>x</m> intercept at <m>-\pi</m> then enters the
                third quadrant and forms an upward facing parabola
                with its vertex at  point <m>(-\pi/2, -1)</m>.
                It passes throgh the origin then enters the first quadrant forming a downward
                facing parabola with vertex at <m>(\pi/2, 1)</m>.
              </p>
            </description>
            <latex-image label="img_tangentsinx">
              \begin{tikzpicture}
                \begin{axis}[
                    ymin=-1.1,
                    ymax=1.1,
                    xmin=-3.5,
                    xmax=3.5,
                    xtick={-3.14,-1.57,1.57,3.14},
                    xticklabels={$-\pi$,$-\frac{\pi}2$,$\frac{\pi}2$,$\pi$}
                  ]
                  \addplot+[infinite,domain=-3.5:3.5,samples=101]{sin(deg(x))};
                  \addplot+[tangentline,domain=-1:1] {sin(deg(1))*x};
                  \addplot [soliddot] coordinates{(0,0)};
                \end{axis}
              \end{tikzpicture}
            </latex-image>
          </image>
          <!-- figures/fig_tangentsinx.tex END -->
        </figure>
      </solution>
    </example>

    <p>
      Recall from <xref ref="sec_limit_analytically"/>
      that <m>\lim_{x\to 0}\frac{\sin(x)}x =1</m>,
      meaning for values of <m>x</m> near <m>0</m>, <m>\sin(x) \approx x</m>.
      Since the slope of the line <m>y=x</m> is <m>1</m> at <m>x=0</m>,
      it should seem reasonable that <q>the slope of <m>f(x)=\sin(x)</m></q>
      is near <m>1</m> at <m>x=0</m>.
      In fact, since we <em>approximated</em>
      the value of the slope to be <m>0.9983</m>,
      we might guess the <em>actual value</em> is 1.
      We'll come back to this later.
    </p>

    <p>
      Consider again <xref ref="ex_derv_point1"/>.
      To find the derivative of <m>f</m> at <m>x=1</m>,
      we needed to evaluate a limit.
      To find the derivative of <m>f</m> at <m>x=3</m>,
      we needed to again evaluate a limit.
      We have this process:

      <!-- TODO: original ptx conversion has a tikz image here. Is this a better replacement? -->
      <me>
        \begin{array}{c}\text{input specific}\\\text{number }c\end{array}\longrightarrow
        \begin{array}{|c|}\hline\text{do something}\\\text{to }f\text{ and }c\\\hline\end{array}
        \longrightarrow\begin{array}{c}\text{return}\\\text{number }f'(c)\end{array}
      </me>
    </p>

    <p>
      This process describes a <term>function</term>;
      given one input
      (the value of <m>c</m>),
      we return exactly one output (the value of <m>\fp(c)</m>).
      The <q>do something</q> box is where the tedious work
      (taking limits)
      of this function occurs.
    </p>

    <p>
      Instead of applying this function repeatedly for different values of <m>c</m>,
      let us apply it just once to the variable <m>x</m>.
      We then take a limit just once.
      The process now looks like:

      <!-- TODO: original ptx conversion has a tikz image here. Is this a better replacement? -->
      <me>
        \begin{array}{c}\text{input}\\\text{variable }x\end{array}\longrightarrow
        \begin{array}{|c|}\hline\text{do something}\\\text{to }f\text{ and }x\\\hline\end{array}
        \longrightarrow\begin{array}{c}\text{return}\\\text{function }f'(x)\end{array}
      </me>
    </p>

    <p>
      The output is the <term>derivative function</term>, <m>\fp(x)</m>.
      The <m>\fp(x)</m> function will take a number <m>c</m> as input and return the
      derivative of <m>f</m> at <m>c</m>.
      This calls for a definition.
    </p>

    <definition xml:id="def_the_derivative">
      <title>Derivative Function</title>
      <statement>
        <p>
          Let <m>f</m> be a differentiable function on an open interval <m>I</m>.
          The function
          <me>
            \fp(x) = \lim_{h\to 0} \frac{f(x+h)-f(x)}{h}
          </me>
          is the <term>derivative</term> of <m>f</m>.

                <idx><h>derivative</h><h>as a function</h></idx>
                <idx><h>derivative</h><h>notation</h></idx>

        </p>

        <p>
          Let <m>y = f(x)</m>.
          The following notations all represent the derivative of <m>f</m>:
          <me>
            \fp(x)\ =\ y'\ =\ \frac{dy}{dx}\ =\ \frac{df}{dx}\ =\ \frac{d}{dx}(f)\ =\
            \frac{d}{dx}(y)
          </me>.
        </p>
      </statement>
    </definition>

    <figure xml:id="vid_deriv_intro_deriv_func" component="video" vshift="4">
      <caption>Video presentation of <xref ref="def_the_derivative"/></caption>
      <video youtube="yPzNYlzA0Js" label="vid_deriv_intro_deriv_func"/>
    </figure>




    <p>
      <alert>Important:</alert> The notation <m>\frac{dy}{dx}</m> is one symbol;
      it is <em>not</em> the fraction <q><m>dy/dx</m></q>.
      The notation,
      while somewhat confusing at first, was chosen with care.
      A fraction-looking symbol was chosen because the derivative has many fraction-like properties.
      Among other places,
      we see these properties at work when we talk about the units of the derivative,
      when we discuss the Chain Rule,
      and when we learn about integration
      (topics that appear in later sections and chapters).
    </p>

    <figure xml:id="vid_deriv_intro_notation" component="video" vshift="0">
      <caption>Explaining derivative notation</caption>
      <video youtube="TJhJiA_w4mQ" label="vid_deriv_intro_notation"/>
    </figure>


    <p>
      Examples will help us understand this definition.
    </p>

    <example xml:id="ex_deriv1">
      <title>Finding the derivative of a function</title>
      <statement>
        <p>
          Let <m>f(x) = 3x^2+5x-7</m> as in <xref ref="ex_derv_point1"/>.
          Find <m>\fp(x)</m>.
        </p>
      </statement>
      <solution>
        <p>
          We apply <xref ref="def_the_derivative"/>.
          <md>
            <mrow>\fp(x) \amp = \lim_{h\to 0} \frac{f(x+h)-f(x)}{h}</mrow>
            <mrow>\amp = \lim_{h\to 0} \frac{3(x+h)^2+5(x+h)-7-(3x^2+5x-7)}{h}</mrow>
            <mrow>\amp = \lim_{h\to 0} \frac{3h^2 +6xh+5h}{h}</mrow>
            <mrow>\amp = \lim_{h\to 0} (3h+6x+5)</mrow>
            <mrow>\amp = 6x+5</mrow>
          </md>
        </p>

        <p>
          So <m>\fp(x) = 6x+5</m>.
          Recall earlier we found that
          <m>\fp(1) = 11</m> and <m>\fp(3) = 23</m>.
          Note our new computation of <m>\fp(x)</m> affirms these facts.
        </p>
      </solution>
    </example>

    <example xml:id="ex_deriv2">
      <title>Finding the derivative of a function</title>
      <statement>
        <p>
          Let <m>f(x) = \frac{1}{x+1}</m>.
          Find <m>\fp(x)</m>.
        </p>
      </statement>
      <solution>
        <p>
          We apply <xref ref="def_the_derivative"/>.
          <md>
            <mrow>\fp(x)     \amp = \lim_{h\to 0} \frac{f(x+h)-f(x)}{h}</mrow>
            <mrow>\amp =    \lim_{h\to 0} \frac{\frac{1}{x+h+1}-\frac{1}{x+1}}{h}</mrow>
            <intertext>Now find common denominator then subtract; pull <m>1/h</m> out front to   facilitate reading.</intertext>
            <mrow>\amp = \lim_{h\to 0} \frac{1}{h}\cdot\left(\frac{x+1}{(x+1)(x+h+1)} -
            \frac{x+h+1}{(x+1)(x+h+1)}\right)</mrow>
            <intertext>Now simplify algebraically.</intertext>
            <mrow>\amp = \lim_{h\to 0} \frac 1h\cdot\left(\frac{x+1-(x+h+1)}{(x+1)(x+h+1)}\right)  </mrow>
            <mrow>\amp = \lim_{h\to 0} \frac1h\cdot\left(\frac{-h}{(x+1)(x+h+1)}\right)</mrow>
            <intertext>Finally, apply the limit.</intertext>
            <mrow>\amp = \lim_{h\to 0} \frac{-1}{(x+1)(x+h+1)}</mrow>
            <mrow>\amp = \frac{-1}{(x+1)(x+1)}</mrow>
            <mrow>\amp = \frac{-1}{(x+1)^2}</mrow>
          </md>.
        </p>

        <p>
          So <m>\fp(x) = \frac{-1}{(x+1)^2}</m>.
          To practice using our notation, we could also state
          <me>
            \frac{d}{dx}\left(\frac{1}{x+1}\right) = \frac{-1}{(x+1)^2}
          </me>.
        </p>
      </solution>
      <solution component="video" vshift="3">
        <title>Video solution</title>
        <video width="98%" youtube="JKHbXYanjDs" label="vid_deriv_intro_ex_1" component="video"/>
      </solution>
    </example>

    <example xml:id="ex_deriv_sinx">
      <title>Finding the derivative of a function</title>
      <statement>
        <p>
          Find the derivative of <m>f(x) = \sin(x)</m>.
        </p>
      </statement>
      <solution>
        <p>
          Before applying <xref ref="def_the_derivative"/>,
          note that once this is found,
          we can find the actual tangent line to <m>f(x) = \sin(x)</m> at <m>x=0</m>,
          whereas we settled for an approximation in <xref ref="ex_der_num_approx"/>.
          <md>
            <mrow>\fp(x) \amp = \lim_{h\to 0} \frac{\sin(x+h)-\sin(x)}{h} \amp  \amp
            \text{Derivative definition}</mrow>
            <mrow>\amp = \lim_{h\to 0} \frac{\sin(x)\cos(h)+\cos(x)\sin(h)-\sin(x)}{h} \amp \amp
            \text{Angle addition identity}</mrow>
            <mrow>\amp = \lim_{h\to 0} \frac{\sin(x)(\cos(h)-1) + \cos(x)\sin(h)}{h} \amp  \amp
            \text{Regrouped and factored}</mrow>
            <mrow>\amp = \lim_{h\to 0} \left(\frac{\sin(x)(\cos(h)-1)}{h} + \frac{\cos(x)\sin(h)}{h}
            \right) \amp  \amp  \text{Split into two fractions}</mrow>
              <mrow>\amp = \lim_{h\to 0} \sin(x) \cdot \lim_{h\to 0}\frac{\cos(h)-1}{h}</mrow>
            <mrow>\amp\quad{}+\lim_{h\to 0}\cos(x)\cdot  \lim_{h\to 0}\frac{\sin(h)}{h} \amp  \amp
            \text{Product/sum limit rules}</mrow>
            <mrow>\amp = \sin(x)\cdot 0 + \cos(x) \cdot 1 \amp \amp  \text{Applied }
            <xref ref="thm_special_limits"/></mrow>
            <mrow>\amp = \cos(x). \amp \amp \text{(Are you surprised?)}</mrow>
          </md>
        </p>

        <p>
          We have found that when <m>f(x) = \sin(x)</m>, <m>\fp(x) = \cos(x)</m>.
          This should be somewhat amazing;
          the result of a tedious limit process on the sine function is a nice function.
          Then again, perhaps this is not entirely surprising.
          The sine function is periodic <mdash/> it repeats itself on regular intervals.
          Therefore its rate of change also repeats itself on the same regular intervals.
          We should have known the derivative would be periodic;
          we now know exactly which periodic function it is.
        </p>

        <p>
          Thinking back to <xref ref="ex_der_num_approx"/>,
          we can find the slope of the tangent line to
          <m>f(x)=\sin(x)</m> at <m>x=0</m> using our derivative.
          We approximated the slope as <m>0.9983</m>;
          we now know the slope is <em>exactly</em> <m>\cos(0) =1</m>.
        </p>

        <p xml:id="vidint_deriv_intro_deriv_cos" component="video">
          Using similar techniques, we can show that the derivative of <m>\cos(x)</m>
          is <m>-\sin(x)</m>. See if you can show this yourself; if you get stuck,
          you can check out the video in <xref ref="vid_deriv_intro_deriv_cos"/>.
        </p>

        <figure xml:id="vid_deriv_intro_deriv_cos" component="video" vshift="-1">
          <caption>Finding the derivative of <m>\cos(x)</m></caption>
          <video youtube="-1lOFzhDJAo" label="vid_deriv_intro_deriv_cos"/>
        </figure>

      </solution>
      <solution component="video" vshift="6">
        <title>Video solution</title>
        <video width="98%" youtube="vsnDopbWHXQ" label="vid_deriv_intro_deriv_sin" component="video"/>
      </solution>
    </example>

    <example xml:id="ex_not_diff">
      <title>Finding the derivative of a piecewise defined function</title>
      <statement>
        <p>
          Find the derivative of the absolute value function,
          <me>
            f(x) = \abs{x} = \begin{cases} -x \amp  x\lt 0 \\ x \amp  x\geq 0\end{cases}
          </me>.
        </p>

        <p>
          See <xref ref="fig_absolutevalue"/>.
        </p>

        <figure xml:id="fig_absolutevalue" vshift="-3">
          <caption>The absolute value function <m>f(x) = \abs{x}</m>. Notice how the slope of
          the lines (and hence the tangent lines) abruptly changes at <m>x=0</m>.</caption>
          <!-- START figures/fig_absolutevalue.tex -->
          <image width="47%">
            <shortdescription>
              The graph of function of absolute value of x, the function forms a v shape with it's vertex at origin.
            </shortdescription>
            <description>
              <p>
                The <m>y</m> axis of the graph is drawn from <m>-0.2</m> to <m>1</m>
                and the <m>x</m> axis from <m>-1</m> to <m>1</m>.
                The function is a straight line, in the second quadrant it appears to pass through point
                <m>(-1,1)</m> and decreases until it meets the origin.
                From the origin, it steeply increases after it enters the first quadrant
                and appears to pass through point <m>(1,1)</m>.
              </p>
            </description>
            <latex-image label="img_absolutevalue">
              \begin{tikzpicture}
                \begin{axis}[
                    ymin=-.2,
                    ymax=1.1,
                    xmin=-1.1,
                    xmax=1.1,
                  ]
                  \addplot+[infinite,domain=-1:1]{abs(x)};
                \end{axis}
              \end{tikzpicture}
            </latex-image>
          </image>
          <!-- figures/fig_absolutevalue.tex END -->
        </figure>
      </statement>
      <solution>
        <p>
          We need to evaluate <m>\lim_{h\to0}\frac{f(x+h)-f(x)}{h}</m>.
          As <m>f</m> is piecewise-defined,
          we need to consider separately the limits when <m>x\lt 0</m> and when <m>x \gt 0</m>.
        </p>

        <p>
          When <m>x\lt 0</m>:
          <md>
            <mrow>\frac{d}{dx}(-x) \amp = \lim_{h\to 0}\frac{-(x+h) - (-x)}{h}</mrow>
            <mrow>\amp = \lim_{h\to 0}\frac{-h}{h}</mrow>
            <mrow>\amp = \lim_{h\to 0}-1</mrow>
            <mrow>\amp = -1</mrow>
          </md>.
        </p>

        <p>
          When <m>x \gt 0</m>,
          a similar computation shows that <m>\frac{d}{dx}(x) = 1</m>.
        </p>

        <p>
          We need to also find the derivative at <m>x=0</m>.
          By the definition of the derivative at a point, we have
          <me>
            \fp(0) = \lim_{h\to0}\frac{f(0+h)-f(0)}{h}
          </me>.
        </p>

        <p>
          Since <m>x=0</m> is the point where our function's definition switches from
          one piece to the other, we need to consider left and right-hand limits.
          Consider the following,
          where we compute the left and right hand limits side by side.
        </p>

        <sidebyside>
          <p>
            <md>
              <mrow>\amp\lim_{h\to0^-}\frac{f(0+h)-f(0)}{h}</mrow>
              <mrow>\amp= \lim_{h\to0^-}\frac{-h-0}{h}</mrow>
              <mrow>\amp=\lim_{h\to0^-}-1</mrow>
              <mrow>\amp  =-1</mrow>
            </md>
          </p>

          <p>
            <md>
              <mrow>\amp \lim_{h\to0^+}\frac{f(0+h)-f(0)}{h}</mrow>
              <mrow>\amp =\lim_{h\to0^+}\frac{h-0}{h}</mrow>
              <mrow>\amp =\lim_{h\to0^+}1</mrow>
              <mrow>\amp  =1</mrow>
            </md>
          </p>
        </sidebyside>

        <p>
          The last lines of each column tell the story:
          the left and right hand limits are not equal.
          Therefore the limit does not exist at <m>0</m>,
          and <m>f</m> is not differentiable at <m>0</m>.
          So we have
          <me>
            \fp(x) = \begin{cases} -1 \amp  x\lt 0 \\ 1 \amp  x  \gt  0\end{cases}
          </me>.
        </p>

        <p>
          At <m>x=0</m>, <m>\fp(x)</m> does not exist;
          there is a jump discontinuity at <m>0</m>;
          see <xref ref="fig_absolutevalueprime"/>.
          So <m>f(x) = \abs{x}</m> is differentiable everywhere except at <m>0</m>.
        </p>

        <figure xml:id="fig_absolutevalueprime" vshift="2">
          <caption>A graph of the derivative of <m>f(x) = \abs{x}</m></caption>
          <!-- START figures/fig_absolutevalueprime.tex -->
          <image width="47%">
            <shortdescription>
              The graph of derivative of function of absolute value of x.
            </shortdescription>
            <description>
              <p>
                The <m>y</m> axis and the <m>x</m> axis are drawn from <m>-1</m> to <m>1</m>.
                In the first quadrant the derivative of the function starts from the open point <m>(0,1)</m>
                  and continues as a function <m>y=1</m> that moves towards right parallel to the <m>x</m> axis at
                  <m>y=1</m> for all values of <m>x</m>, but value for <m>x=0</m> does not exist.
                In the third quadrant the derivative of the function starts from the open point <m>(0,-1)</m>
                and continues as a function <m>y=-1</m> that moves towards left parallel to the <m>x</m> axis at
                <m>y=-1</m> for all values of <m>x</m>, but value for <m>x=0</m> does not exist.
              </p>
            </description>
            <latex-image label="img_absolutevalueprime">
              \begin{tikzpicture}
                \begin{axis}[
                    ymin=-1.4,
                    ymax=1.4,
                    xmin=-1.1,
                    xmax=1.1
                  ]
                  \addplot [firstcurvestyle,leftarrow,domain=-1:0]{-1};
                  \addplot [firstcurvestyle,rightarrow,domain=0:1]{1};
                  \addplot[hollowdot] coordinates{(0,-1) (0,1)};
                \end{axis}
              \end{tikzpicture}
            </latex-image>
          </image>
          <!-- figures/fig_absolutevalueprime.tex END -->
        </figure>
      </solution>
    </example>

    <p>
      The point of non-differentiability came where the piecewise defined function
      switched from one piece to the other.
      Our next example shows that this does not always cause trouble.
    </p>

    <example xml:id="ex_diff_piecewise">
      <title>Finding the derivative of a piecewise defined function</title>
      <statement>
        <p>
          Find the derivative of <m>f(x)</m>,
          where
          <me>
            f(x) = \begin{cases}\sin(x) \amp x\leq \pi/2 \\ 1 \amp x \gt \pi/2\end{cases}
          </me>.
          See <xref ref="fig_piecewisesinx1"/>.
        </p>

        <figure xml:id="fig_piecewisesinx1" vshift="0">
          <caption>A graph of <m>f(x)</m> as defined in <xref ref="ex_diff_piecewise"/></caption>
          <!-- START figures/fig_piecewisesinx1.tex -->
          <image width="47%">
            <shortdescription>
              Graph of function sin(x) until pi/2 and then y = 1.
            </shortdescription>
            <description>
              <p>
                The <m>y</m> axis is from <m>0</m> to <m>1.5</m> and the <m>x</m> axis from <m>0</m>
                to <m>\pi/2</m> the curve starts at <m>0</m> and increases until point <m>(\pi/2,1)</m>
                and then moves horizontal to the <m>x</m> axis at <m>y=1</m>.
              </p>
            </description>
            <latex-image label="img_piecewisesinx1">
              \begin{tikzpicture}[declare function = {func(\x) = (\x &lt; 1.5708) * (sin(x*180/pi)) + (\x &gt;= 1.5708) * (1);}]
                \begin{axis}[
                    ymin=-.4,
                    ymax=1.4,
                    xmin=-.1,
                    xmax=2.1,
                    xtick={1.57},
                    xticklabels={$\frac{\pi}2$}
                  ]
                  \addplot+[infinite,domain=-.1:2,samples=101]{func(x)};
                \end{axis}
              \end{tikzpicture}
            </latex-image>
          </image>
          <!-- figures/fig_piecewisesinx1.tex END -->
        </figure>
      </statement>
      <solution>
        <p>
          Using <xref ref="ex_deriv_sinx"/>,
          we know that when <m>x\lt \pi/2</m>, <m>\fp(x) = \cos(x)</m>.
          It is easy to verify that when <m>x \gt \pi/2</m>,
          <m>\fp(x) = 0</m>; consider:
          <me>
            \lim_{h\to0}\frac{f(x+h) - f(x)}{h} = \lim_{h\to0}\frac{1-1}{h} = \lim_{h\to0}0 =0
          </me>.
        </p>

        <p>
          So far we have
          <me>
            \fp(x) = \begin{cases}\cos(x) \amp  x\lt \pi/2\\ 0 \amp  x\gt\pi/2\end{cases}
          </me>.
        </p>

        <p>
          We still need to find <m>\fp(\pi/2)</m>.
          Notice at <m>x=\pi/2</m> that both pieces of <m>\fp</m> are <m>0</m>,
          meaning we can state that <m>\fp(\pi/2)=0</m>.
        </p>

        <p>
          Being more rigorous,
          we can again evaluate the difference quotient limit at <m>x=\pi/2</m>,
          utilizing again left- and right-hand limits.
          We will begin with the left-hand limit:
        </p>

        <p>
          <md>
            <mrow>\amp \lim_{h\to0^-}\frac{f(\pi/2+h)-f(\pi/2)}{h}</mrow>
            <mrow>\amp =\lim_{h\to0^-}\frac{\sin(\pi/2+h)-\sin(\pi/2)}{h}</mrow>
            <mrow>\amp =\lim_{h\to0^-}{ \frac{\sin(\frac{\pi}{2})\cos(h)+\sin(h)\cos(\frac{\pi}{2})-\sin(\frac{\pi}{2})}{h}}</mrow>
            <mrow>\amp =\lim_{h\to0^-}\frac{1\cdot\cos(h)+\sin(h)\cdot 0-1}{h}</mrow>
            <mrow>\amp =\lim_{h\to0^-}\frac{\cos(h)-1}{h} \cdot \lim_{h\to0^-}\frac{\sin(h)}{h}
            </mrow>
            <mrow>\amp=1\cdot 0</mrow>
            <mrow>\amp =0</mrow>
          </md>.
          Notice we used <xref ref="thm_lim_continuous" text="title"/> to finally evaluate the   limit.
        </p>

        <p>
          Now we will find the right-hand limit:
          <md>
            <mrow>\amp \lim_{h\to0^+}\frac{f(\pi/2+h)-f(\pi/2)}{h}</mrow>
            <mrow>\amp =\lim_{h\to0^+}\frac{1-1}{h}</mrow>
            <mrow>\amp =\lim_{h\to0^+}\frac{0}{h}</mrow>
            <mrow>\amp =0</mrow>
          </md>.
        </p>

        <p>
          Since both the left and right hand limits are <m>0</m> at <m>x=\pi/2</m>,
          the limit exists and <m>\fp(\pi/2)</m> exists
          (and is <m>0</m>).
          Therefore we can fully write <m>\fp</m> as
          <me>
            \fp(x) = \begin{cases}\cos(x) \amp  x\leq\pi/2\\ 0 \amp  x  \gt  \pi/2\end{cases}
          </me>.
        </p>

        <p>
          See <xref ref="fig_piecewisecosx1"/>
          for a graph of this derivative function.
        </p>

        <figure xml:id="fig_piecewisecosx1" vshift="5">
          <caption>A graph of <m>\fp(x)</m> in <xref ref="ex_diff_piecewise"/>.
          </caption>
          <!-- START figures/fig_piecewisecosx1.tex -->
          <image width="47%">
            <shortdescription>
              Graph of derivative of function for this example.
            </shortdescription>
            <description>
              <p>
                Graph of the derivative function, the derivative exists at <m>\pi/2</m>
                and follows a curve of <m>\cos(x)</m> for <m>x\leq\pi/2</m> and <m>0</m> after <m>x=\pi</m>.
                There is a sharp bend at <m>\pi/2</m>, hence it is not differentiable at that point,
                since for <m>x=\pi</m> there exists <m>f(x)=0</m> function is continuous.
              </p>
            </description>
            <latex-image label="img_piecewisecosx1">
              \begin{tikzpicture}[declare function = {func(\x) = (\x &lt; 1.5708) * (cos(x*180/pi)) + (\x &gt;= 1.5708) * (0);}]
                \begin{axis}[
                    ymin=-.4,
                    ymax=1.4,
                    xmin=-.1,
                    xmax=2.1,
                    xtick={1.57},
                    xticklabels={$\frac{\pi}2$},
                  ]
                  \addplot+[infinite,domain=-.1:2,samples=101]{func(x)};
                \end{axis}
              \end{tikzpicture}
            </latex-image>
          </image>
          <!-- figures/fig_piecewisecosx1.tex END -->
        </figure>
      </solution>
    </example>

    <p xml:id="vidint_deriv_intro_ex_2" component="video">
      For one more example involving piecewise-defined functions,
      we turn to the video in <xref ref="vid_deriv_intro_ex_2"/>.
    </p>

    <figure xml:id="vid_deriv_intro_ex_2" component="video" vshift="0">
      <caption>Determining when a piecewise-defined function is differentiable</caption>
      <video youtube="q1ZAqRsgVPk" label="vid_deriv_intro_ex_2"/>
    </figure>

    <p>
      Recall we pseudo-defined a continuous function as one in which we could sketch its graph   without lifting our pencil.
      We can give a pseudo-definition for differentiability as well:
      it is a continuous function that does not have any <q>sharp corners</q>
      or a vertical tangent line.
      One such sharp corner is shown in <xref ref="fig_absolutevalue"/>.
      Even though the function <m>f</m> in <xref ref="ex_diff_piecewise"/> is   piecewise-defined,
      the transition is <q>smooth</q>
      hence it is differentiable.
      Note how in the graph of <m>f</m> in <xref ref="fig_piecewisesinx1"/>
      it is difficult to tell when <m>f</m> switches from one piece to the other;
      there is no <q>corner.</q>
    </p>
  </subsection>

  <subsection>
    <title>Differentiability on Closed Intervals</title>
    <p>
      When we defined the derivative at a point in <xref ref="def_derivative_at_a_point"/>,
      we specified that the interval <m>I</m> over which a function <m>f</m> was defined needed to be an open interval.
      Open intervals are required so that we can take a limit at any point <m>c</m> in <m>I</m>,
      meaning we want to approach <m>c</m> from both the left and right.
    </p>

    <p>
      <idx><h>differentiable</h><h>on a closed interval</h></idx>
    </p>

    <p>
      Recall we also required open intervals in <xref ref="def_continuous"/>
      when we defined what it meant for a function to be continuous.
      Later, we used one-sided limits to extend continuity to closed intervals.
      We now extend differentiability to closed intervals by again considering one-sided limits.
    </p>

    <p>
      Our motivation is three-fold.
      First, we consider <q>common sense.</q>
      In <xref ref="ex_deriv1"/>
      we found that when <m>f(x) = 3x^2+5x-7</m>, <m>\fp(x) = 6x+5</m>,
      and this derivative is defined for all real numbers,
      hence <m>f</m> is differentiable everywhere.
      It seems appropriate to also conclude that <m>f</m> is differentiable on closed intervals,
      like <m>[0,1]</m>, as well.
      After all, <m>\fp(x)</m> is defined at both <m>x=0</m> and <m>x=1</m>.
    </p>

    <p>
      Secondly, consider <m>f(x) = \sqrt{x}</m>.
      The domain of <m>f</m> is <m>[0,\infty)</m>.
      Is <m>f</m> differentiable on its domain <mdash/> specifically,
      is <m>f</m> differentiable at <m>0</m>? (We'll consider this in the next example.)
    </p>

    <p>
      Finally, in later sections,
      having the derivative defined on closed intervals will prove useful.
      One such place is <xref ref="sec_arc_length"/>
      where the derivative plays a role in measuring the length of a curve.
    </p>

    <p>
      After a formal definition of differentiability on a closed interval,
      we explore the concept in an example.
    </p>

    <definition xml:id="def_diff_closed">
      <title>Differentiability on a Closed Interval</title>
      <statement>
        <p>
          Let <m>f</m> be continuous on <m>[a,b]</m> and differentiable on <m>(a,b)</m>.
          If the one-sided limits
          <md>
            <mrow>\lim_{h\to0^+}\frac{f(a+h)-f(a)}{h} \amp \amp \amp \lim_{h\to0^-}\frac{f(b+h)-f(b)}{h}</mrow>
          </md>
          exist, then we say <m>f</m> is differentiable on <m>[a,b]</m>.
        </p>
      </statement>
    </definition>

    <p>
      For all the functions <m>f</m> <em>in this text</em>,
      we can determine differentiability on <m>[a,b]</m> by considering the limits
      <m>\lim_{x\to a^+}\fp(x)</m> and <m>\lim_{x\to b^-}\fp(x)</m>.
      This is often easier to evaluate than the limit of the difference quotient.
    </p>

    <example xml:id="ex_diff_closed1">
      <title>Differentiability at an endpoint</title>
      <statement>
        <p>
          Consider <m>f(x) = \sqrt{x}=x^{1/2}</m> and <m>g(x) = \sqrt{x^3}=x^{3/2}</m>.
          The domain of each function is <m>[0,\infty)</m>.
          It can be shown that each is differentiable on <m>(0,\infty)</m>;
          determine the differentiability of each at <m>x=0</m>.
        </p>
      </statement>
      <solution>
        <p>
          We start by considering <m>f</m> and take the right-hand limit of the difference quotient:
          <md>
            <mrow>\lim_{h\to0^+}\frac{f(a+h)-f(a)}{h} \amp = \lim_{h\to0^+}\frac{\sqrt{0+h}-\sqrt{0}}h</mrow>
            <mrow>\amp = \lim_{h\to0^+}\frac{\sqrt{h}}h</mrow>
            <mrow>\amp = \lim_{h\to0^+}\frac{1}{h^{1/2}}\ =\ \infty</mrow>
          </md>.
        </p>

        <p>
          The one-sided limit of the difference quotient does not exist at <m>x=0</m> for <m>f</m>;
          therefore <m>f</m> is differentiable on
          <m>(0,\infty)</m> and not differentiable on <m>[0,\infty)</m>.
        </p>

        <p>
          We state (without proof) that <m>\fp(x) = 1/\big(2\sqrt{x}\big)</m>.
          Note that <m>\lim_{x\to 0^+}\fp(x) = \infty</m>;
          this limit was easier to evaluate than the limit of the difference quotient,
          though it required us to already know the derivative of <m>f</m>.
        </p>
        <!-- TODO: Consider adding an aside: existence of a derivative doesn't guarantee its continuity. So maybe the difference quotient is a good idea even if we know the derivative? -->
        <p>
          Now consider <m>g</m>:
          <md>
            <mrow>\lim_{h\to0^+}\frac{g(a+h)-g(a)}{h} \amp = \lim_{h\to0^+}\frac{\sqrt{(0+h)^3}-\sqrt{0}}h</mrow>
            <mrow>\amp = \lim_{h\to0^+}\frac{h^{3/2}}h</mrow>
            <mrow>\amp = \lim_{h\to0^+}h^{1/2}\ =\ 0</mrow>
          </md>.
        </p>

        <p>
          As the one-sided limit exists at <m>x=0</m>,
          we conclude <m>g</m> is differentiable on its domain of <m>[0,\infty)</m>.
        </p>

        <figure xml:id="fig_diff_closed1" vshift="0">
          <caption>A graph of <m>y=x^{1/2}</m> and <m>y=x^{3/2}</m> in <xref ref="ex_diff_closed1"/></caption>
          <image width="47%">
            <shortdescription>
              Two curves, one of function of square root of x and the other of x to the power 3/2.
            </shortdescription>
            <description>
              <p>
                The graph has two curves that form a leaf shape.
                The <m>y</m> axis is drawn from <m>0</m> to <m>1</m> and the <m>x</m> axis is
                drawn from <m>-0.2</m> to <m>1.2</m>.
                The curve on top is of function <m>x^(1/2)</m> and its a downward facing curve.
                The one below is of function <m>x^(3/2)</m> and it is an upward facing curve.
                The two graphs intersect at points <m>(0,0)</m> and <m>(1,1)</m>.
              </p>
            </description>
            <latex-image label="img_diff_closed1">
              \begin{tikzpicture}
                \begin{axis}[
                    ymin=-.2,
                    ymax=1.2,
                    xmin=-.1,
                    xmax=1.1,
                    axis equal
                  ]
                  \addplot+[domain=0:1]({\x^2},{\x^3});
                  \addplot+[solid,domain=0:1]({\x^2},{\x});
                  \draw (axis cs:.25,.7) node {$y=x^{1/2}$};
                  \draw (axis cs:.7,.35) node {$y=x^{3/2}$};
                \end{axis}
              \end{tikzpicture}
            </latex-image>
          </image>
        </figure>

        <p>
          We state (without proof) that <m>\gp(x) = 3\sqrt{x}/2</m>.
          Note that <m>\lim_{x\to0^+}\gp(x) = 0</m>;
          again, this limit is easier to evaluate than the limit of the difference quotient.
        </p>

        <p>
          The two functions are graphed in <xref ref="fig_diff_closed1"/>.
          Note how <m>f(x) = \sqrt{x}</m> seems to <q>go vertical</q>
          as <m>x</m> approaches 0, implying the slopes of its tangent lines are growing toward infinity.
          Also note how the slopes of the tangent lines to
          <m>g(x)= \sqrt{x^3}</m> approach 0 as <m>x</m> approaches 0.
        </p>
      </solution>
    </example>

    <p>
      Most calculus textbooks omit this topic and simply avoid specific cases where it could be applied.
      We choose in this text to not make use of the topic unless it is <q>needed.</q>
      Many theorems in later sections require a function <m>f</m> to be differentiable on an
      <em>open</em> interval <m>I</m>;
      we could remove the word <q>open</q>
      and just use <q><m>\ldots</m> on an interval <m>I</m>,</q>
      but choose to not do so in keeping with the current mathematical tradition.
      Our first use of differentiability on closed intervals comes in <xref ref="chapter_app_of_int"/>,
      where we measure the lengths of curves.
    </p>

    <p>
      This section defined the derivative;
      in some sense, it answers the question of <q>What
      <em>is</em> the derivative?</q>
      The next section addresses the question
      <q>What does the derivative <em>mean</em>?</q>
    </p>
  </subsection>

  <exercises>
    <subexercises xml:id="TaC-deriv-intro">
      <title>Terms and Concepts</title>

      <exercise label="TaC-deriv-intro-1">
        <webwork xml:id="webwork-TaC-deriv-intro-1">
          <pg-code>
            $true=PopUp(['?','True','False'],1);
            $false=PopUp(['?','True','False'],2);
          </pg-code>
          <statement>
            <p>
              <var name="$true" form="popup"/>
              Let <m>f</m> be a position function.
              The average rate of change on <m>[a,b]</m> is the slope of the line through the points <m>(a, f(a))</m> and <m>(b,f(b))</m>.
            </p>
          </statement>
        </webwork>
      </exercise>

      <exercise label="TaC-deriv-intro-2">
        <webwork xml:id="webwork-TaC-deriv-intro-2">
          <pg-code>
            $true=PopUp(['?','True','False'],1);
            $false=PopUp(['?','True','False'],2);
          </pg-code>
          <statement>
            <p>
              <var name="$true" form="popup"/>
              The definition of the derivative of a function at a point involves taking a limit.
            </p>
          </statement>
        </webwork>
      </exercise>

      <exercise label="TaC-deriv-intro-3">
        <webwork xml:id="webwork-TaC-deriv-intro-3">
          <statement>
            <p>
              In your own words,
              explain the difference between the average rate of change and instantaneous rate of change.
            </p>
            <p>
              <var form="essay"/>
            </p>
          </statement>
        </webwork>
      </exercise>

      <exercise label="TaC-deriv-intro-4">
        <webwork xml:id="webwork-TaC-deriv-intro-4">
          <statement>
            <p>
              In your own words,
              explain the difference between <xref ref="def_derivative_at_a_point">Definitions</xref>
              and <xref ref="def_the_derivative"/>.
            </p>
            <p>
              <var form="essay"/>
            </p>
          </statement>
        </webwork>
      </exercise>

      <exercise label="TaC-deriv-intro-5">
        <webwork xml:id="webwork-TaC-deriv-intro-5">
          <statement>
            <p>
              Let <m>y=f(x)</m>.
              Give three different notations equivalent to <q><m>f'(x)</m>.</q>
            </p>
            <p>
              <var form="essay"/>
            </p>
          </statement>
        </webwork>
      </exercise>

      <exercise label="TaC-deriv-intro-6">
        <webwork xml:id="webwork-TaC-deriv-intro-6">
          <statement>
            <p>
              If two lines are perpendicular,
              what is true of their slopes?
            </p>
            <p>
              <var form="essay"/>
            </p>
          </statement>
          <solution>
            <p>
              The two lines have negative-reciprocal slopes.
            </p>
          </solution>
        </webwork>
      </exercise>
    </subexercises>

    <subexercises>
      <title>Problems</title>

      <exercisegroup cols="2" xml:id="exset-deriv-intro-definition">
                <!--TODO: can we make these interactive by requiring steps?-->
        <introduction>
          <p>
            Use the definition of the derivative to compute the derivative of the given function.
          </p>
        </introduction>

        <exercise xml:id="exer_derivative_definition_constant" label="ex-deriv-intro-definition-constant">
          <webwork xml:id="webwork-ex-deriv-intro-definition-constant">
            <pg-code>
              $d = Formula('0');
              $showwork = '[@ explanation_box(message =&gt; "Show your work.") @]*';
            </pg-code>
            <statement>
              <p>
                <m>f(x) = 6</m>
              </p>
              <p>
                <var name="$d" width="20"/>
              </p>
              <p>
                <var name="$showwork" data="pgml"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-intro-definition-linear">
          <webwork xml:id="webwork-ex-deriv-intro-definition-linear">
            <pg-code>
              $d = Formula('2');
              $showwork = '[@ explanation_box(message =&gt; "Show your work.") @]*';
            </pg-code>
            <statement>
              <p>
                <m>f(x) = 2x</m>
              </p>
              <p>
                <var name="$d" width="20"/>
              </p>
              <p>
                <var name="$showwork" data="pgml"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-intro-definition-linear-2">
          <webwork xml:id="webwork-ex-deriv-intro-definition-linear-2">
            <pg-code>
              Context()-&gt;variables-&gt;are(t=&gt;'Real');
              $d = Formula('-3');
              $showwork = '[@ explanation_box(message =&gt; "Show your work.") @]*';
            </pg-code>
            <statement>
              <p>
                <m>f(t) = 4-3t</m>
              </p>
              <p>
                <var name="$d" width="20"/>
              </p>
              <p>
                <var name="$showwork" data="pgml"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-intro-definition-square">
          <webwork xml:id="webwork-ex-deriv-intro-definition-square">
            <pg-code>
              $d = Formula('2x');
              $showwork = '[@ explanation_box(message =&gt; "Show your work.") @]*';
            </pg-code>
            <statement>
              <p>
                <m>g(x) = x^2</m>
              </p>
              <p>
                <var name="$d" width="20"/>
              </p>
              <p>
                <var name="$showwork" data="pgml"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-intro-definition-cube">
          <webwork xml:id="webwork-ex-deriv-intro-definition-cube">
            <pg-code>
              $d = Formula('3x^2');
              $showwork = '[@ explanation_box(message =&gt; "Show your work.") @]*';
            </pg-code>
            <statement>
              <p>
                <m>h(x) = x^3</m>
              </p>
              <p>
                <var name="$d" width="20"/>
              </p>
              <p>
                <var name="$showwork" data="pgml"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-intro-definition-quadratic">
          <webwork xml:id="webwork-ex-deriv-intro-definition-quadratic">
            <pg-code>
              $d = Formula('6x-1');
              $showwork = '[@ explanation_box(message =&gt; "Show your work.") @]*';
            </pg-code>
            <statement>
              <p>
                <m>f(x) = 3x^2-x+4</m>
              </p>
              <p>
                <var name="$d" width="20"/>
              </p>
              <p>
                <var name="$showwork" data="pgml"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-intro-definition-reciprocal">
          <webwork xml:id="webwork-ex-deriv-intro-definition-reciprocal">
            <pg-code>
              $d = Formula('-1/x^2');
              $showwork = '[@ explanation_box(message =&gt; "Show your work.") @]*';
            </pg-code>
            <statement>
              <p>
                <m>r(x) = \frac{1}{x}</m>
              </p>
              <p>
                <var name="$d" width="20"/>
              </p>
              <p>
                <var name="$showwork" data="pgml"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise xml:id="exer_derivative_definition_fractional_linear" label="ex-deriv-intro-definition-frac-linear">
          <webwork xml:id="webwork-ex-deriv-intro-definition-frac-linear">
            <pg-code>
              Context()-&gt;variables-&gt;are(s=&gt;'Real');
              $d = Formula('-1/(s-2)^2');
              $showwork = '[@ explanation_box(message =&gt; "Show your work.") @]*';
            </pg-code>
            <statement>
              <p>
                <m>r(s) = \frac{1}{s-2}</m>
              </p>
              <p>
                <var name="$d" width="20"/>
              </p>
              <p>
                <var name="$showwork" data="pgml"/>
              </p>
            </statement>
          </webwork>
        </exercise>
      </exercisegroup>

      <exercisegroup cols="2" xml:id="exset-deriv-intro-def-tangent">
        <introduction>
          <p>
            A function and an <m>x</m>-value are given.
            (Note: these functions are the same as those given in <xref first="exer_derivative_definition_constant" last="exer_derivative_definition_fractional_linear" text="local">Exercises</xref>.)
            Give the equations of the tangent line and the normal line at that <m>x</m>-value.
          </p>
        </introduction>

        <exercise label="ex-deriv-intro-def-tangent-1">
          <webwork xml:id="webwork-ex-deriv-intro-def-tangent-1">
            <pg-code>
              Context("ImplicitPlane");
              Context()-&gt;variables-&gt;are(x=&gt;'Real',y=&gt;'Real');
              $tangentline=Formula("y=6");
              $normalline=Formula("x=-2");
            </pg-code>
            <statement>
              <p>
                <m>f(x)=6</m> at <m>x=-2</m>
              </p>
              <instruction>
                Enter the equation of the tangent line here.
              </instruction>
              <p>
                <var name="$tangentline" width="20"/>
              </p>
              <instruction>
                Enter the equation of the normal line here.
              </instruction>
              <p>
                <var name="$normalline" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-intro-def-tangent-2">
          <webwork xml:id="webwork-ex-deriv-intro-def-tangent-2">
            <pg-code>
              Context("ImplicitPlane");
              Context()-&gt;variables-&gt;are(x=&gt;'Real',y=&gt;'Real');
              $tangentline=Compute("y=2x");
              $normalline=Compute("y=-(1/2)(x-3)+6");
            </pg-code>
            <statement>
              <p>
                <m>f(x)=2x</m> at <m>x=3</m>
              </p>
              <instruction>
                Enter the equation of the tangent line here.
              </instruction>
              <p>
                <var name="$tangentline" width="20"/>
              </p>
              <instruction>
                Enter the equation of the normal line here.
              </instruction>
              <p>
                <var name="$normalline" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-intro-def-tangent-3">
          <webwork xml:id="webwork-ex-deriv-intro-def-tangent-3">
            <pg-code>
              Context("ImplicitPlane");
              Context()-&gt;variables-&gt;are(x=&gt;'Real',y=&gt;'Real');
              $tangentline=Compute("y=-3x+4");
              $normalline=Compute("y=(1/3)(x-7)-17");
            </pg-code>
            <statement>
              <p>
                <m>f(x)=4-3x</m> at <m>x=7</m>
              </p>
              <instruction>
                Enter the equation of the tangent line here.
              </instruction>
              <p>
                <var name="$tangentline" width="20"/>
              </p>
              <instruction>
                Enter the equation of the normal line here.
              </instruction>
              <p>
                <var name="$normalline" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-intro-def-tangent-4">
          <webwork xml:id="webwork-ex-deriv-intro-def-tangent-4">
            <pg-code>
              Context("ImplicitPlane");
              Context()-&gt;variables-&gt;are(x=&gt;'Real',y=&gt;'Real');
              $tangentline=Compute("y=4(x-2)+4");
              $normalline=Compute("y=-(1/4)(x-2)+4");
            </pg-code>
            <statement>
              <p>
                <m>g(x)=x^2</m> at <m>x=2</m>
              </p>
              <instruction>
                Enter the equation of the tangent line here.
              </instruction>
              <p>
                <var name="$tangentline" width="20"/>
              </p>
              <instruction>
                Enter the equation of the normal line here.
              </instruction>
              <p>
                <var name="$normalline" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-intro-def-tangent-5">
          <webwork xml:id="webwork-ex-deriv-intro-def-tangent-5">
            <pg-code>
              Context("ImplicitPlane");
              Context()-&gt;variables-&gt;are(x=&gt;'Real',y=&gt;'Real');
              $tangentline=Compute("y=48(x-4)+64");
              $normalline=Compute("y=-1/48(x-4)+64");
            </pg-code>
            <statement>
              <p>
                <m>h(x)=x^3</m> at <m>x=4</m>
              </p>
              <instruction>
                Enter the equation of the tangent line here.
              </instruction>
              <p>
                <var name="$tangentline" width="20"/>
              </p>
              <instruction>
                Enter the equation of the normal line here.
              </instruction>
              <p>
                <var name="$normalline" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-intro-def-tangent-6">
          <webwork xml:id="webwork-ex-deriv-intro-def-tangent-6">
            <pg-code>
              Context("ImplicitPlane");
              Context()-&gt;variables-&gt;are(x=&gt;'Real',y=&gt;'Real');
              $tangentline=Compute("y=-7(x+1)+8");
              $normalline=Compute("y=(1/7)(x+1)+8");
            </pg-code>
            <statement>
              <p>
                <m>f(x)=3x^2-x+4</m> at <m>x=-1</m>
              </p>
              <instruction>
                Enter the equation of the tangent line here.
              </instruction>
              <p>
                <var name="$tangentline" width="20"/>
              </p>
              <instruction>
                Enter the equation of the normal line here.
              </instruction>
              <p>
                <var name="$normalline" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-intro-def-tangent-7">
          <webwork xml:id="webwork-ex-deriv-intro-def-tangent-7">
            <pg-code>
              Context("ImplicitPlane");
              Context()-&gt;variables-&gt;are(x=&gt;'Real',y=&gt;'Real');
              $tangentline=Compute("y=-(1/4)(x+2)-1/2");
              $normalline=Compute("y=4(x+2)-1/2");
            </pg-code>
            <statement>
              <p>
                <m>r(x)=\frac{1}{x}</m> at <m>x=-2</m>
              </p>
              <instruction>
                Enter the equation of the tangent line here.
              </instruction>
              <p>
                <var name="$tangentline" width="20"/>
              </p>
              <instruction>
                Enter the equation of the normal line here.
              </instruction>
              <p>
                <var name="$normalline" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-intro-def-tangent-8">
          <webwork xml:id="webwork-ex-deriv-intro-def-tangent-8">
            <pg-code>
              Context("ImplicitPlane");
              Context()-&gt;variables-&gt;are(x=&gt;'Real',y=&gt;'Real');
              $tangentline=Compute("y=-(x-3)+1");
              $normalline=Compute("y=(x-3)+1");
            </pg-code>
            <statement>
              <p>
                <m>r(x)=\frac{1}{x-2}</m> at <m>x=3</m>
              </p>
              <instruction>
                Enter the equation of the tangent line here.
              </instruction>
              <p>
                <var name="$tangentline" width="20"/>
              </p>
              <instruction>
                Enter the equation of the normal line here.
              </instruction>
              <p>
                <var name="$normalline" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>
      </exercisegroup>

      <exercisegroup cols="2" xml:id="exset-deriv-intro-approx">
        <introduction>
          <p>
            A function <m>f</m> and an <m>x</m>-value <m>a</m> are given.
            Approximate the equation of the tangent line to the graph of <m>f</m> at <m>x=a</m> by numerically approximating <m>f'(a)</m>,
            using <m>h=0.1</m>.
          </p>
        </introduction>

        <exercise label="ex-deriv-intro-approx-1">
          <webwork xml:id="webwork-ex-deriv-intro-approx-1">
            <pg-code>
              $b=non_zero_random(-5,5,1);
              $c=non_zero_random(-9,9,1);
              $a=non_zero_random(-5,5,1);
              if($envir{problemSeed}==1){$a=3;$b=2;$c=1;};
              Context("ImplicitPlane");
              Context()-&gt;variables-&gt;are(x=&gt;'Real',y=&gt;'Real');
              $f=Formula("x^2+$a x + $b")-&gt;reduce;
              $fa=$f-&gt;eval(x=&gt;$a);
              $h=0.1;
              $m=($f-&gt;eval(x=&gt;$a+$h) - $fa)/$h;
              $tangentline=Compute("y=$m(x-$a)+$fa");
            </pg-code>
            <statement>
              <p>
                <m>f(x) = <var name="$f"/></m> and <m>a=<var name="$a"/></m>
              </p>
              <p>
                <var name="$tangentline" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-intro-approx-2">
          <webwork xml:id="webwork-ex-deriv-intro-approx-2">
            <pg-code>
              $b=non_zero_random(-10,10,1);
              $c=non_zero_random(-9,9,1);
              $a=non_zero_random(-9,9,1);
              do {$a=non_zero_random(-9,9,1)} until ($a+$c != 0);
              if($envir{problemSeed}==1){$a=10;$b=1;$c=9;};
              Context("ImplicitPlane");
              Context()-&gt;variables-&gt;are(x=&gt;'Real',y=&gt;'Real');
              $f=Formula("$b/(x+$c)")-&gt;reduce;
              $fa=$f-&gt;eval(x=&gt;$a);
              $h=0.1;
              $m=($f-&gt;eval(x=&gt;$a+$h) - $fa)/$h;
              $tangentline=Compute("y=$m(x-$a)+$fa");
            </pg-code>
            <statement>
              <p>
                <m>f(x) = <var name="$f"/></m> and <m>a=<var name="$a"/></m>
              </p>
              <p>
                <var name="$tangentline" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-intro-approx-3">
          <webwork xml:id="webwork-ex-deriv-intro-approx-3">
            <pg-code>
              $a=non_zero_random(-5,5,1);
              if($envir{problemSeed}==1){$a=2;};
              Context("ImplicitPlane");
              Context()-&gt;variables-&gt;are(x=&gt;'Real',y=&gt;'Real');
              $f=Formula("e^x")-&gt;reduce;
              $fa=$f-&gt;eval(x=&gt;$a);
              $h=0.1;
              $m=($f-&gt;eval(x=&gt;$a+$h) - $fa)/$h;
              $tangentline=Compute("y=$m(x-$a)+$fa");
            </pg-code>
            <statement>
              <p>
                <m>f(x) = <var name="$f"/></m> and <m>a=<var name="$a"/></m>
              </p>
              <p>
                <var name="$tangentline" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-intro-approx-4">
          <webwork xml:id="webwork-ex-deriv-intro-approx-4">
            <pg-code>
              Context("ImplicitPlane");
              Context()-&gt;variables-&gt;are(x=&gt;'Real',y=&gt;'Real');
              $tangentline=Compute("y=-0.04996x+1");
            </pg-code>
            <statement>
              <p>
                <m>f(x) = \cos(x)</m> and <m>a=0</m>
              </p>
              <p>
                <var name="$tangentline" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>
      </exercisegroup>

      <exercise label="ex-deriv-intro-graph-approx-1">
        <webwork xml:id="webwork-ex-deriv-intro-graph-approx-1">
          <pg-code>
              @approx=(
              Compute("-2")-&gt;with(tolType=&gt;'absolute',tolerance=&gt;0.4),
              Compute("0")-&gt;with(tolType=&gt;'absolute',tolerance=&gt;0.1),
              Compute("4")-&gt;with(tolType=&gt;'absolute',tolerance=&gt;2)
            );
            $approx_list=List($approx[0],$approx[1],$approx[2]);
            $derivative=Formula("2x");
            $slopes=List(-2,0,4);
            $showwork = '[@ explanation_box(message =&gt; "Show your work.") @]*';
          </pg-code>
          <introduction>
            <p>
              The graph of <m>f(x)=x^2-1</m> is shown.
            </p>
            <image width="47%">
              <shortdescription>
                Graph of function x squared minus 1, curve is U-shaped.
              </shortdescription>
              <description>
                <p>
                  The <m>x</m> axis is between <m>-2</m> and <m>2</m> and the <m>y</m> axis
                  is drawn between <m>-1</m> and <m>3</m>.
                  The graph is U-shaped reaching a minimum at <m>(0,-1)</m> and moving
                  further upwards after crossing point <m>(-1,0)</m> to the left and <m>(1,0)</m> to the right.
                </p>
              </description>
              <latex-image label="img_02_01_ex_24">
                \begin{tikzpicture}
                \begin{axis}[
                      ytick={-1,1,2,3},
                      ymin=-1.3,ymax=3.5,%
                      xmin=-2.1,xmax=2.1,%
                      grid=major
                ]

                \addplot [firstcurvestyle,infinite,domain=-2.1:2.1] {x^2-1};

                \end{axis}
                \end{tikzpicture}
              </latex-image>
            </image>

          </introduction>
          <task label="ex-deriv-intro-graph-approx-1a">
            <statement>
              <p>
                Use the graph to approximate the slope of the tangent line to <m>f</m> at <m>(-1,0)</m>, <m>(0,-1)</m>, and <m>(2,3)</m>.
              </p>

              <instruction>
                Enter your answers as a comma-separated list of values.
              </instruction>

              <p>
                <var name="$approx_list" width="10"/>
              </p>
            </statement>
          </task>

          <task label="ex-deriv-intro-graph-approx-1b">
            <statement>
              <p>
                Using the definition of the derivative, find <m>\fp(x)</m>.
              </p>
              <p>
                <var name="$derivative" width="10"/>
              </p>
              <p>
                <var name="$showwork" data="pgml"/>
              </p>
            </statement>
          </task>
          <task label="ex-deriv-intro-graph-approx-1c">
            <statement>
              <p>
                Use the derivative to find the slope of the tangent line at the points <m>(-1,0)</m>, <m>(0,-1)</m> and <m>(2,3)</m>.
              </p>
              <instruction>
                Enter your answers as a comma-separated list of values.
              </instruction>
              <p>
                <var name="$slopes" width="10"/>
              </p>
            </statement>
          </task>
        </webwork>
      </exercise>

      <exercise label="ex-deriv-intro-graph-approx-2">
        <webwork xml:id="webwork-ex-deriv-intro-graph-approx-2">
          <pg-code>
            @approx=(
              Compute("-1")-&gt;with(tolType=&gt;'absolute',tolerance=&gt;0.2),
              Compute("-1/4")-&gt;with(tolType=&gt;'absolute',tolerance=&gt;0.1)
            );
            $approx_list=List($approx[0],$approx[1]);
            $derivative=Formula("-1/(x+1)^2");
            $slopes=List(-1,'-1/4');
            $showwork = '[@ explanation_box(message =&gt; "Show your work.") @]*';
          </pg-code>
          <introduction>
            <p>
              The graph of <m>f(x)=\frac{1}{x+1}</m> is shown.
            </p>
            <image width="47%">
              <shortdescription>
                Graph of function f(x) = 1 divided by (x+1).
              </shortdescription>
              <description>
                <p>
                  Graph of function <m>f(x) = \frac{1}{x+1}</m>.
                  The <m>x</m> axis is drawn from <m>-1</m>
                  to <m>3</m> and the <m>y</m> axis from <m>0</m> to <m>5</m>.
                  The curve begins in the second quadrant and steeply declines
                  from infinty to point <m>(0,1)</m> then it enters the first quadrant declining gently
                  and seems to come very close to the <m>x</m> axis on the right.
                </p>
              </description>
              <latex-image label="img_02_01_ex_25">
                \begin{tikzpicture}
                \begin{axis}[
                      ytick={1,2,3,4,5},
                      ymin=-.5,ymax=5.5,%
                      xmin=-1.1,xmax=3.1,%
                      grid=major
                ]

                \addplot [firstcurvestyle,infinite,domain=-.9:3.1,samples=50] {1/(x+1)};

                \end{axis}
                \end{tikzpicture}
              </latex-image>
            </image>
          </introduction>

          <task label="ex-deriv-intro-graph-approx-2a">
            <statement>
              <p>
                Use the graph to approximate the slope of the tangent line to <m>f</m> at <m>(0,1)</m> and <m>(1,0.5)</m>.
              </p>
              <instruction>
                Enter your answers as a comma-separated list of values.
              </instruction>
              <p>
                <var name="$approx_list" width="10"/>
              </p>
            </statement>
          </task>

          <task label="ex-deriv-intro-graph-approx-2b">
            <statement>
              <p>
                Using the definition of the derivative, find <m>\fp(x)</m>.
              </p>
              <p>
                <var name="$derivative" width="10"/>
              </p>
              <p>
                <var name="$showwork" data="pgml"/>
              </p>
            </statement>
          </task>

          <task label="ex-deriv-intro-graph-approx-2c">
            <statement>
              <p>
                Use the derivative to find the slope of the tangent line at the points <m>(0,1)</m> and <m>(1,0.5)</m>.
              </p>
              <instruction>
                Enter your answers as a comma-separated list of values.
              </instruction>
              <p>
                <var name="$slopes" width="10"/>
              </p>
            </statement>
          </task>
        </webwork>
      </exercise>

      <!-- These are not WeBWorK problems because the student must sketch a graph.
      That is not currently a possible thing for WeBWorK to assess,
      nor is it possible for a student to upload an image file to be assessed manually.
      Someday if that changes, these could be WeBWorK problems. -->
      <exercisegroup cols="2" xml:id="exset-deriv-intro-sketch">
        <introduction>
          <p>
            A graph of a function <m>f(x)</m> is given.
            Using the graph, sketch <m>\fp(x)</m>.
          </p>
        </introduction>

        <exercise label="ex-deriv-intro-sketch-1">
          <statement>
            <image>
              <shortdescription>
                Graph of function f(x) that is a straight line.
              </shortdescription>
              <description>
               <p>
                The <m>y</m> axis if drawn from <m>-1</m> to <m>3</m>
                and the <m>x</m> axis from <m>-2</m> to <m>5</m>.
                The graph is a decreasing straight line primarily in
                the first quadrant that passes through <m>2</m> on the <m>y</m> axis and <m>4</m> on the <m>x</m> axis.
               </p>
              </description>
              <latex-image label="img_02_01_ex_26">
                \begin{tikzpicture}
                  \begin{axis}[
                      xmin=-2.1,
                      xmax=5.1,
                      ymin=-1.5,
                      ymax=3.5
                    ]
                    \addplot+[infinite,domain=-2.1:5.1] {-.5*x+2};
                  \end{axis}
                \end{tikzpicture}
              </latex-image>
            </image>
          </statement>
        </exercise>

        <exercise label="ex-deriv-intro-sketch-2">
          <statement>
            <image>
              <shortdescription>
                Graph of function is U shaped primarily in the second and third quadrant.
              </shortdescription>
              <description>
                <p>
                  The <m>y</m> axis is from <m>-3</m> to <m>3</m> and the <m>x</m> axis <m>-6</m> and <m>2</m>.
                  The U-shaped curve has a minimun at point <m>(-2,-3)</m>
                  it intersects the <m>x</m> axis at <m>-4.5</m> on the left and <m>0.5</m> on the right.
                </p>
              </description>
              <latex-image label="img_02_01_ex_27">
                \begin{tikzpicture}
                  \begin{axis}[
                      xmin=-7.1,
                      xmax=3.1,
                      ymin=-3.5,
                      ymax=3.5
                    ]
                    \addplot+[infinite,domain=-5.6:1.6,samples=40] {.5*(x+2)^2-3};
                  \end{axis}
                \end{tikzpicture}
              </latex-image>
            </image>
          </statement>
        </exercise>

        <exercise label="ex-deriv-intro-sketch-3">
          <statement>
            <image>
              <shortdescription>
                Graph of curve that crosses the origin with a mixima at x=-1 and a minima at x=1.
              </shortdescription>
              <description>
                <p>
                  The <m>x</m> axis is drawn from <m>-3</m> to <m>3</m> and the <m>y</m> axis from <m>-5</m> to <m>5</m>.
                  The graph has a maxima near point <m>(-1,3)</m> and a minima near point <m>(1,-3)</m>.
                  It crosses the origin then passes the maxima then crosses <m>x</m> axis at <m>-2</m>
                  and decreases in the third quadrant and continues to infinity on the left.
                  On the right side it decreases from the origin passes the minima and goes to infinity
                  after crossing the <m>x</m> axis at <m>2</m> in the first quadrant.
                </p>
              </description>
              <latex-image label="img_02_01_ex_28">
                \begin{tikzpicture}
                  \begin{axis}[
                      xmin=-3.1,
                      xmax=3.1,
                      ymin=-5.5,
                      ymax=5.5
                    ]
                    \addplot+[infinite,domain=-2.45:2.45,samples=40] {(x-2)*x*(x+2)};
                  \end{axis}
                \end{tikzpicture}
              </latex-image>
            </image>
          </statement>
        </exercise>

        <exercise label="ex-deriv-intro-sketch-4">
          <statement>
            <image>
              <shortdescription>
                Graph of function that has maxima at even multiple of pi and minima at odd multiple of pi.
              </shortdescription>
              <description>
                <p>
                 The <m>y</m> axis is drawn from <m>-1</m> to <m>1</m> and the <m>x</m> axis is drawn from
                 <m>-2* \pi</m> to <m>2* \pi</m>.
                 At <m>x=0</m> the function has a maximum of <m>1</m> on the left of the <m>y</m> axis the
                 function decreases from <m>1</m> and reaches a minima of <m>-1</m> at <m>x=-\pi</m> after crossing <m>-\p/2</m>.
                 Then it increases to cross the <m>x</m> axis at <m>x=-3*\pi/2</m> and increases further
                 to reach a maximum of <m>1</m> in the second quadrant.
                </p>
                <p>
                 Similarly, on the right of the <m>y</m> axis the function decreases from <m>1</m> and reaches
                 a minima of <m>-1</m> at <m>x=\pi</m> after crossing <m>\p/2</m>.
                 Then it increases to cross the <m>x</m> axis at <m>x=3*\pi/2</m> and increases further to reach
                 a maximum of <m>1</m> in the first quadrant.
                </p>
              </description>
              <latex-image label="img_02_01_ex_29">
                \begin{tikzpicture}
                  \begin{axis}[
                      xmin=-6.9,
                      xmax=6.9,
                      ymin=-1.1,
                      ymax=1.1,
                      xtick={-6.28,-3.14,3.14,6.28},
                      xticklabels={$-2\pi$, $-\pi$, $\pi$, $2\pi$}
                    ]
                    \addplot+[infinite,domain=-6.8:6.8,samples=101] {cos(deg(x))};
                  \end{axis}
                \end{tikzpicture}
              </latex-image>
            </image>
          </statement>
        </exercise>
      </exercisegroup>

      <exercisegroup cols="2" xml:id="exset-deriv-intro-graph-interpret">
        <introduction>
          <p>
            Use the graph of the function to answer the following questions.
            <ol cols="2">
              <li>
                <p>
                  Where is <m>g(x)\gt 0</m>?
                </p>
              </li>
              <li>
                <p>
                  Where is <m>g(x)\lt 0</m>?
                </p>
              </li>
              <li>
                <p>
                  Where is <m>g(x) = 0</m>?
                </p>
              </li>
              <li>
                <p>
                  Where is <m>g'(x) \lt 0</m>?
                </p>
              </li>
              <li>
                <p>
                  Where is <m>g'(x)  \gt  0</m>?
                </p>
              </li>
              <li>
                <p>
                  Where is <m>g'(x) = 0</m>?
                </p>
              </li>
            </ol>
          </p>
        </introduction>
        <exercise label="ex-deriv-intro-graph-interpret-1">
          <webwork xml:id="webwork-ex-deriv-intro-graph-interpret-1">
            <pg-code>
              Context("Interval");
              $pos=Compute("(-2,0)U(2,inf)");
              $neg=Compute("(-inf,-2)U(0,2)");
              $zer=Compute("{-2,0,2}");
              $dec=Compute("(-1,1)");
              $inc=Compute("(-inf,-1)U(1,inf)");
              $fla=Compute("{-1,1}");
            </pg-code>
            <statement>
              <image>
                <shortdescription>
                  Graph of curve that crosses the origin with a mixima at x=-1 nd a minima at x=1.
                </shortdescription>
                <description>
                  <p>
                    The <m>x</m> axis is drawn from <m>-3</m> to <m>3</m> and the <m>y</m> axis from <m>-5</m> to <m>5</m>.
                    The graph has a maxima near point <m>(-1,3)</m> and a minima near point <m>(1,-3)</m>.
                    It crosses the origin passes the maxima, crosses <m>x</m> axis at <m>-2</m>
                    and decreases in the third quadrant and continues to infinity on the left.
                    On the right side it decreases from the origin passes the minima and increases
                    to infinity after crossing the <m>x</m> axis at <m>2</m> in the first quadrant.
                  </p>
                </description>
                <latex-image label="img_02_01_ex_30">
                  \begin{tikzpicture}
                  \begin{axis}[
                  xtick={-2,-1,1,2},
                  ymin=-5.6,ymax=5.6,%
                  xmin=-3,xmax=3,%
                  ]

                  \addplot [firstcurvestyle,infinite,domain=-2.5:2.5,samples=40] {(x-2)*x*(x+2)};

                  \end{axis}
                  \end{tikzpicture}
                </latex-image>
              </image>
              <instruction>
                Answer using interval notation or set notation, as appropriate. If you need to write <m>\infty</m>, you may type <c>inf</c> or <c>infinity</c>.
                If you need the union symbol, <m>\cup</m>, you may type the capital letter <c>U</c>.
              </instruction>
              <instruction>
                Enter the set on which <m>g(x) \gt 0</m> using interval notation.
              </instruction>
              <p>
                <var name="$pos" width="20"/>
              </p>
              <instruction>
                Enter the set on which <m>g(x) \lt 0</m> using interval notation.
              </instruction>
              <p>
                <var name="$neg" width="20"/>
              </p>
              <instruction>
                Enter the set of points where <m>g(x) = 0</m> using the syntax <c>{a,b}</c>.
              </instruction>
              <p>
                <var name="$zer" width="20"/>
              </p>
              <instruction>
                Enter the set on which <m>g^\prime(x) \lt 0</m> using interval notation.
              </instruction>
              <p>
                <var name="$dec" width="20"/>
              </p>
              <instruction>
                Enter the set on which <m>g^\prime(x) \gt 0</m> using interval notation.
              </instruction>
              <p>
                <var name="$inc" width="20"/>
              </p>
              <instruction>
                Enter the set of points where <m>g^\prime(x) = 0</m> using the syntax <c>{a,b}</c>.
              </instruction>
              <p>
                <var name="$fla" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-intro-graph-interpret-2">
          <webwork xml:id="webwork-ex-deriv-intro-graph-interpret-2">
            <pg-code>
              Context("Interval");
              $pos=Compute("(-2,2)");
              $neg=Compute("(-inf,-2)U(2,inf)");
              $zer=Compute("{-2,2}");
              $dec=Compute("(-1,0)U(1,inf)");
              $inc=Compute("(-inf,-1)U(0,1)");
              $fla=Compute("{-1,0,1}");
            </pg-code>
            <statement>
              <image>
                <shortdescription>
                  An M-shaped graph with two maxima.
                </shortdescription>
                <description>
                  <p>
                    The <m>y</m> axis is drawn from <m>-2</m> to <m>5</m> and the <m>x</m> axis
                    is drawn from <m>-2</m> and <m>2</m>.
                    At <m>x=0</m> y has a value of <m>4</m>, to the left the function increases to reach a maximum
                    of <m>4.5</m> in the second quadrant
                    and decreses and continues into the third quadrant after crossing <m>x</m> axis at <m>-2</m>.
                    Similarly, on the right side, the function increases to reach a maximum of <m>4.5</m> in the
                    first quadrant and decreses and continues into the fourth quadrant after crossing <m>x</m> axis at <m>2</m>.
                  </p>
                </description>
                <latex-image label="img_02_01_ex_31">
                  \begin{tikzpicture}
                  \begin{axis}[
                  xtick={-2,-1,1,2},
                  ymin=-3,ymax=6,%
                  xmin=-2.8,xmax=2.8,%
                  ]

                  \addplot [firstcurvestyle,infinite,domain=-2.2:2.2,samples=50] {(-2)*(x^4/4-x^2/2)+4};

                   \end{axis}
                  \end{tikzpicture}
                </latex-image>
              </image>
              <instruction>
                Answer using interval notation or set notation, as appropriate. If you need to write <m>\infty</m>, you may type <c>inf</c> or <c>infinity</c>.
                If you need the union symbol, <m>\cup</m>, you may type the capital letter <c>U</c>.
              </instruction>
              <instruction>
                Answer using interval notation or set notation, as appropriate. If you need to write <m>\infty</m>, you may type <c>inf</c> or <c>infinity</c>.
                If you need the union symbol, <m>\cup</m>, you may type the capital letter <c>U</c>.
              </instruction>
              <instruction>
                Enter the set on which <m>g(x) \gt 0</m> using interval notation.
              </instruction>
              <p>
                <var name="$pos" width="20"/>
              </p>
              <instruction>
                Enter the set on which <m>g(x) \lt 0</m> using interval notation.
              </instruction>
              <p>
                <var name="$neg" width="20"/>
              </p>
              <instruction>
                Enter the set of points where <m>g(x) = 0</m> using the syntax <c>{a,b}</c>.
              </instruction>
              <p>
                <var name="$zer" width="20"/>
              </p>
              <instruction>
                Enter the set on which <m>g^\prime(x) \lt 0</m> using interval notation.
              </instruction>
              <p>
                <var name="$dec" width="20"/>
              </p>
              <instruction>
                Enter the set on which <m>g^\prime(x) \gt 0</m> using interval notation.
              </instruction>
              <p>
                <var name="$inc" width="20"/>
              </p>
              <instruction>
                Enter the set of points where <m>g^\prime(x) = 0</m> using the syntax <c>{a,b}</c>.
              </instruction>
              <p>
                <var name="$fla" width="20"/>
              </p>
            </statement>
          </webwork>
        </exercise>
      </exercisegroup>

      <exercisegroup xml:id="exset-deriv-intro-domain">
        <introduction>
          <p>
            A function <m>f(x)</m> is given,
            along with its domain and derivative.
            Determine if <m>f(x)</m> is differentiable on its domain.
          </p>
        </introduction>

        <exercise label="ex-deriv-intro-domain-1">
          <webwork xml:id="webwork-ex-deriv-intro-domain-1">
            <pg-code>
              $isisnot = PopUp(['?','yes','no'],2);
            </pg-code>
            <statement>
              <p>
                <m>f(x) = \sqrt{x^5(1-x)}</m>,
                domain is <m>[0,1]</m>,
                <m>\fp(x) = \frac{(5-6x)x^{3/2}}{2\sqrt{1-x}}</m>
              </p>
              <p>
                <var name="$isisnot" form="popup"/>
              </p>
            </statement>
            <solution>
              <p>
                <m>\lim_{h\to0^+}\frac{f(0+h)-f(0)}h =0</m>;
                note also that <m>\lim_{x\to0^+}\fp(x) = 0</m>.
                So <m>f</m> is differentiable at <m>x=0</m>.
              </p>
              <p>
                <m>\lim_{h\to0^-}\frac{f(1+h)-f(1)}h =-\infty</m>;
                note also that <m>\lim_{x\to1^-}\fp(x) = -\infty</m>.
                So <m>f</m> is not differentiable at <m>x=1</m>.
              </p>
              <p>
                <m>f</m> is differentiable on <m>[0,1)</m>, not its entire domain.
              </p>
            </solution>
          </webwork>
        </exercise>

        <exercise label="ex-deriv-intro-domain-2">
          <webwork xml:id="webwork-ex-deriv-intro-domain-2">
            <pg-code>
              $isisnot = PopUp(['?','yes','no'],1);
            </pg-code>
            <statement>
              <p>
                <m>f(x) = \cos\left(\sqrt{x}\right)</m>,
                domain is <m>[0,\infty)</m>,
                <m>\fp(x) = -\frac{\sin\left(\sqrt{x}\right)}{2\sqrt{x}}</m>
              </p>
              <p>
                <var name="$isisnot" form="popup"/>
              </p>
            </statement>
            <solution>
              <p>
                The limit of the difference quotient is difficult to evaluate.
                Using <xref ref="thm_special_limits"/>,
                we can determine <m>\lim_{x\to0^+}\fp(x) = -1/2</m>.
              </p>
              <p>
                Since <m>\fp</m> is defined on <m>(0,\infty)</m>,
                we conclude <m>f</m> is differentiable on <m>[0,\infty)</m>.
              </p>
            </solution>
          </webwork>
        </exercise>
      </exercisegroup>
    </subexercises>

    <!-- <subexercises>
      <title>Review</title>

      <exercise label="ex-deriv-intro-review-1">
        <webwork xml:id="webwork-ex-deriv-intro-review-1">
          <pg-code>
            ($r,$s,$t) = (-9..-1,1..9)[NchooseK(18,3)];
            $t += non_zero_random(-0.5,0.5,0.1);
            if($envir{problemSeed}==1){$r=-7;$s=5;$t=5.5;};
            $b=-($r+$t);
            $c=$r*$t;
            $B=-($s+$t);
            $C=$s*$t;
            $f=Formula("(x^2+$b x+$c)/(x^2+$B x+$C)");
            Context("Fraction");
            $L=Fraction(($t-$r)/($t-$s));
          </pg-code>
          <statement>
            <p>
              Approximate <m>\displaystyle\lim_{x\to <var name="$t"/>}<var name="$f"/></m>.
            </p>
            <instruction>
              If you need to enter <m>\infty</m>, you may type <c>infinity</c>, or just <c>INF</c>.
              If the limit does not exist, you may type <c>does not exist</c>, or just <c>DNE</c>.
            </instruction>
            <p>
              <var name="$L" width="10"/>
            </p>
          </statement>
        </webwork>
      </exercise>

      <exercise label="ex-deriv-intro-review-2">
        <webwork xml:id="webwork-ex-deriv-intro-review-2">
          <pg-code>
            $a=non_zero_random(-4,4,1);
            $low = int(($a)**2/3)+1;
            $b=random($low,9,1);
            $c=non_zero_random(-3,3,1);
            if($envir{problemSeed}==1){$a=1;$b=1;$c=-1;};
            $f=Formula("x^3+$a x^2+$b x + $c");
            $fp=$f->D('x');
            Context("Numeric")->flags->set(tolType=>'absolute',tolerance=>0.005);
            $r=0;
            do {
              $r=$r-($f->eval(x=>$r))/($fp->eval(x=>$r));
            } until ($r==$r-($f->eval(x=>$r))/($fp->eval(x=>$r)));
            if ($r>0) {
              $A=int($r*10)/10;
              $B=$A+0.1;
            } else {
              $B=int($r*10)/10;
              $A=$B-0.1;
            };
            $showwork = '[@ explanation_box(message => "Show the steps you used applying the Bisection Method.") @]*';
          </pg-code>
          <statement>
            <p>
              Use the Bisection Method to approximate,
              accurate to two decimal places,
              the root of <m>g(x) = <var name="$f"/></m> on <m>[<var name="$A"/>,<var name="$B"/>]</m>.
            </p>
            <p>
              <var name="$r" width="10"/>
            </p>
            <p>
              <var name="$showwork" data="pgml"/>
            </p>
          </statement>
        </webwork>
      </exercise>

      <exercise label="ex-deriv-intro-review-3">
        <webwork xml:id="webwork-ex-deriv-intro-review-3">
          <pg-code>
            $a=random(1,9,1);
            $b=list_random(2,3,5,6,7,11,13);
            if($envir{problemSeed}==1){$a=1;$b=5;};
            $f=Formula("1/(x^2-$a^2)");
            $g=Formula("sqrt($b-x)");
            $h=Formula("sqrt($b-x^2)");
            Context("Interval");
            Context()->flags->set(reduceConstantFunctions=>0);
            @cont=(
              List(Interval("(-inf,inf)")),
              List(Interval("(-inf,-$a)"), Interval("(-$a,$a)"), Interval("($a,inf)")),
              List(Interval("(-inf,$b]")),
              List(Interval("[-sqrt($b),sqrt($b)]"))
            );
          </pg-code>
          <introduction>
            <p>
              Give maximal intervals on which each of the following functions are continuous.
            </p>
            <instruction>
              If there is more than one interval for an answer,
              enter the intervals as a list separated by commas.
            </instruction>
          </introduction>
          <task label="ex-deriv-intro-review-3a">
            <statement>
              <p>
                <m>\dfrac{1}{e^x+1}</m>
              </p>
              <p>
                <var name="$cont[0]" width="20"/>
              </p>
            </statement>
          </task>
          <task label="ex-deriv-intro-review-3b">
            <statement>
              <p>
                <m><var name="$f"/></m>
              </p>
              <p>
                <var name="$cont[1]" width="20"/>
              </p>
            </statement>
          </task>
          <task label="ex-deriv-intro-review-3c">
            <statement>
              <p>
                <m><var name="$g"/></m>
              </p>
              <p>
                <var name="$cont[2]" width="20"/>
              </p>
            </statement>
          </task>
          <task label="ex-deriv-intro-review-3d">
            <statement>
              <p>
                <m><var name="$h"/></m>
              </p>
              <p>
                <var name="$cont[3]" width="20"/>
              </p>
            </statement>
          </task>
        </webwork>
      </exercise>

      <exercise label="ex-deriv-intro-review-4">
        <webwork xml:id="webwork-ex-deriv-intro-review-4">
          <pg-code>
            @L=(1,3,Compute("DNE"));
            Context("Interval");
            $cont=Compute("(-inf,-3)U(-3,inf)");
          </pg-code>
          <introduction>
            <p>
              Use the graph of <m>f(x)</m> provided to answer the following.
            </p>
            <image xml:id="img_02_01_ex_40" width="47%">
              <description></description>
              <latex-image>
                \begin{tikzpicture}
                \begin{axis}[
                      ymin=-1.1,ymax=3.3,%
                      xmin=-5.1,xmax=0.5,%
                ]

                \addplot [firstcurvestyle,domain=-4.5:-3] {(x+3)^2+1};
                \addplot [firstcurvestyle,domain=-3:-1] {-(x+3)^2+3};
                \filldraw [fill=white] (axis cs:-3,1) circle (2.4pt);
                \filldraw [fill=white] (axis cs:-3,3) circle (2.4pt);
                \filldraw [fill=black] (axis cs:-3,2) circle (2.4pt);

                \end{axis}
                \end{tikzpicture}
              </latex-image>
            </image>
            <instruction>
              If you need to enter <m>\infty</m>, you may type <c>infinity</c>, or just <c>INF</c>.
              If the limit does not exist, you may type <c>does not exist</c>, or just <c>DNE</c>.
            </instruction>
          </introduction>
          <task label="ex-deriv-intro-review-4a">
            <statement>
              <p>
                <m>\lim\limits_{x\to-3^-} f(x)</m>
              </p>
              <p>
                <var name="$L[0]" width="10"/>
              </p>
            </statement>
          </task>
          <task label="ex-deriv-intro-review-4b">
            <statement>
              <p>
                <m>\lim\limits_{x\to-3^+} f(x)</m>
              </p>
              <p>
                <var name="$L[1]" width="10"/>
              </p>
            </statement>
          </task>
          <task label="ex-deriv-intro-review-4c">
            <statement>
              <p>
                <m>\lim\limits_{x\to-3} f(x)</m>
              </p>
              <p>
                <var name="$L[2]" width="10"/>
              </p>
            </statement>
          </task>
          <task label="ex-deriv-intro-review-4d">
            <statement>
              <p>
                Where is <m>f</m> continuous?
              </p>
              <instruction>
                Answer using interval notation. If you need to write <m>\infty</m>, you may type <c>inf</c> or <c>infinity</c>.
                If you need the union symbol, <m>\cup</m>, you may type the capital letter <c>U</c>.
              </instruction>
              <p>
                <var name="$cont" width="15"/>
              </p>
            </statement>
          </task>
        </webwork>
      </exercise>
    </subexercises> -->
  </exercises>
</section>
